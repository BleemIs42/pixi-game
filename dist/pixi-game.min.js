!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["pixi-game"]=t():e["pixi-game"]=t()}(this,function(){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="/",__webpack_require__(__webpack_require__.s=128)}([function(e,t,r){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.autoDetectRenderer=t.Application=t.Filter=t.SpriteMaskFilter=t.Quad=t.RenderTarget=t.ObjectRenderer=t.WebGLManager=t.Shader=t.CanvasRenderTarget=t.TextureUvs=t.VideoBaseTexture=t.BaseRenderTexture=t.RenderTexture=t.BaseTexture=t.Texture=t.Spritesheet=t.CanvasGraphicsRenderer=t.GraphicsRenderer=t.GraphicsData=t.Graphics=t.TextMetrics=t.TextStyle=t.Text=t.SpriteRenderer=t.CanvasTinter=t.CanvasSpriteRenderer=t.Sprite=t.TransformBase=t.TransformStatic=t.Transform=t.Container=t.DisplayObject=t.Bounds=t.glCore=t.WebGLRenderer=t.CanvasRenderer=t.ticker=t.utils=t.settings=void 0;var n=r(1);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var i=r(4);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var o=r(5);Object.defineProperty(t,"glCore",{enumerable:!0,get:function(){return _interopRequireDefault(o).default}});var a=r(55);Object.defineProperty(t,"Bounds",{enumerable:!0,get:function(){return _interopRequireDefault(a).default}});var s=r(91);Object.defineProperty(t,"DisplayObject",{enumerable:!0,get:function(){return _interopRequireDefault(s).default}});var u=r(23);Object.defineProperty(t,"Container",{enumerable:!0,get:function(){return _interopRequireDefault(u).default}});var l=r(93);Object.defineProperty(t,"Transform",{enumerable:!0,get:function(){return _interopRequireDefault(l).default}});var h=r(92);Object.defineProperty(t,"TransformStatic",{enumerable:!0,get:function(){return _interopRequireDefault(h).default}});var c=r(57);Object.defineProperty(t,"TransformBase",{enumerable:!0,get:function(){return _interopRequireDefault(c).default}});var f=r(58);Object.defineProperty(t,"Sprite",{enumerable:!0,get:function(){return _interopRequireDefault(f).default}});var d=r(210);Object.defineProperty(t,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(d).default}});var p=r(62);Object.defineProperty(t,"CanvasTinter",{enumerable:!0,get:function(){return _interopRequireDefault(p).default}});var _=r(213);Object.defineProperty(t,"SpriteRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_).default}});var v=r(229);Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return _interopRequireDefault(v).default}});var y=r(104);Object.defineProperty(t,"TextStyle",{enumerable:!0,get:function(){return _interopRequireDefault(y).default}});var g=r(105);Object.defineProperty(t,"TextMetrics",{enumerable:!0,get:function(){return _interopRequireDefault(g).default}});var m=r(231);Object.defineProperty(t,"Graphics",{enumerable:!0,get:function(){return _interopRequireDefault(m).default}});var b=r(106);Object.defineProperty(t,"GraphicsData",{enumerable:!0,get:function(){return _interopRequireDefault(b).default}});var x=r(233);Object.defineProperty(t,"GraphicsRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(x).default}});var T=r(240);Object.defineProperty(t,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(T).default}});var w=r(241);Object.defineProperty(t,"Spritesheet",{enumerable:!0,get:function(){return _interopRequireDefault(w).default}});var E=r(15);Object.defineProperty(t,"Texture",{enumerable:!0,get:function(){return _interopRequireDefault(E).default}});var C=r(20);Object.defineProperty(t,"BaseTexture",{enumerable:!0,get:function(){return _interopRequireDefault(C).default}});var R=r(61);Object.defineProperty(t,"RenderTexture",{enumerable:!0,get:function(){return _interopRequireDefault(R).default}});var S=r(98);Object.defineProperty(t,"BaseRenderTexture",{enumerable:!0,get:function(){return _interopRequireDefault(S).default}});var P=r(95);Object.defineProperty(t,"VideoBaseTexture",{enumerable:!0,get:function(){return _interopRequireDefault(P).default}});var O=r(96);Object.defineProperty(t,"TextureUvs",{enumerable:!0,get:function(){return _interopRequireDefault(O).default}});var M=r(99);Object.defineProperty(t,"CanvasRenderTarget",{enumerable:!0,get:function(){return _interopRequireDefault(M).default}});var D=r(26);Object.defineProperty(t,"Shader",{enumerable:!0,get:function(){return _interopRequireDefault(D).default}});var A=r(25);Object.defineProperty(t,"WebGLManager",{enumerable:!0,get:function(){return _interopRequireDefault(A).default}});var I=r(33);Object.defineProperty(t,"ObjectRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(I).default}});var L=r(35);Object.defineProperty(t,"RenderTarget",{enumerable:!0,get:function(){return _interopRequireDefault(L).default}});var k=r(103);Object.defineProperty(t,"Quad",{enumerable:!0,get:function(){return _interopRequireDefault(k).default}});var F=r(101);Object.defineProperty(t,"SpriteMaskFilter",{enumerable:!0,get:function(){return _interopRequireDefault(F).default}});var N=r(102);Object.defineProperty(t,"Filter",{enumerable:!0,get:function(){return _interopRequireDefault(N).default}});var B=r(108);Object.defineProperty(t,"Application",{enumerable:!0,get:function(){return _interopRequireDefault(B).default}});var j=r(109);Object.defineProperty(t,"autoDetectRenderer",{enumerable:!0,get:function(){return j.autoDetectRenderer}});var U=r(2),q=_interopRequireWildcard(U),G=r(60),X=_interopRequireWildcard(G),W=r(3),H=_interopRequireDefault(W),V=r(24),Y=_interopRequireDefault(V),z=r(34),K=_interopRequireDefault(z);t.settings=H.default,t.utils=q,t.ticker=X,t.CanvasRenderer=Y.default,t.WebGLRenderer=K.default},function(e,t,r){"use strict";t.__esModule=!0;t.VERSION="4.5.3",t.PI_2=2*Math.PI,t.RAD_TO_DEG=180/Math.PI,t.DEG_TO_RAD=Math.PI/180,t.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},t.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},t.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},t.SCALE_MODES={LINEAR:0,NEAREST:1},t.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},t.GC_MODES={AUTO:0,MANUAL:1},t.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,t.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},t.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},t.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},t.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},t.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},function(e,t,r){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function uid(){return++g}function hex2rgb(e,t){return t=t||[],t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t}function hex2string(e){return e=e.toString(16),"#"+(e="000000".substr(0,6-e.length)+e)}function rgb2hex(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)}function getResolutionOfUrl(e,t){var r=o.default.RETINA_PREFIX.exec(e);return r?parseFloat(r[1]):void 0!==t?t:1}function decomposeDataUri(e){var t=n.DATA_URI.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,encoding:t[3]?t[3].toLowerCase():void 0,data:t[4]}}function getUrlFileExtension(e){var t=n.URL_FILE_EXTENSION.exec(e);if(t)return t[1].toLowerCase()}function getSvgSize(e){var t=n.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}function skipHello(){m=!0}function sayHello(e){if(!m){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=["\n %c %c %c Pixi.js "+n.VERSION+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,t)}else window.console&&window.console.log("Pixi.js "+n.VERSION+" - "+e+" - http://www.pixijs.com/");m=!0}}function isWebGLSupported(){var e={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),n=!(!r||!r.getContextAttributes().stencil);if(r){var i=r.getExtension("WEBGL_lose_context");i&&i.loseContext()}return r=null,n}catch(e){return!1}}function sign(e){return 0===e?0:e<0?-1:1}function destroyTextureCache(){var e=void 0;for(e in b)b[e].destroy();for(e in x)x[e].destroy()}function clearTextureCache(){var e=void 0;for(e in b)delete b[e];for(e in x)delete x[e]}function correctBlendMode(e,t){return T[t?1:0][e]}function premultiplyTint(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;var r=e>>16&255,n=e>>8&255,i=255&e;return r=r*t+.5|0,n=n*t+.5|0,i=i*t+.5|0,(255*t<<24)+(r<<16)+(n<<8)+i}function premultiplyRgba(e,t,r,n){return r=r||new Float32Array(4),n||void 0===n?(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t):(r[0]=e[0],r[1]=e[1],r[2]=e[2]),r[3]=t,r}function premultiplyTintToRgba(e,t,r,n){return r=r||new Float32Array(4),r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(255&e)/255,(n||void 0===n)&&(r[0]*=t,r[1]*=t,r[2]*=t),r[3]=t,r}t.__esModule=!0,t.premultiplyBlendMode=t.BaseTextureCache=t.TextureCache=t.mixins=t.pluginTarget=t.EventEmitter=t.removeItems=t.isMobile=void 0,t.uid=uid,t.hex2rgb=hex2rgb,t.hex2string=hex2string,t.rgb2hex=rgb2hex,t.getResolutionOfUrl=getResolutionOfUrl,t.decomposeDataUri=decomposeDataUri,t.getUrlFileExtension=getUrlFileExtension,t.getSvgSize=getSvgSize,t.skipHello=skipHello,t.sayHello=sayHello,t.isWebGLSupported=isWebGLSupported,t.sign=sign,t.destroyTextureCache=destroyTextureCache,t.clearTextureCache=clearTextureCache,t.correctBlendMode=correctBlendMode,t.premultiplyTint=premultiplyTint,t.premultiplyRgba=premultiplyRgba,t.premultiplyTintToRgba=premultiplyTintToRgba;var n=r(1),i=r(3),o=_interopRequireDefault(i),a=r(14),s=_interopRequireDefault(a),u=r(197),l=_interopRequireDefault(u),h=r(198),c=_interopRequireWildcard(h),f=r(56),d=_interopRequireWildcard(f),p=r(199),_=_interopRequireDefault(p),v=r(200),y=_interopRequireDefault(v),g=0,m=!1;t.isMobile=d,t.removeItems=_.default,t.EventEmitter=s.default,t.pluginTarget=l.default,t.mixins=c;var b=t.TextureCache=Object.create(null),x=t.BaseTextureCache=Object.create(null),T=t.premultiplyBlendMode=(0,y.default)()},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(195),i=_interopRequireDefault(n),o=r(196),a=_interopRequireDefault(o);t.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,i.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,a.default)()}},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(51);Object.defineProperty(t,"Point",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}});var i=r(80);Object.defineProperty(t,"ObservablePoint",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}});var o=r(52);Object.defineProperty(t,"Matrix",{enumerable:!0,get:function(){return _interopRequireDefault(o).default}});var a=r(81);Object.defineProperty(t,"GroupD8",{enumerable:!0,get:function(){return _interopRequireDefault(a).default}});var s=r(185);Object.defineProperty(t,"Circle",{enumerable:!0,get:function(){return _interopRequireDefault(s).default}});var u=r(186);Object.defineProperty(t,"Ellipse",{enumerable:!0,get:function(){return _interopRequireDefault(u).default}});var l=r(187);Object.defineProperty(t,"Polygon",{enumerable:!0,get:function(){return _interopRequireDefault(l).default}});var h=r(53);Object.defineProperty(t,"Rectangle",{enumerable:!0,get:function(){return _interopRequireDefault(h).default}});var c=r(188);Object.defineProperty(t,"RoundedRectangle",{enumerable:!0,get:function(){return _interopRequireDefault(c).default}})},function(e,t,r){var n={createContext:r(189),setVertexAttribArrays:r(82),GLBuffer:r(190),GLFramebuffer:r(191),GLShader:r(192),GLTexture:r(83),VertexArrayObject:r(193),shader:r(194)};void 0!==e&&e.exports&&(e.exports=n),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=n)},function(e,t){var r=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(e,t,r){(function(e){function normalizeArray(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function filter(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,n=function(e){return r.exec(e).slice(1)};t.resolve=function(){for(var t="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var i=n>=0?arguments[n]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,r="/"===i.charAt(0))}return t=normalizeArray(filter(t.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),n="/"===i(e,-1);return e=normalizeArray(filter(e.split("/"),function(e){return!!e}),!r).join("/"),e||r||(e="."),e&&n&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(filter(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,r){function trim(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var n=trim(e.split("/")),i=trim(r.split("/")),o=Math.min(n.length,i.length),a=o,s=0;s<o;s++)if(n[s]!==i[s]){a=s;break}for(var u=[],s=a;s<n.length;s++)u.push("..");return u=u.concat(i.slice(a)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=n(e),r=t[0],i=t[1];return r||i?(i&&(i=i.substr(0,i.length-1)),r+i):"."},t.basename=function(e,t){var r=n(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){return n(e)[3]};var i="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(t,r(216))},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(68),i=r(37);e.exports=function(e){return n(i(e))}},function(e,t,r){var n=r(8),i=r(6),o=r(71),a=r(17),s=function(e,t,r){var u,l,h,c=e&s.F,f=e&s.G,d=e&s.S,p=e&s.P,_=e&s.B,v=e&s.W,y=f?i:i[t]||(i[t]={}),g=y.prototype,m=f?n:d?n[t]:(n[t]||{}).prototype;f&&(r=t);for(u in r)(l=!c&&m&&void 0!==m[u])&&u in y||(h=l?m[u]:r[u],y[u]=f&&"function"!=typeof m[u]?r[u]:_&&l?o(h,n):v&&m[u]==h?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(h):p&&"function"==typeof h?o(Function.call,h):h,p&&((y.virtual||(y.virtual={}))[u]=h,e&s.R&&g&&!g[u]&&a(g,u,h)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,r){var n=r(21),i=r(72),o=r(42),a=Object.defineProperty;t.f=r(13)?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){e.exports=!r(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,r){"use strict";function Events(){}function EE(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function EventEmitter(){this._events=new Events,this._eventsCount=0}var n=Object.prototype.hasOwnProperty,i="~";Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(i=!1)),EventEmitter.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},EventEmitter.prototype.listeners=function(e,t){var r=i?i+e:e,n=this._events[r];if(t)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var o=0,a=n.length,s=new Array(a);o<a;o++)s[o]=n[o].fn;return s},EventEmitter.prototype.emit=function(e,t,r,n,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var u,l,h=this._events[s],c=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,r),!0;case 4:return h.fn.call(h.context,t,r,n),!0;case 5:return h.fn.call(h.context,t,r,n,o),!0;case 6:return h.fn.call(h.context,t,r,n,o,a),!0}for(l=1,u=new Array(c-1);l<c;l++)u[l-1]=arguments[l];h.fn.apply(h.context,u)}else{var f,d=h.length;for(l=0;l<d;l++)switch(h[l].once&&this.removeListener(e,h[l].fn,void 0,!0),c){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,t);break;case 3:h[l].fn.call(h[l].context,t,r);break;case 4:h[l].fn.call(h[l].context,t,r,n);break;default:if(!u)for(f=1,u=new Array(c-1);f<c;f++)u[f-1]=arguments[f];h[l].fn.apply(h[l].context,u)}}return!0},EventEmitter.prototype.on=function(e,t,r){var n=new EE(t,r||this),o=i?i+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},EventEmitter.prototype.once=function(e,t,r){var n=new EE(t,r||this,!0),o=i?i+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},EventEmitter.prototype.removeListener=function(e,t,r,n){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return 0==--this._eventsCount?this._events=new Events:delete this._events[o],this;var a=this._events[o];if(a.fn)a.fn!==t||n&&!a.once||r&&a.context!==r||(0==--this._eventsCount?this._events=new Events:delete this._events[o]);else{for(var s=0,u=[],l=a.length;s<l;s++)(a[s].fn!==t||n&&!a[s].once||r&&a[s].context!==r)&&u.push(a[s]);u.length?this._events[o]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new Events:delete this._events[o]}return this},EventEmitter.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new Events:delete this._events[t])):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.setMaxListeners=function(){return this},EventEmitter.prefixed=i,EventEmitter.EventEmitter=EventEmitter,e.exports=EventEmitter},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function removeAllHandlers(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(20),o=_interopRequireDefault(i),a=r(95),s=_interopRequireDefault(a),u=r(96),l=_interopRequireDefault(u),h=r(14),c=_interopRequireDefault(h),f=r(4),d=r(2),p=r(3),_=_interopRequireDefault(p),v=function(e){function Texture(t,r,n,i,o){_classCallCheck(this,Texture);var a=_possibleConstructorReturn(this,e.call(this));if(a.noFrame=!1,r||(a.noFrame=!0,r=new f.Rectangle(0,0,1,1)),t instanceof Texture&&(t=t.baseTexture),a.baseTexture=t,a._frame=r,a.trim=i,a.valid=!1,a.requiresUpdate=!1,a._uvs=null,a.orig=n||r,a._rotate=Number(o||0),!0===o)a._rotate=2;else if(a._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return t.hasLoaded?(a.noFrame&&(r=new f.Rectangle(0,0,t.width,t.height),t.on("update",a.onBaseTextureUpdated,a)),a.frame=r):t.once("loaded",a.onBaseTextureLoaded,a),a._updateID=0,a.transform=null,a.textureCacheIds=[],a}return _inherits(Texture,e),Texture.prototype.update=function(){this.baseTexture.update()},Texture.prototype.onBaseTextureLoaded=function(e){this._updateID++,this.noFrame?this.frame=new f.Rectangle(0,0,e.width,e.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},Texture.prototype.onBaseTextureUpdated=function(e){this._updateID++,this._frame.width=e.width,this._frame.height=e.height,this.emit("update",this)},Texture.prototype.destroy=function(e){this.baseTexture&&(e&&(d.TextureCache[this.baseTexture.imageUrl]&&Texture.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null},Texture.prototype.clone=function(){return new Texture(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new l.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},Texture.fromImage=function(e,t,r,n){var i=d.TextureCache[e];return i||(i=new Texture(o.default.fromImage(e,t,r,n)),Texture.addToCache(i,e)),i},Texture.fromFrame=function(e){var t=d.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return t},Texture.fromCanvas=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new Texture(o.default.fromCanvas(e,t,r))},Texture.fromVideo=function(e,t){return"string"==typeof e?Texture.fromVideoUrl(e,t):new Texture(s.default.fromVideo(e,t))},Texture.fromVideoUrl=function(e,t){return new Texture(s.default.fromUrl(e,t))},Texture.from=function(e){if("string"==typeof e){var t=d.TextureCache[e];if(!t){return null!==e.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?Texture.fromVideoUrl(e):Texture.fromImage(e)}return t}return e instanceof HTMLImageElement?new Texture(o.default.from(e)):e instanceof HTMLCanvasElement?Texture.fromCanvas(e,_.default.SCALE_MODE,"HTMLCanvasElement"):e instanceof HTMLVideoElement?Texture.fromVideo(e):e instanceof o.default?new Texture(e):e},Texture.fromLoader=function(e,t,r){var n=new o.default(e,void 0,(0,d.getResolutionOfUrl)(t)),i=new Texture(n);return n.imageUrl=t,r||(r=t),o.default.addToCache(i.baseTexture,r),Texture.addToCache(i,r),r!==t&&(o.default.addToCache(i.baseTexture,t),Texture.addToCache(i,t)),i},Texture.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),d.TextureCache[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),d.TextureCache[t]=e)},Texture.removeFromCache=function(e){if("string"==typeof e){var t=d.TextureCache[e];if(t){var r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete d.TextureCache[e],t}}else if(e&&e.textureCacheIds){for(var n=0;n<e.textureCacheIds.length;++n)delete d.TextureCache[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null},n(Texture,[{key:"frame",get:function(){return this._frame},set:function(e){if(this._frame=e,this.noFrame=!1,e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: X: "+e.x+" + "+e.width+" > "+this.baseTexture.width+" Y: "+e.y+" + "+e.height+" > "+this.baseTexture.height);this.valid=e&&e.width&&e.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=e),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),Texture}(c.default);t.default=v,v.EMPTY=new v(new o.default),removeAllHandlers(v.EMPTY),removeAllHandlers(v.EMPTY.baseTexture),v.WHITE=function(){var e=document.createElement("canvas");e.width=10,e.height=10;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,10,10),new v(new o.default(e))}(),removeAllHandlers(v.WHITE),removeAllHandlers(v.WHITE.baseTexture)},function(e,t,r){var n=r(67),i=r(41);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(12),i=r(31);e.exports=r(13)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){var n=r(40)("wks"),i=r(30),o=r(8).Symbol,a="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=n},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(2),i=r(3),o=_interopRequireDefault(i),a=r(14),s=_interopRequireDefault(a),u=r(201),l=_interopRequireDefault(u),h=r(59),c=_interopRequireDefault(h),f=function(e){function BaseTexture(t,r,i){_classCallCheck(this,BaseTexture);var a=_possibleConstructorReturn(this,e.call(this));return a.uid=(0,n.uid)(),a.touched=0,a.resolution=i||o.default.RESOLUTION,a.width=100,a.height=100,a.realWidth=100,a.realHeight=100,a.scaleMode=void 0!==r?r:o.default.SCALE_MODE,a.hasLoaded=!1,a.isLoading=!1,a.source=null,a.origSource=null,a.imageType=null,a.sourceScale=1,a.premultipliedAlpha=!0,a.imageUrl=null,a.isPowerOfTwo=!1,a.mipmap=o.default.MIPMAP_TEXTURES,a.wrapMode=o.default.WRAP_MODE,a._glTextures={},a._enabled=0,a._virtalBoundId=-1,a._destroyed=!1,a.textureCacheIds=[],t&&a.loadSource(t),a}return _inherits(BaseTexture,e),BaseTexture.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},BaseTexture.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=c.default.isPow2(this.realWidth)&&c.default.isPow2(this.realHeight)},BaseTexture.prototype.loadSource=function(e){var t=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,t&&this.source&&(this.source.onload=null,this.source.onerror=null);var r=!this.source;if(this.source=e,(e.src&&e.complete||e.getContext)&&e.width&&e.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),r&&this.emit("loaded",this);else if(!e.getContext){this.isLoading=!0;var n=this;if(e.onload=function(){if(n._updateImageType(),e.onload=null,e.onerror=null,n.isLoading){if(n.isLoading=!1,n._sourceLoaded(),"svg"===n.imageType)return void n._loadSvgSource();n.emit("loaded",n)}},e.onerror=function(){e.onload=null,e.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},e.complete&&e.src){if(e.onload=null,e.onerror=null,"svg"===n.imageType)return void n._loadSvgSource();this.isLoading=!1,e.width&&e.height?(this._sourceLoaded(),t&&this.emit("loaded",this)):t&&this.emit("error",this)}}},BaseTexture.prototype._updateImageType=function(){if(this.imageUrl){var e=(0,n.decomposeDataUri)(this.imageUrl),t=void 0;if(e&&"image"===e.mediaType){var r=e.subType.split("+")[0];if(!(t=(0,n.getUrlFileExtension)("."+r)))throw new Error("Invalid image type in data URI.")}else(t=(0,n.getUrlFileExtension)(this.imageUrl))||(t="png");this.imageType=t}},BaseTexture.prototype._loadSvgSource=function(){if("svg"===this.imageType){var e=(0,n.decomposeDataUri)(this.imageUrl);e?this._loadSvgSourceUsingDataUri(e):this._loadSvgSourceUsingXhr()}},BaseTexture.prototype._loadSvgSourceUsingDataUri=function(e){var t=void 0;if("base64"===e.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");t=atob(e.data)}else t=e.data;this._loadSvgSourceUsingString(t)},BaseTexture.prototype._loadSvgSourceUsingXhr=function(){var e=this,t=new XMLHttpRequest;t.onload=function(){if(t.readyState!==t.DONE||200!==t.status)throw new Error("Failed to load SVG using XHR.");e._loadSvgSourceUsingString(t.response)},t.onerror=function(){return e.emit("error",e)},t.open("GET",this.imageUrl,!0),t.send()},BaseTexture.prototype._loadSvgSourceUsingString=function(e){var t=(0,n.getSvgSize)(e),r=t.width,i=t.height;if(!r||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(r*this.sourceScale),this.realHeight=Math.round(i*this.sourceScale),this._updateDimensions();var o=document.createElement("canvas");o.width=this.realWidth,o.height=this.realHeight,o._pixiId="canvas_"+(0,n.uid)(),o.getContext("2d").drawImage(this.source,0,0,r,i,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=o,BaseTexture.addToCache(this,o._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},BaseTexture.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},BaseTexture.prototype.destroy=function(){this.imageUrl&&(delete n.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),BaseTexture.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},BaseTexture.prototype.dispose=function(){this.emit("dispose",this)},BaseTexture.prototype.updateSourceImage=function(e){this.source.src=e,this.loadSource(this.source)},BaseTexture.fromImage=function(e,t,r,i){var o=n.BaseTextureCache[e];if(!o){var a=new Image;void 0===t&&0!==e.indexOf("data:")?a.crossOrigin=(0,l.default)(e):t&&(a.crossOrigin="string"==typeof t?t:"anonymous"),o=new BaseTexture(a,r),o.imageUrl=e,i&&(o.sourceScale=i),o.resolution=(0,n.getResolutionOfUrl)(e),a.src=e,BaseTexture.addToCache(o,e)}return o},BaseTexture.fromCanvas=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";e._pixiId||(e._pixiId=r+"_"+(0,n.uid)());var i=n.BaseTextureCache[e._pixiId];return i||(i=new BaseTexture(e,t),BaseTexture.addToCache(i,e._pixiId)),i},BaseTexture.from=function(e,t,r){if("string"==typeof e)return BaseTexture.fromImage(e,void 0,t,r);if(e instanceof HTMLImageElement){var i=e.src,o=n.BaseTextureCache[i];return o||(o=new BaseTexture(e,t),o.imageUrl=i,r&&(o.sourceScale=r),o.resolution=(0,n.getResolutionOfUrl)(i),BaseTexture.addToCache(o,i)),o}return e instanceof HTMLCanvasElement?BaseTexture.fromCanvas(e,t):e},BaseTexture.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),n.BaseTextureCache[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),n.BaseTextureCache[t]=e)},BaseTexture.removeFromCache=function(e){if("string"==typeof e){var t=n.BaseTextureCache[e];if(t){var r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete n.BaseTextureCache[e],t}}else if(e&&e.textureCacheIds){for(var i=0;i<e.textureCacheIds.length;++i)delete n.BaseTextureCache[e.textureCacheIds[i]];return e.textureCacheIds.length=0,e}return null},BaseTexture}(s.default);t.default=f},function(e,t,r){var n=r(22);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(2),o=r(91),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(e){function Container(){_classCallCheck(this,Container);var t=_possibleConstructorReturn(this,e.call(this));return t.children=[],t}return _inherits(Container,e),Container.prototype.onChildrenChange=function(){},Container.prototype.addChild=function(e){var t=arguments.length;if(t>1)for(var r=0;r<t;r++)this.addChild(arguments[r]);else e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),e.emit("added",this);return e},Container.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),e},Container.prototype.swapChildren=function(e,t){if(e!==t){var r=this.getChildIndex(e),n=this.getChildIndex(t);this.children[r]=t,this.children[n]=e,this.onChildrenChange(r<n?r:n)}},Container.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},Container.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The supplied index is out of bounds");var r=this.getChildIndex(e);(0,i.removeItems)(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)},Container.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},Container.prototype.removeChild=function(e){var t=arguments.length;if(t>1)for(var r=0;r<t;r++)this.removeChild(arguments[r]);else{var n=this.children.indexOf(e);if(-1===n)return null;e.parent=null,e.transform._parentID=-1,(0,i.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),e.emit("removed",this)}return e},Container.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,(0,i.removeItems)(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),t},Container.prototype.removeChildren=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],r=e,n="number"==typeof t?t:this.children.length,i=n-r,o=void 0;if(i>0&&i<=n){o=this.children.splice(r,i);for(var a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var s=0;s<o.length;++s)o[s].emit("removed",this);return o}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},Container.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var r=this.children[e];r.visible&&r.updateTransform()}},Container.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];t.visible&&t.renderable&&(t.calculateBounds(),t._mask?(t._mask.calculateBounds(),this._bounds.addBoundsMask(t._bounds,t._mask._bounds)):t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds))}this._lastBoundsID=this._boundsID},Container.prototype._calculateBounds=function(){},Container.prototype.renderWebGL=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(e);else{this._renderWebGL(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].renderWebGL(e)}},Container.prototype.renderAdvancedWebGL=function(e){e.flush();var t=this._filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<t.length;n++)t[n].enabled&&this._enabledFilters.push(t[n]);this._enabledFilters.length&&e.filterManager.pushFilter(this,this._enabledFilters)}r&&e.maskManager.pushMask(this,this._mask),this._renderWebGL(e);for(var i=0,o=this.children.length;i<o;i++)this.children[i].renderWebGL(e);e.flush(),r&&e.maskManager.popMask(this,this._mask),t&&this._enabledFilters&&this._enabledFilters.length&&e.filterManager.popFilter()},Container.prototype._renderWebGL=function(e){},Container.prototype._renderCanvas=function(e){},Container.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&e.maskManager.pushMask(this._mask),this._renderCanvas(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},Container.prototype.destroy=function(t){e.prototype.destroy.call(this);var r="boolean"==typeof t?t:t&&t.children,n=this.removeChildren(0,this.children.length);if(r)for(var i=0;i<n.length;++i)n[i].destroy(t)},n(Container,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}]),Container}(a.default);t.default=s,s.prototype.containerUpdateTransform=s.prototype.updateTransform},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(97),i=_interopRequireDefault(n),o=r(211),a=_interopRequireDefault(o),s=r(99),u=_interopRequireDefault(s),l=r(212),h=_interopRequireDefault(l),c=r(2),f=r(1),d=r(3),p=_interopRequireDefault(d),_=function(e){function CanvasRenderer(t,r,n){_classCallCheck(this,CanvasRenderer);var i=_possibleConstructorReturn(this,e.call(this,"Canvas",t,r,n));return i.type=f.RENDERER_TYPE.CANVAS,i.rootContext=i.view.getContext("2d",{alpha:i.transparent}),i.context=i.rootContext,i.refresh=!0,i.maskManager=new a.default(i),i.smoothProperty="imageSmoothingEnabled",i.rootContext.imageSmoothingEnabled||(i.rootContext.webkitImageSmoothingEnabled?i.smoothProperty="webkitImageSmoothingEnabled":i.rootContext.mozImageSmoothingEnabled?i.smoothProperty="mozImageSmoothingEnabled":i.rootContext.oImageSmoothingEnabled?i.smoothProperty="oImageSmoothingEnabled":i.rootContext.msImageSmoothingEnabled&&(i.smoothProperty="msImageSmoothingEnabled")),i.initPlugins(),i.blendModes=(0,h.default)(),i._activeBlendMode=null,i.renderingToScreen=!1,i.resize(i.options.width,i.options.height),i}return _inherits(CanvasRenderer,e),CanvasRenderer.prototype.render=function(e,t,r,n,i){if(this.view){this.renderingToScreen=!t,this.emit("prerender");var o=this.resolution;t?(t=t.baseTexture||t,t._canvasRenderTarget||(t._canvasRenderTarget=new u.default(t.width,t.height,t.resolution),t.source=t._canvasRenderTarget.canvas,t.valid=!0),this.context=t._canvasRenderTarget.context,this.resolution=t._canvasRenderTarget.resolution):this.context=this.rootContext;var a=this.context;if(t||(this._lastObjectRendered=e),!i){var s=e.parent,l=this._tempDisplayObjectParent.transform.worldTransform;n?(n.copy(l),this._tempDisplayObjectParent.transform._worldID=-1):l.identity(),e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=s}a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,a.globalCompositeOperation=this.blendModes[f.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(a.fillStyle="black",a.clear()),(void 0!==r?r:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?a.clearRect(0,0,this.width,this.height):(a.fillStyle=this._backgroundColorString,a.fillRect(0,0,this.width,this.height)));var h=this.context;this.context=a,e.renderCanvas(this),this.context=h,this.resolution=o,this.emit("postrender")}},CanvasRenderer.prototype.clear=function(e){var t=this.context;e=e||this._backgroundColorString,!this.transparent&&e?(t.fillStyle=e,t.fillRect(0,0,this.width,this.height)):t.clearRect(0,0,this.width,this.height)},CanvasRenderer.prototype.setBlendMode=function(e){this._activeBlendMode!==e&&(this._activeBlendMode=e,this.context.globalCompositeOperation=this.blendModes[e])},CanvasRenderer.prototype.destroy=function(t){this.destroyPlugins(),e.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},CanvasRenderer.prototype.resize=function(t,r){e.prototype.resize.call(this,t,r),this.smoothProperty&&(this.rootContext[this.smoothProperty]=p.default.SCALE_MODE===f.SCALE_MODES.LINEAR)},CanvasRenderer}(i.default);t.default=_,c.pluginTarget.mixin(_)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function WebGLManager(e){_classCallCheck(this,WebGLManager),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return WebGLManager.prototype.onContextChange=function(){},WebGLManager.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},WebGLManager}();t.default=n},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function checkPrecision(e,t){if(e instanceof Array){if("precision"!==e[0].substring(0,9)){var r=e.slice(0);return r.unshift("precision "+t+" float;"),r}}else if("precision"!==e.substring(0,9))return"precision "+t+" float;\n"+e;return e}t.__esModule=!0;var n=r(5),i=r(3),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(e){function Shader(t,r,n){return _classCallCheck(this,Shader),_possibleConstructorReturn(this,e.call(this,t,checkPrecision(r,o.default.PRECISION_VERTEX),checkPrecision(n,o.default.PRECISION_FRAGMENT)))}return _inherits(Shader,e),Shader}(n.GLShader);t.default=a},function(e,t,r){"use strict";var n=r(267).default,i=r(65).default,o=r(122),a=r(123);n.Resource=i,n.async=o,n.base64=a,e.exports=n,e.exports.default=n},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(0),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),a=r(64),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=new o.Point,l=new o.Polygon,h=function(e){function Mesh(t,r,n,i,a){_classCallCheck(this,Mesh);var u=_possibleConstructorReturn(this,e.call(this));return u._texture=t,u.uvs=n||new Float32Array([0,0,1,0,1,1,0,1]),u.vertices=r||new Float32Array([0,0,100,0,100,100,0,100]),u.indices=i||new Uint16Array([0,1,3,2]),u.dirty=0,u.indexDirty=0,u.blendMode=o.BLEND_MODES.NORMAL,u.canvasPadding=0,u.drawMode=a||Mesh.DRAW_MODES.TRIANGLE_MESH,u.shader=null,u.tintRgb=new Float32Array([1,1,1]),u._glDatas={},u._uvTransform=new s.default(t),u.uploadUvTransform=!1,u.pluginName="mesh",u}return _inherits(Mesh,e),Mesh.prototype._renderWebGL=function(e){this.refresh(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},Mesh.prototype._renderCanvas=function(e){this.refresh(),e.plugins[this.pluginName].render(this)},Mesh.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},Mesh.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},Mesh.prototype.refresh=function(e){this._uvTransform.update(e)&&this._refresh()},Mesh.prototype._refresh=function(){},Mesh.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},Mesh.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,u);for(var t=this.vertices,r=l.points,n=this.indices,i=this.indices.length,o=this.drawMode===Mesh.DRAW_MODES.TRIANGLES?3:1,a=0;a+2<i;a+=o){var s=2*n[a],h=2*n[a+1],c=2*n[a+2];if(r[0]=t[s],r[1]=t[s+1],r[2]=t[h],r[3]=t[h+1],r[4]=t[c],r[5]=t[c+1],l.contains(u.x,u.y))return!0}return!1},n(Mesh,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return o.utils.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=o.utils.hex2rgb(e,this.tintRgb)}}]),Mesh}(o.Container);t.default=h,h.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},function(e,t,r){var n=r(37);e.exports=function(e){return Object(n(e))}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(25),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=function(e){function ObjectRenderer(){return _classCallCheck(this,ObjectRenderer),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(ObjectRenderer,e),ObjectRenderer.prototype.start=function(){},ObjectRenderer.prototype.stop=function(){this.flush()},ObjectRenderer.prototype.flush=function(){},ObjectRenderer.prototype.render=function(e){},ObjectRenderer}(i.default);t.default=o},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(97),i=_interopRequireDefault(n),o=r(214),a=_interopRequireDefault(o),s=r(217),u=_interopRequireDefault(s),l=r(218),h=_interopRequireDefault(l),c=r(35),f=_interopRequireDefault(c),d=r(33),p=_interopRequireDefault(d),_=r(220),v=_interopRequireDefault(_),y=r(20),g=_interopRequireDefault(y),m=r(221),b=_interopRequireDefault(m),x=r(222),T=_interopRequireDefault(x),w=r(224),E=_interopRequireDefault(w),C=r(225),R=_interopRequireDefault(C),S=r(2),P=r(5),O=_interopRequireDefault(P),M=r(1),D=0,A=function(e){function WebGLRenderer(t,r,n){_classCallCheck(this,WebGLRenderer);var i=_possibleConstructorReturn(this,e.call(this,"WebGL",t,r,n));return i.legacy=i.options.legacy,i.legacy&&(O.default.VertexArrayObject.FORCE_NATIVE=!0),i.type=M.RENDERER_TYPE.WEBGL,i.handleContextLost=i.handleContextLost.bind(i),i.handleContextRestored=i.handleContextRestored.bind(i),i.view.addEventListener("webglcontextlost",i.handleContextLost,!1),i.view.addEventListener("webglcontextrestored",i.handleContextRestored,!1),i._contextOptions={alpha:i.transparent,antialias:i.options.antialias,premultipliedAlpha:i.transparent&&"notMultiplied"!==i.transparent,stencil:!0,preserveDrawingBuffer:i.options.preserveDrawingBuffer},i._backgroundColorRgba[3]=i.transparent?0:1,i.maskManager=new a.default(i),i.stencilManager=new u.default(i),i.emptyRenderer=new p.default(i),i.currentRenderer=i.emptyRenderer,i.initPlugins(),i.options.context&&(0,R.default)(i.options.context),i.gl=i.options.context||O.default.createContext(i.view,i._contextOptions),i.CONTEXT_UID=D++,i.state=new T.default(i.gl),i.renderingToScreen=!0,i.boundTextures=null,i._activeShader=null,i._activeVao=null,i._activeRenderTarget=null,i._initContext(),i.filterManager=new h.default(i),i.drawModes=(0,E.default)(i.gl),i._nextTextureLocation=0,i.setBlendMode(0),i}return _inherits(WebGLRenderer,e),WebGLRenderer.prototype._initContext=function(){var e=this.gl;e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext();var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(t),this.emptyTextures=new Array(t),this.textureManager=new v.default(this),this.textureGC=new b.default(this),this.state.resetToDefault(),this.rootRenderTarget=new f.default(e,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var r=new O.default.GLTexture.fromData(e,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var i=0;i<t;i++){var o=new g.default;o._glTextures[this.CONTEXT_UID]=r,this.boundTextures[i]=n,this.emptyTextures[i]=o,this.bindTexture(null,i)}this.emit("context",e),this.resize(this.screen.width,this.screen.height)},WebGLRenderer.prototype.render=function(e,t,r,n,i){if(this.renderingToScreen=!t,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,t||(this._lastObjectRendered=e),!i){var o=e.parent;e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=o}this.bindRenderTexture(t,n),this.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this._activeRenderTarget.clear(),e.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},WebGLRenderer.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},WebGLRenderer.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},WebGLRenderer.prototype.resize=function(e,t){i.default.prototype.resize.call(this,e,t),this.rootRenderTarget.resize(e,t),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},WebGLRenderer.prototype.setBlendMode=function(e){this.state.setBlendMode(e)},WebGLRenderer.prototype.clear=function(e){this._activeRenderTarget.clear(e)},WebGLRenderer.prototype.setTransform=function(e){this._activeRenderTarget.transform=e},WebGLRenderer.prototype.clearRenderTexture=function(e,t){var r=e.baseTexture,n=r._glRenderTargets[this.CONTEXT_UID];return n&&n.clear(t),this},WebGLRenderer.prototype.bindRenderTexture=function(e,t){var r=void 0;if(e){var n=e.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),r=n._glRenderTargets[this.CONTEXT_UID],r.setFrame(e.frame)}else r=this.rootRenderTarget;return r.transform=t,this.bindRenderTarget(r),this},WebGLRenderer.prototype.bindRenderTarget=function(e){return e!==this._activeRenderTarget&&(this._activeRenderTarget=e,e.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=e.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(e.stencilMaskStack)),this},WebGLRenderer.prototype.bindShader=function(e,t){return this._activeShader!==e&&(this._activeShader=e,e.bind(),!1!==t&&(e.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},WebGLRenderer.prototype.bindTexture=function(e,t,r){if(e=e||this.emptyTextures[t],e=e.baseTexture||e,e.touched=this.textureGC.count,r)t=t||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===e)return n;void 0===t&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,t=this.boundTextures.length-this._nextTextureLocation-1)}var i=this.gl,o=e._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[t]=e,i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(e,t),t},WebGLRenderer.prototype.unbindTexture=function(e){var t=this.gl;e=e.baseTexture||e;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===e&&(this.boundTextures[r]=this.emptyTextures[r],t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));return this},WebGLRenderer.prototype.createVao=function(){return new O.default.VertexArrayObject(this.gl,this.state.attribState)},WebGLRenderer.prototype.bindVao=function(e){return this._activeVao===e?this:(e?e.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=e,this)},WebGLRenderer.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},WebGLRenderer.prototype.handleContextLost=function(e){e.preventDefault()},WebGLRenderer.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this._initContext()},WebGLRenderer.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),e.prototype.destroy.call(this,t),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},WebGLRenderer}(i.default);t.default=A,S.pluginTarget.mixin(A)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(4),i=r(1),o=r(3),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=r(5),u=function(){function RenderTarget(e,t,r,o,u,l){_classCallCheck(this,RenderTarget),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new n.Rectangle(0,0,1,1),this.resolution=u||a.default.RESOLUTION,this.projectionMatrix=new n.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new n.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0!==o?o:a.default.SCALE_MODE,this.root=l,this.root?(this.frameBuffer=new s.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=s.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===i.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(t,r)}return RenderTarget.prototype.clear=function(e){var t=e||this.clearColor;this.frameBuffer.clear(t[0],t[1],t[2],t[3])},RenderTarget.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},RenderTarget.prototype.setFrame=function(e,t){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||this.destinationFrame},RenderTarget.prototype.activate=function(){var e=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(e.enable(e.SCISSOR_TEST),e.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):e.disable(e.SCISSOR_TEST),e.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},RenderTarget.prototype.calculateProjection=function(e,t){var r=this.projectionMatrix;t=t||e,r.identity(),this.root?(r.a=1/e.width*2,r.d=-1/e.height*2,r.tx=-1-t.x*r.a,r.ty=1-t.y*r.d):(r.a=1/e.width*2,r.d=1/e.height*2,r.tx=-1-t.x*r.a,r.ty=-1-t.y*r.d)},RenderTarget.prototype.resize=function(e,t){if(e|=0,t|=0,this.size.width!==e||this.size.height!==t){this.size.width=e,this.size.height=t,this.defaultFrame.width=e,this.defaultFrame.height=t,this.frameBuffer.resize(e*this.resolution,t*this.resolution);var r=this.frame||this.size;this.calculateProjection(r)}},RenderTarget.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},RenderTarget}();t.default=u},function(e,t,r){"use strict";function buildLine(e,t){var r=e.points;if(0!==r.length){var o=new n.Point(r[0],r[1]),a=new n.Point(r[r.length-2],r[r.length-1]);if(o.x===a.x&&o.y===a.y){r=r.slice(),r.pop(),r.pop(),a=new n.Point(r[r.length-2],r[r.length-1]);var s=a.x+.5*(o.x-a.x),u=a.y+.5*(o.y-a.y);r.unshift(s,u),r.push(s,u)}var l=t.points,h=t.indices,c=r.length/2,f=r.length,d=l.length/6,p=e.lineWidth/2,_=(0,i.hex2rgb)(e.lineColor),v=e.lineAlpha,y=_[0]*v,g=_[1]*v,m=_[2]*v,b=r[0],x=r[1],T=r[2],w=r[3],E=0,C=0,R=-(x-w),S=b-T,P=0,O=0,M=0,D=0,A=Math.sqrt(R*R+S*S);R/=A,S/=A,R*=p,S*=p,l.push(b-R,x-S,y,g,m,v),l.push(b+R,x+S,y,g,m,v);for(var I=1;I<c-1;++I){b=r[2*(I-1)],x=r[2*(I-1)+1],T=r[2*I],w=r[2*I+1],E=r[2*(I+1)],C=r[2*(I+1)+1],R=-(x-w),S=b-T,A=Math.sqrt(R*R+S*S),R/=A,S/=A,R*=p,S*=p,P=-(w-C),O=T-E,A=Math.sqrt(P*P+O*O),P/=A,O/=A,P*=p,O*=p;var L=-S+x-(-S+w),k=-R+T-(-R+b),F=(-R+b)*(-S+w)-(-R+T)*(-S+x),N=-O+C-(-O+w),B=-P+T-(-P+E),j=(-P+E)*(-O+w)-(-P+T)*(-O+C),U=L*B-N*k;if(Math.abs(U)<.1)U+=10.1,l.push(T-R,w-S,y,g,m,v),l.push(T+R,w+S,y,g,m,v);else{var q=(k*j-B*F)/U,G=(N*F-L*j)/U;(q-T)*(q-T)+(G-w)*(G-w)>196*p*p?(M=R-P,D=S-O,A=Math.sqrt(M*M+D*D),M/=A,D/=A,M*=p,D*=p,l.push(T-M,w-D),l.push(y,g,m,v),l.push(T+M,w+D),l.push(y,g,m,v),l.push(T-M,w-D),l.push(y,g,m,v),f++):(l.push(q,G),l.push(y,g,m,v),l.push(T-(q-T),w-(G-w)),l.push(y,g,m,v))}}b=r[2*(c-2)],x=r[2*(c-2)+1],T=r[2*(c-1)],w=r[2*(c-1)+1],R=-(x-w),S=b-T,A=Math.sqrt(R*R+S*S),R/=A,S/=A,R*=p,S*=p,l.push(T-R,w-S),l.push(y,g,m,v),l.push(T+R,w+S),l.push(y,g,m,v),h.push(d);for(var X=0;X<f;++X)h.push(d++);h.push(d-1)}}function buildNativeLine(e,t){var r=0,n=e.points;if(0!==n.length){var o=t.points,a=n.length/2,s=(0,i.hex2rgb)(e.lineColor),u=e.lineAlpha,l=s[0]*u,h=s[1]*u,c=s[2]*u;for(r=1;r<a;r++){var f=n[2*(r-1)],d=n[2*(r-1)+1],p=n[2*r],_=n[2*r+1];o.push(f,d),o.push(l,h,c,u),o.push(p,_),o.push(l,h,c,u)}}}t.__esModule=!0,t.default=function(e,t,r){e.nativeLines?buildNativeLine(e,r):buildLine(e,t)};var n=r(4),i=r(2)},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(40)("keys"),i=r(30);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t,r){var n=r(8),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(22);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){e.exports=!0},function(e,t){e.exports={}},function(e,t,r){var n=r(21),i=r(154),o=r(41),a=r(39)("IE_PROTO"),s=function(){},u=function(){var e,t=r(73)("iframe"),n=o.length;for(t.style.display="none",r(155).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u.prototype[o[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[a]=e):r=u(),void 0===t?r:i(r,t)}},function(e,t,r){var n=r(12).f,i=r(9),o=r(19)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},function(e,t,r){t.f=r(19)},function(e,t,r){var n=r(8),i=r(6),o=r(44),a=r(48),s=r(12).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function Point(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,Point),this.x=e,this.y=t}return Point.prototype.clone=function(){return new Point(this.x,this.y)},Point.prototype.copy=function(e){this.set(e.x,e.y)},Point.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},Point.prototype.set=function(e,t){this.x=e||0,this.y=t||(0!==t?this.x:0)},Point}();t.default=n},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(51),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(){function Matrix(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;_classCallCheck(this,Matrix),this.a=e,this.b=t,this.c=r,this.d=n,this.tx=i,this.ty=o,this.array=null}return Matrix.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},Matrix.prototype.set=function(e,t,r,n,i,o){return this.a=e,this.b=t,this.c=r,this.d=n,this.tx=i,this.ty=o,this},Matrix.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},Matrix.prototype.apply=function(e,t){t=t||new o.default;var r=e.x,n=e.y;return t.x=this.a*r+this.c*n+this.tx,t.y=this.b*r+this.d*n+this.ty,t},Matrix.prototype.applyInverse=function(e,t){t=t||new o.default;var r=1/(this.a*this.d+this.c*-this.b),n=e.x,i=e.y;return t.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,t},Matrix.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},Matrix.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},Matrix.prototype.rotate=function(e){var t=Math.cos(e),r=Math.sin(e),n=this.a,i=this.c,o=this.tx;return this.a=n*t-this.b*r,this.b=n*r+this.b*t,this.c=i*t-this.d*r,this.d=i*r+this.d*t,this.tx=o*t-this.ty*r,this.ty=o*r+this.ty*t,this},Matrix.prototype.append=function(e){var t=this.a,r=this.b,n=this.c,i=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*r+e.b*i,this.c=e.c*t+e.d*n,this.d=e.c*r+e.d*i,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*i+this.ty,this},Matrix.prototype.setTransform=function(e,t,r,n,i,o,a,s,u){var l=Math.sin(a),h=Math.cos(a),c=Math.cos(u),f=Math.sin(u),d=-Math.sin(s),p=Math.cos(s),_=h*i,v=l*i,y=-l*o,g=h*o;return this.a=c*_+f*y,this.b=c*v+f*g,this.c=d*_+p*y,this.d=d*v+p*g,this.tx=e+(r*_+n*y),this.ty=t+(r*v+n*g),this},Matrix.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var r=this.a,n=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},Matrix.prototype.decompose=function(e){var t=this.a,r=this.b,n=this.c,i=this.d,o=-Math.atan2(-n,i),a=Math.atan2(r,t);return Math.abs(o+a)<1e-5?(e.rotation=a,t<0&&i>=0&&(e.rotation+=e.rotation<=0?Math.PI:-Math.PI),e.skew.x=e.skew.y=0):(e.skew.x=o,e.skew.y=a),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(n*n+i*i),e.position.x=this.tx,e.position.y=this.ty,e},Matrix.prototype.invert=function(){var e=this.a,t=this.b,r=this.c,n=this.d,i=this.tx,o=e*n-t*r;return this.a=n/o,this.b=-t/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(e*this.ty-t*i)/o,this},Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Matrix.prototype.clone=function(){var e=new Matrix;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},Matrix.prototype.copy=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},n(Matrix,null,[{key:"IDENTITY",get:function(){return new Matrix}},{key:"TEMP_MATRIX",get:function(){return new Matrix}}]),Matrix}();t.default=a},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(1),o=function(){function Rectangle(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;_classCallCheck(this,Rectangle),this.x=e,this.y=t,this.width=r,this.height=n,this.type=i.SHAPES.RECT}return Rectangle.prototype.clone=function(){return new Rectangle(this.x,this.y,this.width,this.height)},Rectangle.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},Rectangle.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)},Rectangle.prototype.pad=function(e,t){e=e||0,t=t||(0!==t?e:0),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t},Rectangle.prototype.fit=function(e){this.x<e.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=e.x),this.y<e.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=e.y),this.x+this.width>e.x+e.width&&(this.width=e.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>e.y+e.height&&(this.height=e.height-this.y,this.height<0&&(this.height=0))},Rectangle.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);this.x=t,this.width=r-t,this.y=n,this.height=i-n},n(Rectangle,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new Rectangle(0,0,0,0)}}]),Rectangle}();t.default=o},function(e,t){var r=function(e,t){if(!n){var r=Object.keys(i);n={};for(var o=0;o<r.length;++o){var a=r[o];n[e[a]]=i[a]}}return n[t]},n=null,i={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};e.exports=r},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(4),i=function(){function Bounds(){_classCallCheck(this,Bounds),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return Bounds.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},Bounds.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},Bounds.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?n.Rectangle.EMPTY:(e=e||new n.Rectangle(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},Bounds.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},Bounds.prototype.addQuad=function(e){var t=this.minX,r=this.minY,n=this.maxX,i=this.maxY,o=e[0],a=e[1];t=o<t?o:t,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,o=e[2],a=e[3],t=o<t?o:t,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,o=e[4],a=e[5],t=o<t?o:t,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,o=e[6],a=e[7],t=o<t?o:t,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,this.minX=t,this.minY=r,this.maxX=n,this.maxY=i},Bounds.prototype.addFrame=function(e,t,r,n,i){var o=e.worldTransform,a=o.a,s=o.b,u=o.c,l=o.d,h=o.tx,c=o.ty,f=this.minX,d=this.minY,p=this.maxX,_=this.maxY,v=a*t+u*r+h,y=s*t+l*r+c;f=v<f?v:f,d=y<d?y:d,p=v>p?v:p,_=y>_?y:_,v=a*n+u*r+h,y=s*n+l*r+c,f=v<f?v:f,d=y<d?y:d,p=v>p?v:p,_=y>_?y:_,v=a*t+u*i+h,y=s*t+l*i+c,f=v<f?v:f,d=y<d?y:d,p=v>p?v:p,_=y>_?y:_,v=a*n+u*i+h,y=s*n+l*i+c,f=v<f?v:f,d=y<d?y:d,p=v>p?v:p,_=y>_?y:_,this.minX=f,this.minY=d,this.maxX=p,this.maxY=_},Bounds.prototype.addVertices=function(e,t,r,n){for(var i=e.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,l=i.tx,h=i.ty,c=this.minX,f=this.minY,d=this.maxX,p=this.maxY,_=r;_<n;_+=2){var v=t[_],y=t[_+1],g=o*v+s*y+l,m=u*y+a*v+h;c=g<c?g:c,f=m<f?m:f,d=g>d?g:d,p=m>p?m:p}this.minX=c,this.minY=f,this.maxX=d,this.maxY=p},Bounds.prototype.addBounds=function(e){var t=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>i?e.maxY:i},Bounds.prototype.addBoundsMask=function(e,t){var r=e.minX>t.minX?e.minX:t.minX,n=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=i&&n<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=r<a?r:a,this.minY=n<s?n:s,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},Bounds.prototype.addBoundsArea=function(e,t){var r=e.minX>t.x?e.minX:t.x,n=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=i&&n<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=r<a?r:a,this.minY=n<s?n:s,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},Bounds}();t.default=i},function(e,t,r){var n,i,o;!function(r){var a=/iPhone/i,s=/iPod/i,u=/iPad/i,l=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,h=/Android/i,c=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,f=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,d=/Windows Phone/i,p=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,_=/BlackBerry/i,v=/BB10/i,y=/Opera Mini/i,g=/(CriOS|Chrome)(?=.*\bMobile\b)/i,m=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,b=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),x=function(e,t){return e.test(t)},T=function(e){var t=e||navigator.userAgent,r=t.split("[FBAN");if(void 0!==r[1]&&(t=r[0]),r=t.split("Twitter"),void 0!==r[1]&&(t=r[0]),this.apple={phone:x(a,t),ipod:x(s,t),tablet:!x(a,t)&&x(u,t),device:x(a,t)||x(s,t)||x(u,t)},this.amazon={phone:x(c,t),tablet:!x(c,t)&&x(f,t),device:x(c,t)||x(f,t)},this.android={phone:x(c,t)||x(l,t),tablet:!x(c,t)&&!x(l,t)&&(x(f,t)||x(h,t)),device:x(c,t)||x(f,t)||x(l,t)||x(h,t)},this.windows={phone:x(d,t),tablet:x(p,t),device:x(d,t)||x(p,t)},this.other={blackberry:x(_,t),blackberry10:x(v,t),opera:x(y,t),firefox:x(m,t),chrome:x(g,t),device:x(_,t)||x(v,t)||x(y,t)||x(m,t)||x(g,t)},this.seven_inch=x(b,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},w=function(){var e=new T;return e.Class=T,e};void 0!==e&&e.exports&&"undefined"==typeof window?e.exports=T:void 0!==e&&e.exports&&"undefined"!=typeof window?e.exports=w():(i=[],n=r.isMobile=w(),void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(this)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(4),i=function(){function TransformBase(){_classCallCheck(this,TransformBase),this.worldTransform=new n.Matrix,this.localTransform=new n.Matrix,this._worldID=0,this._parentID=0}return TransformBase.prototype.updateLocalTransform=function(){},TransformBase.prototype.updateTransform=function(e){var t=e.worldTransform,r=this.worldTransform,n=this.localTransform;r.a=n.a*t.a+n.b*t.c,r.b=n.a*t.b+n.b*t.d,r.c=n.c*t.a+n.d*t.c,r.d=n.c*t.b+n.d*t.d,r.tx=n.tx*t.a+n.ty*t.c+t.tx,r.ty=n.tx*t.b+n.ty*t.d+t.ty,this._worldID++},TransformBase}();t.default=i,i.prototype.updateWorldTransform=i.prototype.updateTransform,i.IDENTITY=new i},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(4),o=r(2),a=r(1),s=r(15),u=_interopRequireDefault(s),l=r(23),h=_interopRequireDefault(l),c=new i.Point,f=function(e){function Sprite(t){_classCallCheck(this,Sprite);var r=_possibleConstructorReturn(this,e.call(this));return r._anchor=new i.ObservablePoint(r._onAnchorUpdate,r),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=a.BLEND_MODES.NORMAL,r.shader=null,r.cachedTint=16777215,r.texture=t||u.default.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.pluginName="sprite",r}return _inherits(Sprite,e),Sprite.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._width&&(this.scale.x=(0,o.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,o.sign)(this.scale.y)*this._height/this._texture.orig.height)},Sprite.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},Sprite.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var e=this._texture,t=this.transform.worldTransform,r=t.a,n=t.b,i=t.c,o=t.d,a=t.tx,s=t.ty,u=this.vertexData,l=e.trim,h=e.orig,c=this._anchor,f=0,d=0,p=0,_=0;l?(d=l.x-c._x*h.width,f=d+l.width,_=l.y-c._y*h.height,p=_+l.height):(d=-c._x*h.width,f=d+h.width,_=-c._y*h.height,p=_+h.height),u[0]=r*d+i*_+a,u[1]=o*_+n*d+s,u[2]=r*f+i*_+a,u[3]=o*_+n*f+s,u[4]=r*f+i*p+a,u[5]=o*p+n*f+s,u[6]=r*d+i*p+a,u[7]=o*p+n*d+s}},Sprite.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,r=e.orig,n=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,l=i.tx,h=i.ty,c=-n._x*r.width,f=c+r.width,d=-n._y*r.height,p=d+r.height;t[0]=o*c+s*d+l,t[1]=u*d+a*c+h,t[2]=o*f+s*d+l,t[3]=u*d+a*f+h,t[4]=o*f+s*p+l,t[5]=u*p+a*f+h,t[6]=o*c+s*p+l,t[7]=u*p+a*c+h},Sprite.prototype._renderWebGL=function(e){this.calculateVertices(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},Sprite.prototype._renderCanvas=function(e){e.plugins[this.pluginName].render(this)},Sprite.prototype._calculateBounds=function(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},Sprite.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._x),t||(this._localBoundsRect||(this._localBoundsRect=new i.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},Sprite.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,c);var t=this._texture.orig.width,r=this._texture.orig.height,n=-t*this.anchor.x,i=0;return c.x>=n&&c.x<n+t&&(i=-r*this.anchor.y,c.y>=i&&c.y<i+r)},Sprite.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._anchor=null,"boolean"==typeof t?t:t&&t.texture){var r="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!r)}this._texture=null,this.shader=null},Sprite.from=function(e){return new Sprite(u.default.from(e))},Sprite.fromFrame=function(e){var t=o.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return new Sprite(t)},Sprite.fromImage=function(e,t,r){return new Sprite(u.default.fromImage(e,t,r))},n(Sprite,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var t=(0,o.sign)(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var t=(0,o.sign)(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"anchor",get:function(){return this._anchor},set:function(e){this._anchor.copy(e)}},{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}},{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}]),Sprite}(h.default);t.default=f},function(e,t,r){"use strict";"use restrict";function countTrailingZeros(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,(t|=r)|e>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return e-=e>>>1&1431655765,16843009*((e=(858993459&e)+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=countTrailingZeros,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var n=new Array(256);!function(e){for(var t=0;t<256;++t){var r=t,n=t,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;e[t]=n<<i&255}}(n),t.reverse=function(e){return n[255&e]<<24|n[e>>>8&255]<<16|n[e>>>16&255]<<8|n[e>>>24&255]},t.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},t.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),(e=65535&(e|e>>>16))<<16>>16},t.interleave3=function(e,t,r){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),e|r<<2},t.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),(e=1023&(e|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>countTrailingZeros(e)+1}},function(e,t,r){"use strict";t.__esModule=!0,t.Ticker=t.shared=void 0;var n=r(208),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=new i.default;o.autoStart=!0,o.destroy=function(){},t.shared=o,t.Ticker=i.default},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(98),i=_interopRequireDefault(n),o=r(15),a=_interopRequireDefault(o),s=function(e){function RenderTexture(t,r){_classCallCheck(this,RenderTexture);var n=null;if(!(t instanceof i.default)){var o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4];console.warn("Please use RenderTexture.create("+o+", "+a+") instead of the ctor directly."),n=arguments[0],r=null,t=new i.default(o,a,s,u)}var l=_possibleConstructorReturn(this,e.call(this,t,r));return l.legacyRenderer=n,l.valid=!0,l._updateUvs(),l}return _inherits(RenderTexture,e),RenderTexture.prototype.resize=function(e,t,r){this.valid=e>0&&t>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=t,r||this.baseTexture.resize(e,t),this._updateUvs()},RenderTexture.create=function(e,t,r,n){return new RenderTexture(new i.default(e,t,r,n))},RenderTexture}(a.default);t.default=s},function(e,t,r){"use strict";t.__esModule=!0;var n=r(2),i=r(100),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a={getTintedTexture:function(e,t){var r=e._texture;t=a.roundColor(t);var n="#"+("00000"+(0|t).toString(16)).substr(-6);r.tintCache=r.tintCache||{};var i=r.tintCache[n],o=void 0;if(i){if(i.tintId===r._updateID)return r.tintCache[n];o=r.tintCache[n]}else o=a.canvas||document.createElement("canvas");if(a.tintMethod(r,t,o),o.tintId=r._updateID,a.convertTintToImage){var s=new Image;s.src=o.toDataURL(),r.tintCache[n]=s}else r.tintCache[n]=o,a.canvas=null;return o},tintWithMultiply:function(e,t,r){var n=r.getContext("2d"),i=e._frame.clone(),o=e.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=Math.ceil(i.width),r.height=Math.ceil(i.height),n.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="multiply",n.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},tintWithOverlay:function(e,t,r){var n=r.getContext("2d"),i=e._frame.clone(),o=e.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=Math.ceil(i.width),r.height=Math.ceil(i.height),n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},tintWithPerPixel:function(e,t,r){var i=r.getContext("2d"),o=e._frame.clone(),a=e.baseTexture.resolution;o.x*=a,o.y*=a,o.width*=a,o.height*=a,r.width=Math.ceil(o.width),r.height=Math.ceil(o.height),i.globalCompositeOperation="copy",i.drawImage(e.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var s=(0,n.hex2rgb)(t),u=s[0],l=s[1],h=s[2],c=i.getImageData(0,0,o.width,o.height),f=c.data,d=0;d<f.length;d+=4)f[d+0]*=u,f[d+1]*=l,f[d+2]*=h;i.putImageData(c,0,0)},roundColor:function(e){var t=a.cacheStepsPerColorChannel,r=(0,n.hex2rgb)(e);return r[0]=Math.min(255,r[0]/t*t),r[1]=Math.min(255,r[1]/t*t),r[2]=Math.min(255,r[2]/t*t),(0,n.rgb2hex)(r)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,o.default)(),tintMethod:0};a.tintMethod=a.canUseMultiply?a.tintWithMultiply:a.tintWithPerPixel,t.default=a},function(e,t,r){"use strict";function createIndicesForQuads(e){for(var t=6*e,r=new Uint16Array(t),n=0,i=0;n<t;n+=6,i+=4)r[n+0]=i+0,r[n+1]=i+1,r[n+2]=i+2,r[n+3]=i+0,r[n+4]=i+2,r[n+5]=i+3;return r}t.__esModule=!0,t.default=createIndicesForQuads},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(52),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=new o.default,s=function(){function TextureTransform(e,t){_classCallCheck(this,TextureTransform),this._texture=e,this.mapCoord=new o.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===t?.5:t}return TextureTransform.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var r=this.mapCoord,n=0;n<e.length;n+=2){var i=e[n],o=e[n+1];t[n]=i*r.a+o*r.c+r.tx,t[n+1]=i*r.b+o*r.d+r.ty}return t},TextureTransform.prototype.update=function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._lastTextureID===t._updateID)return!1;this._lastTextureID=t._updateID;var r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=t.orig,i=t.trim;i&&(a.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(a));var o=t.baseTexture,s=this.uClampFrame,u=this.clampMargin/o.resolution,l=this.clampOffset;return s[0]=(t._frame.x+u+l)/o.width,s[1]=(t._frame.y+u+l)/o.height,s[2]=(t._frame.x+t._frame.width-u+l)/o.width,s[3]=(t._frame.y+t._frame.height-u+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,!0},n(TextureTransform,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture=e,this._lastTextureID=-1}}]),TextureTransform}();t.default=s},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _noop(){}function setExtMap(e,t,r){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e[t]=r)}function reqType(e){return e.toString().replace("object ","")}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(121),o=_interopRequireDefault(i),a=r(120),s=_interopRequireDefault(a),u=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),l=null,h=function(){function Resource(e,t,r){if(_classCallCheck(this,Resource),"string"!=typeof e||"string"!=typeof t)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(Resource.STATUS_FLAGS.DATA_URL,0===t.indexOf("data:")),this.name=e,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=Resource.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=_noop,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new s.default,this.onProgress=new s.default,this.onComplete=new s.default,this.onAfterMiddleware=new s.default}return Resource.setExtensionLoadType=function(e,t){setExtMap(Resource._loadTypeMap,e,t)},Resource.setExtensionXhrType=function(e,t){setExtMap(Resource._xhrTypeMap,e,t)},Resource.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(Resource.STATUS_FLAGS.COMPLETE,!0),this._setFlag(Resource.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},Resource.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=Resource.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},Resource.prototype.load=function(e){var t=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(t)},1));switch(e&&this.onComplete.once(e),this._setFlag(Resource.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case Resource.LOAD_TYPE.IMAGE:this.type=Resource.TYPE.IMAGE,this._loadElement("image");break;case Resource.LOAD_TYPE.AUDIO:this.type=Resource.TYPE.AUDIO,this._loadSourceElement("audio");break;case Resource.LOAD_TYPE.VIDEO:this.type=Resource.TYPE.VIDEO,this._loadSourceElement("video");break;case Resource.LOAD_TYPE.XHR:default:u&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},Resource.prototype._hasFlag=function(e){return!!(this._flags&e)},Resource.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},Resource.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},Resource.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(e),null===this.data)return void this.abort("Unsupported element: "+e);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=0;t<this.url.length;++t)this.data.appendChild(this._createSource(e,this.url[t]));else this.data.appendChild(this._createSource(e,this.url));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},Resource.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),this.xhrType===Resource.XHR_RESPONSE_TYPE.JSON||this.xhrType===Resource.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=Resource.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},Resource.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXdrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},Resource.prototype._createSource=function(e,t,r){r||(r=e+"/"+t.substr(t.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=t,n.type=r,n},Resource.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},Resource.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},Resource.prototype._xhrOnError=function(){var e=this.xhr;this.abort(reqType(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},Resource.prototype._xhrOnAbort=function(){this.abort(reqType(this.xhr)+" Request was aborted by the user.")},Resource.prototype._xdrOnTimeout=function(){this.abort(reqType(this.xhr)+" Request timed out.")},Resource.prototype._xhrOnLoad=function(){var e=this.xhr,t="",r=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(t=e.responseText),0===r&&t.length>0?r=200:1223===r&&(r=204),2!=(r/100|0))return void this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);if(this.xhrType===Resource.XHR_RESPONSE_TYPE.TEXT)this.data=t,this.type=Resource.TYPE.TEXT;else if(this.xhrType===Resource.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t),this.type=Resource.TYPE.JSON}catch(e){return void this.abort("Error trying to parse loaded json: "+e)}else if(this.xhrType===Resource.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(t,"text/xml")}else{var i=document.createElement("div");i.innerHTML=t,this.data=i}this.type=Resource.TYPE.XML}catch(e){return void this.abort("Error trying to parse loaded xml: "+e)}else this.data=e.response||t;this.complete()},Resource.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";t=t||window.location,l||(l=document.createElement("a")),l.href=e,e=(0,o.default)(l.href,{strictMode:!0});var r=!e.port&&""===t.port||e.port===t.port,n=e.protocol?e.protocol+":":"";return e.host===t.hostname&&r&&n===t.protocol?"":"anonymous"},Resource.prototype._determineXhrType=function(){return Resource._xhrTypeMap[this.extension]||Resource.XHR_RESPONSE_TYPE.TEXT},Resource.prototype._determineLoadType=function(){return Resource._loadTypeMap[this.extension]||Resource.LOAD_TYPE.XHR},Resource.prototype._getExtension=function(){var e=this.url,t="";if(this.isDataUrl){var r=e.indexOf("/");t=e.substring(r+1,e.indexOf(";",r))}else{var n=e.indexOf("?");-1!==n&&(e=e.substring(0,n)),t=e.substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},Resource.prototype._getMimeFromXhrType=function(e){switch(e){case Resource.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case Resource.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case Resource.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case Resource.XHR_RESPONSE_TYPE.JSON:return"application/json";case Resource.XHR_RESPONSE_TYPE.DEFAULT:case Resource.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},n(Resource,[{key:"isDataUrl",get:function(){return this._hasFlag(Resource.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(Resource.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(Resource.STATUS_FLAGS.LOADING)}}]),Resource}();t.default=h,h.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},h.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},h.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},h.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},h._loadTypeMap={gif:h.LOAD_TYPE.IMAGE,png:h.LOAD_TYPE.IMAGE,bmp:h.LOAD_TYPE.IMAGE,jpg:h.LOAD_TYPE.IMAGE,jpeg:h.LOAD_TYPE.IMAGE,tif:h.LOAD_TYPE.IMAGE,tiff:h.LOAD_TYPE.IMAGE,webp:h.LOAD_TYPE.IMAGE,tga:h.LOAD_TYPE.IMAGE,svg:h.LOAD_TYPE.IMAGE,"svg+xml":h.LOAD_TYPE.IMAGE,mp3:h.LOAD_TYPE.AUDIO,ogg:h.LOAD_TYPE.AUDIO,wav:h.LOAD_TYPE.AUDIO,mp4:h.LOAD_TYPE.VIDEO,webm:h.LOAD_TYPE.VIDEO},h._xhrTypeMap={xhtml:h.XHR_RESPONSE_TYPE.DOCUMENT,html:h.XHR_RESPONSE_TYPE.DOCUMENT,htm:h.XHR_RESPONSE_TYPE.DOCUMENT,xml:h.XHR_RESPONSE_TYPE.DOCUMENT,tmx:h.XHR_RESPONSE_TYPE.DOCUMENT,svg:h.XHR_RESPONSE_TYPE.DOCUMENT,tsx:h.XHR_RESPONSE_TYPE.DOCUMENT,gif:h.XHR_RESPONSE_TYPE.BLOB,png:h.XHR_RESPONSE_TYPE.BLOB,bmp:h.XHR_RESPONSE_TYPE.BLOB,jpg:h.XHR_RESPONSE_TYPE.BLOB,jpeg:h.XHR_RESPONSE_TYPE.BLOB,tif:h.XHR_RESPONSE_TYPE.BLOB,tiff:h.XHR_RESPONSE_TYPE.BLOB,webp:h.XHR_RESPONSE_TYPE.BLOB,tga:h.XHR_RESPONSE_TYPE.BLOB,json:h.XHR_RESPONSE_TYPE.JSON,text:h.XHR_RESPONSE_TYPE.TEXT,txt:h.XHR_RESPONSE_TYPE.TEXT,ttf:h.XHR_RESPONSE_TYPE.BUFFER,otf:h.XHR_RESPONSE_TYPE.BUFFER},h.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function findMultipleBaseTextures(e,t){var r=!1;if(e&&e._textures&&e._textures.length)for(var n=0;n<e._textures.length;n++)if(e._textures[n]instanceof i.Texture){var o=e._textures[n].baseTexture;-1===t.indexOf(o)&&(t.push(o),r=!0)}return r}function findBaseTexture(e,t){return e instanceof i.BaseTexture&&(-1===t.indexOf(e)&&t.push(e),!0)}function findTexture(e,t){if(e._texture&&e._texture instanceof i.Texture){var r=e._texture.baseTexture;return-1===t.indexOf(r)&&t.push(r),!0}return!1}function drawText(e,t){return t instanceof i.Text&&(t.updateText(!0),!0)}function calculateTextStyle(e,t){if(t instanceof i.TextStyle){var r=t.toFontString();return i.TextMetrics.measureFont(r),!0}return!1}function findText(e,t){if(e instanceof i.Text){-1===t.indexOf(e.style)&&t.push(e.style),-1===t.indexOf(e)&&t.push(e);var r=e._texture.baseTexture;return-1===t.indexOf(r)&&t.push(r),!0}return!1}function findTextStyle(e,t){return e instanceof i.TextStyle&&(-1===t.indexOf(e)&&t.push(e),!0)}t.__esModule=!0;var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),o=r(127),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=i.ticker.shared;i.settings.UPLOADS_PER_FRAME=4;var u=function(){function BasePrepare(e){var t=this;_classCallCheck(this,BasePrepare),this.limiter=new a.default(i.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}return BasePrepare.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,s.addOnce(this.tick,this,i.UPDATE_PRIORITY.UTILITY))):t&&t()},BasePrepare.prototype.tick=function(){setTimeout(this.delayedTick,0)},BasePrepare.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)s.addOnce(this.tick,this,i.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var a=0,u=o.length;a<u;a++)o[a]()}},BasePrepare.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},BasePrepare.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},BasePrepare.prototype.add=function(e){for(var t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof i.Container)for(var n=e.children.length-1;n>=0;n--)this.add(e.children[n]);return this},BasePrepare.prototype.destroy=function(){this.ticking&&s.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},BasePrepare}();t.default=u},function(e,t,r){var n=r(9),i=r(10),o=r(132)(!1),a=r(39)("IE_PROTO");e.exports=function(e,t){var r,s=i(e),u=0,l=[];for(r in s)r!=a&&n(s,r)&&l.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~o(l,r)||l.push(r));return l}},function(e,t,r){var n=r(69);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var n=r(11),i=r(6),o=r(18);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*o(function(){r(1)}),"Object",a)}},function(e,t,r){var n=r(135);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){e.exports=!r(13)&&!r(18)(function(){return 7!=Object.defineProperty(r(73)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(22),i=r(8).document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,r){var n=r(9),i=r(29),o=r(39)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(149),i=_interopRequireDefault(n),o=r(160),a=_interopRequireDefault(o),s="function"==typeof a.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":typeof e};t.default="function"==typeof a.default&&"symbol"===s(i.default)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":void 0===e?"undefined":s(e)}},function(e,t,r){"use strict";var n=r(44),i=r(11),o=r(77),a=r(17),s=r(9),u=r(45),l=r(153),h=r(47),c=r(74),f=r(19)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,r,_,v,y,g){l(r,t,_);var m,b,x,T=function(e){if(!d&&e in R)return R[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},w=t+" Iterator",E="values"==v,C=!1,R=e.prototype,S=R[f]||R["@@iterator"]||v&&R[v],P=S||T(v),O=v?E?T("entries"):P:void 0,M="Array"==t?R.entries||S:S;if(M&&(x=c(M.call(new e)))!==Object.prototype&&(h(x,w,!0),n||s(x,f)||a(x,f,p)),E&&S&&"values"!==S.name&&(C=!0,P=function(){return S.call(this)}),n&&!g||!d&&!C&&R[f]||a(R,f,P),u[t]=P,u[w]=p,v)if(m={values:E?P:T("values"),keys:y?P:T("keys"),entries:O},g)for(b in m)b in R||o(R,b,m[b]);else i(i.P+i.F*(d||C),t,m);return m}},function(e,t,r){e.exports=r(17)},function(e,t,r){var n=r(67),i=r(41).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){var n=r(32),i=r(31),o=r(10),a=r(42),s=r(9),u=r(72),l=Object.getOwnPropertyDescriptor;t.f=r(13)?l:function(e,t){if(e=o(e),t=a(t,!0),u)try{return l(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function(){function ObservablePoint(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;_classCallCheck(this,ObservablePoint),this._x=r,this._y=n,this.cb=e,this.scope=t}return ObservablePoint.prototype.set=function(e,t){var r=e||0,n=t||(0!==t?r:0);this._x===r&&this._y===n||(this._x=r,this._y=n,this.cb.call(this.scope))},ObservablePoint.prototype.copy=function(e){this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope))},n(ObservablePoint,[{key:"x",get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}]),ObservablePoint}();t.default=i},function(e,t,r){"use strict";function signum(e){return e<0?-1:e>0?1:0}t.__esModule=!0;var n=r(52),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],a=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],s=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],u=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],l=[],h=[];!function(){for(var e=0;e<16;e++){var t=[];h.push(t);for(var r=0;r<16;r++)for(var n=signum(o[e]*o[r]+s[e]*a[r]),c=signum(a[e]*o[r]+u[e]*a[r]),f=signum(o[e]*s[r]+s[e]*u[r]),d=signum(a[e]*s[r]+u[e]*u[r]),p=0;p<16;p++)if(o[p]===n&&a[p]===c&&s[p]===f&&u[p]===d){t.push(p);break}}for(var _=0;_<16;_++){var v=new i.default;v.set(o[_],a[_],s[_],u[_],0,0),l.push(v)}}();var c={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(e){return o[e]},uY:function(e){return a[e]},vX:function(e){return s[e]},vY:function(e){return u[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return h[e][t]},sub:function(e,t){return h[e][c.inv(t)]},rotate180:function(e){return 4^e},isSwapWidthHeight:function(e){return 2==(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?t>=0?c.S:c.N:2*Math.abs(t)<=Math.abs(e)?e>0?c.E:c.W:t>0?e>0?c.SE:c.SW:e>0?c.NE:c.NW},matrixAppendRotationInv:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=l[c.inv(t)];i.tx=r,i.ty=n,e.append(i)}};t.default=c},function(e,t){var r=function(e,t,r){var n;if(r){var i=r.tempAttribState,o=r.attribState;for(n=0;n<i.length;n++)i[n]=!1;for(n=0;n<t.length;n++)i[t[n].attribute.location]=!0;for(n=0;n<o.length;n++)o[n]!==i[n]&&(o[n]=i[n],r.attribState[n]?e.enableVertexAttribArray(n):e.disableVertexAttribArray(n))}else for(n=0;n<t.length;n++){var a=t[n];e.enableVertexAttribArray(a.attribute.location)}};e.exports=r},function(e,t){var r=function(e,t,r,n,i){this.gl=e,this.texture=e.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=t||-1,this.height=r||-1,this.format=n||e.RGBA,this.type=i||e.UNSIGNED_BYTE};r.prototype.upload=function(e){this.bind();var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var r=e.videoWidth||e.width,n=e.videoHeight||e.height;n!==this.height||r!==this.width?t.texImage2D(t.TEXTURE_2D,0,this.format,this.format,this.type,e):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.format,this.type,e),this.width=r,this.height=n};var n=!1;r.prototype.uploadData=function(e,t,r){this.bind();var i=this.gl;if(e instanceof Float32Array){if(!n){if(!i.getExtension("OES_texture_float"))throw new Error("floating point textures not available");n=!0}this.type=i.FLOAT}else this.type=this.type||i.UNSIGNED_BYTE;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t!==this.width||r!==this.height?i.texImage2D(i.TEXTURE_2D,0,this.format,t,r,0,this.format,this.type,e||null):i.texSubImage2D(i.TEXTURE_2D,0,0,0,t,r,this.format,this.type,e||null),this.width=t,this.height=r},r.prototype.bind=function(e){var t=this.gl;void 0!==e&&t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.texture)},r.prototype.unbind=function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,null)},r.prototype.minFilter=function(e){var t=this.gl;this.bind(),this.mipmap?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR:t.NEAREST)},r.prototype.magFilter=function(e){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e?t.LINEAR:t.NEAREST)},r.prototype.enableMipmap=function(){var e=this.gl;this.bind(),this.mipmap=!0,e.generateMipmap(e.TEXTURE_2D)},r.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},r.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},r.prototype.enableWrapClamp=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)},r.prototype.enableWrapRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)},r.prototype.enableWrapMirrorRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT)},r.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},r.fromSource=function(e,t,n){var i=new r(e);return i.premultiplyAlpha=n||!1,i.upload(t),i},r.fromData=function(e,t,n,i){var o=new r(e);return o.uploadData(t,n,i),o},e.exports=r},function(e,t){var r=function(e,t,r,i){var o=n(e,e.VERTEX_SHADER,t),a=n(e,e.FRAGMENT_SHADER,r),s=e.createProgram();if(e.attachShader(s,o),e.attachShader(s,a),i)for(var u in i)e.bindAttribLocation(s,i[u],u);return e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",e.getProgramParameter(s,e.VALIDATE_STATUS)),console.error("gl.getError()",e.getError()),""!==e.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(s)),e.deleteProgram(s),s=null),e.deleteShader(o),e.deleteShader(a),s},n=function(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(console.log(e.getShaderInfoLog(n)),null)};e.exports=r},function(e,t,r){var n=r(54),i=r(86),o=function(e,t){for(var r={},o=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<o;s++){var u=e.getActiveAttrib(t,s),l=n(e,u.type);r[u.name]={type:l,size:i(l),location:e.getAttribLocation(t,u.name),pointer:a}}return r},a=function(e,t,r,n){gl.vertexAttribPointer(this.location,this.size,e||gl.FLOAT,t||!1,r||0,n||0)};e.exports=o},function(e,t){var r=function(e){return n[e]},n={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=r},function(e,t,r){var n=r(54),i=r(88),o=function(e,t){for(var r={},o=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),a=0;a<o;a++){var s=e.getActiveUniform(t,a),u=s.name.replace(/\[.*?\]/,""),l=n(e,s.type);r[u]={type:l,size:s.size,location:e.getUniformLocation(t,u),value:i(l,s.size)}}return r};e.exports=o},function(e,t){var r=function(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return n(2*t);case"bvec3":return n(3*t);case"bvec4":return n(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},n=function(e){for(var t=new Array(e),r=0;r<t.length;r++)t[r]=!1;return t};e.exports=r},function(e,t){var r=function(e,t){return"precision"!==e.substring(0,9)?"precision "+t+" float;\n"+e:e};e.exports=r},function(e,t){var r=function(e,t){var r={data:{}};r.gl=e;for(var a=Object.keys(t),s=0;s<a.length;s++){var u=a[s],l=u.split("."),h=l[l.length-1],c=o(l,r),f=t[u];c.data[h]=f,c.gl=e,Object.defineProperty(c,h,{get:n(h),set:i(h,f)})}return r},n=function(e){var t=a.replace("%%",e);return new Function(t)},i=function(e,t){var r,n=s.replace(/%%/g,e);return r=1===t.size?u[t.type]:l[t.type],r&&(n+="\nthis.gl."+r+";"),new Function("value",n)},o=function(e,t){for(var r=t,n=0;n<e.length-1;n++){var i=r[e[n]]||{data:{}};r[e[n]]=i,r=i}return r},a=["return this.data.%%.value;"].join("\n"),s=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),u={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},l={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};e.exports=r},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(14),o=_interopRequireDefault(i),a=r(1),s=r(3),u=_interopRequireDefault(s),l=r(92),h=_interopRequireDefault(l),c=r(93),f=_interopRequireDefault(c),d=r(55),p=_interopRequireDefault(d),_=r(4),v=function(e){function DisplayObject(){_classCallCheck(this,DisplayObject);var t=_possibleConstructorReturn(this,e.call(this)),r=u.default.TRANSFORM_MODE===a.TRANSFORM_MODE.STATIC?h.default:f.default;return t.tempDisplayObjectParent=null,t.transform=new r,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t.filterArea=null,t._filters=null,t._enabledFilters=null,t._bounds=new p.default,t._boundsID=0,t._lastBoundsID=-1,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t}return _inherits(DisplayObject,e),DisplayObject.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},DisplayObject.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},DisplayObject.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),t||(this._boundsRect||(this._boundsRect=new _.Rectangle),t=this._boundsRect),this._bounds.getRectangle(t)},DisplayObject.prototype.getLocalBounds=function(e){var t=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,e||(this._localBoundsRect||(this._localBoundsRect=new _.Rectangle),e=this._localBoundsRect);var n=this.getBounds(!1,e);return this.parent=r,this.transform=t,n},DisplayObject.prototype.toGlobal=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},DisplayObject.prototype.toLocal=function(e,t,r,n){return t&&(e=t.toGlobal(e,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)},DisplayObject.prototype.renderWebGL=function(e){},DisplayObject.prototype.renderCanvas=function(e){},DisplayObject.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},DisplayObject.prototype.setTransform=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=e,this.position.y=t,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=u,this},DisplayObject.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},n(DisplayObject,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new DisplayObject),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(e){this.transform.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.transform.position.y=e}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(e){this.transform.position.copy(e)}},{key:"scale",get:function(){return this.transform.scale},set:function(e){this.transform.scale.copy(e)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copy(e)}},{key:"skew",get:function(){return this.transform.skew},set:function(e){this.transform.skew.copy(e)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e}},{key:"worldVisible",get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}},{key:"mask",get:function(){return this._mask},set:function(e){this._mask&&(this._mask.renderable=!0),this._mask=e,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(e){this._filters=e&&e.slice()}}]),DisplayObject}(o.default);t.default=v,v.prototype.displayObjectUpdateTransform=v.prototype.updateTransform},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(4),o=r(57),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(e){function TransformStatic(){_classCallCheck(this,TransformStatic);var t=_possibleConstructorReturn(this,e.call(this));return t.position=new i.ObservablePoint(t.onChange,t,0,0),t.scale=new i.ObservablePoint(t.onChange,t,1,1),t.pivot=new i.ObservablePoint(t.onChange,t,0,0),t.skew=new i.ObservablePoint(t.updateSkew,t,0,0),t._rotation=0,t._cx=1,t._sx=0,t._cy=0,t._sy=1,t._localID=0,t._currentLocalID=0,t}return _inherits(TransformStatic,e),TransformStatic.prototype.onChange=function(){this._localID++},TransformStatic.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},TransformStatic.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},TransformStatic.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var r=e.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}},TransformStatic.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},n(TransformStatic,[{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),TransformStatic}(a.default);t.default=s},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(4),o=r(57),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(e){function Transform(){_classCallCheck(this,Transform);var t=_possibleConstructorReturn(this,e.call(this));return t.position=new i.Point(0,0),t.scale=new i.Point(1,1),t.skew=new i.ObservablePoint(t.updateSkew,t,0,0),t.pivot=new i.Point(0,0),t._rotation=0,t._cx=1,t._sx=0,t._cy=0,t._sy=1,t}return _inherits(Transform,e),Transform.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},Transform.prototype.updateLocalTransform=function(){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d)},Transform.prototype.updateTransform=function(e){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d);var r=e.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._worldID++},Transform.prototype.setFromMatrix=function(e){e.decompose(this)},n(Transform,[{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),Transform}(a.default);t.default=s},function(e,t,r){"use strict";function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function urlParse(e,t,r){if(e&&i.isObject(e)&&e instanceof Url)return e;var n=new Url;return n.parse(e,t,r),n}function urlFormat(e){return i.isString(e)&&(e=urlParse(e)),e instanceof Url?e.format():Url.prototype.format.call(e)}function urlResolve(e,t){return urlParse(e,!1,!0).resolve(t)}function urlResolveObject(e,t){return e?urlParse(e,!1,!0).resolveObject(t):t}var n=r(202),i=r(204);t.parse=urlParse,t.resolve=urlResolve,t.resolveObject=urlResolveObject,t.format=urlFormat,t.Url=Url;var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["<",">",'"',"`"," ","\r","\n","\t"],l=["{","}","|","\\","^","`"].concat(u),h=["'"].concat(l),c=["%","/","?",";","#"].concat(h),f=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=r(205);Url.prototype.parse=function(e,t,r){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),u=-1!==a&&a<e.indexOf("#")?"?":"#",l=e.split(u),m=/\\/g;l[0]=l[0].replace(m,"/"),e=l.join(u);var b=e;if(b=b.trim(),!r&&1===e.split("#").length){var x=s.exec(b);if(x)return this.path=b,this.href=b,this.pathname=x[1],x[2]?(this.search=x[2],this.query=t?g.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var T=o.exec(b);if(T){T=T[0];var w=T.toLowerCase();this.protocol=w,b=b.substr(T.length)}if(r||T||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===b.substr(0,2);!E||T&&v[T]||(b=b.substr(2),this.slashes=!0)}if(!v[T]&&(E||T&&!y[T])){for(var C=-1,R=0;R<f.length;R++){var S=b.indexOf(f[R]);-1!==S&&(-1===C||S<C)&&(C=S)}var P,O;O=-1===C?b.lastIndexOf("@"):b.lastIndexOf("@",C),-1!==O&&(P=b.slice(0,O),b=b.slice(O+1),this.auth=decodeURIComponent(P)),C=-1;for(var R=0;R<c.length;R++){var S=b.indexOf(c[R]);-1!==S&&(-1===C||S<C)&&(C=S)}-1===C&&(C=b.length),this.host=b.slice(0,C),b=b.slice(C),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var D=this.hostname.split(/\./),R=0,A=D.length;R<A;R++){var I=D[R];if(I&&!I.match(d)){for(var L="",k=0,F=I.length;k<F;k++)I.charCodeAt(k)>127?L+="x":L+=I[k];if(!L.match(d)){var N=D.slice(0,R),B=D.slice(R+1),j=I.match(p);j&&(N.push(j[1]),B.unshift(j[2])),B.length&&(b="/"+B.join(".")+b),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=n.toASCII(this.hostname));var U=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+U,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!_[w])for(var R=0,A=h.length;R<A;R++){var G=h[R];if(-1!==b.indexOf(G)){var X=encodeURIComponent(G);X===G&&(X=escape(G)),b=b.split(G).join(X)}}var W=b.indexOf("#");-1!==W&&(this.hash=b.substr(W),b=b.slice(0,W));var H=b.indexOf("?");if(-1!==H?(this.search=b.substr(H),this.query=b.substr(H+1),t&&(this.query=g.parse(this.query)),b=b.slice(0,H)):t&&(this.search="",this.query={}),b&&(this.pathname=b),y[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",V=this.search||"";this.path=U+V}return this.href=this.format(),this},Url.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=g.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+o+r+s+n},Url.prototype.resolve=function(e){return this.resolveObject(urlParse(e,!1,!0)).format()},Url.prototype.resolveObject=function(e){if(i.isString(e)){var t=new Url;t.parse(e,!1,!0),e=t}for(var r=new Url,n=Object.keys(this),o=0;o<n.length;o++){var a=n[o];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var l=s[u];"protocol"!==l&&(r[l]=e[l])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!y[e.protocol]){for(var h=Object.keys(e),c=0;c<h.length;c++){var f=h[c];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||v[e.protocol])r.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var p=r.pathname||"",_=r.search||"";r.path=p+_}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var g=r.pathname&&"/"===r.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=m||g||r.host&&e.pathname,x=b,T=r.pathname&&r.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],w=r.protocol&&!y[r.protocol];if(w&&(r.hostname="",r.port=null,r.host&&(""===T[0]?T[0]=r.host:T.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),b=b&&(""===d[0]||""===T[0])),m)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,T=d;else if(d.length)T||(T=[]),T.pop(),T=T.concat(d),r.search=e.search,r.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(w){r.hostname=r.host=T.shift();var E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");E&&(r.auth=E.shift(),r.host=r.hostname=E.shift())}return r.search=e.search,r.query=e.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!T.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var C=T.slice(-1)[0],R=(r.host||e.host||T.length>1)&&("."===C||".."===C)||""===C,S=0,P=T.length;P>=0;P--)C=T[P],"."===C?T.splice(P,1):".."===C?(T.splice(P,1),S++):S&&(T.splice(P,1),S--);if(!b&&!x)for(;S--;S)T.unshift("..");!b||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),R&&"/"!==T.join("/").substr(-1)&&T.push("");var O=""===T[0]||T[0]&&"/"===T[0].charAt(0);if(w){r.hostname=r.host=O?"":T.length?T.shift():"";var E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");E&&(r.auth=E.shift(),r.host=r.hostname=E.shift())}return b=b||r.host&&T.length,b&&!O&&T.unshift(""),T.length?r.pathname=T.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},Url.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function createSource(e,t){t||(t="video/"+e.substr(e.lastIndexOf(".")+1));var r=document.createElement("source");return r.src=e,r.type=t,r}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(20),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=r(2),s=r(60),u=r(1),l=function(e){function VideoBaseTexture(t,r){if(_classCallCheck(this,VideoBaseTexture),!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0);var n=_possibleConstructorReturn(this,e.call(this,t,r));return n.width=t.videoWidth,n.height=t.videoHeight,n._autoUpdate=!0,n._isAutoUpdating=!1,n.autoPlay=!0,n.update=n.update.bind(n),n._onCanPlay=n._onCanPlay.bind(n),t.addEventListener("play",n._onPlayStart.bind(n)),t.addEventListener("pause",n._onPlayStop.bind(n)),n.hasLoaded=!1,n.__loaded=!1,n._isSourceReady()?n._onCanPlay():(t.addEventListener("canplay",n._onCanPlay),t.addEventListener("canplaythrough",n._onCanPlay)),n}return _inherits(VideoBaseTexture,e),VideoBaseTexture.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&!1===e.paused&&!1===e.ended&&e.readyState>2},VideoBaseTexture.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},VideoBaseTexture.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(s.shared.add(this.update,this,u.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},VideoBaseTexture.prototype._onPlayStop=function(){this._isAutoUpdating&&(s.shared.remove(this.update,this),this._isAutoUpdating=!1)},VideoBaseTexture.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},VideoBaseTexture.prototype.destroy=function(){this._isAutoUpdating&&s.shared.remove(this.update,this),this.source&&this.source._pixiId&&(o.default.removeFromCache(this.source._pixiId),delete this.source._pixiId),e.prototype.destroy.call(this)},VideoBaseTexture.fromVideo=function(e,t){e._pixiId||(e._pixiId="video_"+(0,a.uid)());var r=a.BaseTextureCache[e._pixiId];return r||(r=new VideoBaseTexture(e,t),o.default.addToCache(r,e._pixiId)),r},VideoBaseTexture.fromUrl=function(e,t){var r=document.createElement("video");if(r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),Array.isArray(e))for(var n=0;n<e.length;++n)r.appendChild(createSource(e[n].src||e[n],e[n].mime));else r.appendChild(createSource(e.src||e,e.mime));return r.load(),VideoBaseTexture.fromVideo(r,t)},n(VideoBaseTexture,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isAutoUpdating?(s.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(s.shared.add(this.update,this,u.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),VideoBaseTexture}(o.default);t.default=l,l.fromUrls=l.fromUrl},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(81),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=function(){function TextureUvs(){_classCallCheck(this,TextureUvs),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return TextureUvs.prototype.set=function(e,t,r){var n=t.width,o=t.height;if(r){var a=e.width/2/n,s=e.height/2/o,u=e.x/n+a,l=e.y/o+s;r=i.default.add(r,i.default.NW),this.x0=u+a*i.default.uX(r),this.y0=l+s*i.default.uY(r),r=i.default.add(r,2),this.x1=u+a*i.default.uX(r),this.y1=l+s*i.default.uY(r),r=i.default.add(r,2),this.x2=u+a*i.default.uX(r),this.y2=l+s*i.default.uY(r),r=i.default.add(r,2),this.x3=u+a*i.default.uX(r),this.y3=l+s*i.default.uY(r)}else this.x0=e.x/n,this.y0=e.y/o,this.x1=(e.x+e.width)/n,this.y1=e.y/o,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/o,this.x3=e.x/n,this.y3=(e.y+e.height)/o;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},TextureUvs}();t.default=o},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(2),o=r(4),a=r(1),s=r(3),u=_interopRequireDefault(s),l=r(23),h=_interopRequireDefault(l),c=r(61),f=_interopRequireDefault(c),d=r(14),p=_interopRequireDefault(d),_=new o.Matrix,v=function(e){function SystemRenderer(t,r,n,s){_classCallCheck(this,SystemRenderer);var l=_possibleConstructorReturn(this,e.call(this));return(0,i.sayHello)(t),"number"==typeof r&&(r=Object.assign({width:r,height:n||u.default.RENDER_OPTIONS.height},s)),r=Object.assign({},u.default.RENDER_OPTIONS,r),l.options=r,l.type=a.RENDERER_TYPE.UNKNOWN,l.screen=new o.Rectangle(0,0,r.width,r.height),l.view=r.view||document.createElement("canvas"),l.resolution=r.resolution||u.default.RESOLUTION,l.transparent=r.transparent,l.autoResize=r.autoResize||!1,l.blendModes=null,l.preserveDrawingBuffer=r.preserveDrawingBuffer,l.clearBeforeRender=r.clearBeforeRender,l.roundPixels=r.roundPixels,l._backgroundColor=0,l._backgroundColorRgba=[0,0,0,0],l._backgroundColorString="#000000",l.backgroundColor=r.backgroundColor||l._backgroundColor,l._tempDisplayObjectParent=new h.default,l._lastObjectRendered=l._tempDisplayObjectParent,l}return _inherits(SystemRenderer,e),SystemRenderer.prototype.resize=function(e,t){this.screen.width=e,this.screen.height=t,this.view.width=e*this.resolution,this.view.height=t*this.resolution,this.autoResize&&(this.view.style.width=e+"px",this.view.style.height=t+"px")},SystemRenderer.prototype.generateTexture=function(e,t,r){var n=e.getLocalBounds(),i=f.default.create(0|n.width,0|n.height,t,r);return _.tx=-n.x,_.ty=-n.y,this.render(e,i,!1,_,!0),i},SystemRenderer.prototype.destroy=function(e){e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=a.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},n(SystemRenderer,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=(0,i.hex2string)(e),(0,i.hex2rgb)(e,this._backgroundColorRgba)}}]),SystemRenderer}(p.default);t.default=v},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(20),i=_interopRequireDefault(n),o=r(3),a=_interopRequireDefault(o),s=function(e){function BaseRenderTexture(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments[2],i=arguments[3];_classCallCheck(this,BaseRenderTexture);var o=_possibleConstructorReturn(this,e.call(this,null,n));return o.resolution=i||a.default.RESOLUTION,o.width=t,o.height=r,o.realWidth=o.width*o.resolution,o.realHeight=o.height*o.resolution,o.scaleMode=void 0!==n?n:a.default.SCALE_MODE,o.hasLoaded=!0,o._glRenderTargets={},o._canvasRenderTarget=null,o.valid=!1,o}return _inherits(BaseRenderTexture,e),BaseRenderTexture.prototype.resize=function(e,t){e===this.width&&t===this.height||(this.valid=e>0&&t>0,this.width=e,this.height=t,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},BaseRenderTexture.prototype.destroy=function(){e.prototype.destroy.call(this,!0),this.renderer=null},BaseRenderTexture}(i.default);t.default=s},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(3),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(){function CanvasRenderTarget(e,t,r){_classCallCheck(this,CanvasRenderTarget),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||o.default.RESOLUTION,this.resize(e,t)}return CanvasRenderTarget.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},CanvasRenderTarget.prototype.resize=function(e,t){this.canvas.width=e*this.resolution,this.canvas.height=t*this.resolution},CanvasRenderTarget.prototype.destroy=function(){this.context=null,this.canvas=null},n(CanvasRenderTarget,[{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),CanvasRenderTarget}();t.default=a},function(e,t,r){"use strict";function createColoredCanvas(e){var t=document.createElement("canvas");t.width=6,t.height=1;var r=t.getContext("2d");return r.fillStyle=e,r.fillRect(0,0,6,1),t}function canUseNewCanvasBlendModes(){if("undefined"==typeof document)return!1;var e=createColoredCanvas("#ff00ff"),t=createColoredCanvas("#ffff00"),r=document.createElement("canvas");r.width=6,r.height=1;var n=r.getContext("2d");n.globalCompositeOperation="multiply",n.drawImage(e,0,0),n.drawImage(t,2,0);var i=n.getImageData(2,0,1,1);if(!i)return!1;var o=i.data;return 255===o[0]&&0===o[1]&&0===o[2]}t.__esModule=!0,t.default=canUseNewCanvasBlendModes},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(102),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r(4),a=(r(7),function(e){function SpriteMaskFilter(t){_classCallCheck(this,SpriteMaskFilter);var r=new o.Matrix,n=_possibleConstructorReturn(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return t.renderable=!1,n.maskSprite=t,n.maskMatrix=r,n}return _inherits(SpriteMaskFilter,e),SpriteMaskFilter.prototype.apply=function(e,t,r){var n=this.maskSprite;this.uniforms.mask=n._texture,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,n),this.uniforms.alpha=n.worldAlpha,e.applyFilter(this,t,r)},SpriteMaskFilter}(i.default));t.default=a},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(215),o=_interopRequireDefault(i),a=r(2),s=r(1),u=r(3),l=_interopRequireDefault(u),h={},c=function(){function Filter(e,t,r){_classCallCheck(this,Filter),this.vertexSrc=e||Filter.defaultVertexSrc,this.fragmentSrc=t||Filter.defaultFragmentSrc,this.blendMode=s.BLEND_MODES.NORMAL,this.uniformData=r||(0,o.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var n in this.uniformData)this.uniforms[n]=this.uniformData[n].value;this.glShaders={},h[this.vertexSrc+this.fragmentSrc]||(h[this.vertexSrc+this.fragmentSrc]=(0,a.uid)()),this.glShaderKey=h[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=l.default.RESOLUTION,this.enabled=!0,this.autoFit=!0}return Filter.prototype.apply=function(e,t,r,n,i){e.applyFilter(this,t,r,n)},n(Filter,null,[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),Filter}();t.default=c},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(5),i=_interopRequireDefault(n),o=r(63),a=_interopRequireDefault(o),s=function(){function Quad(e,t){_classCallCheck(this,Quad),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var r=0;r<4;r++)this.interleaved[4*r]=this.vertices[2*r],this.interleaved[4*r+1]=this.vertices[2*r+1],this.interleaved[4*r+2]=this.uvs[2*r],this.interleaved[4*r+3]=this.uvs[2*r+1];this.indices=(0,a.default)(1),this.vertexBuffer=i.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=i.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new i.default.VertexArrayObject(e,t)}return Quad.prototype.initVao=function(e){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,e.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,e.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},Quad.prototype.map=function(e,t){var r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+t.width/e.width,this.uvs[3]=n,this.uvs[4]=r+t.width/e.width,this.uvs[5]=n+t.height/e.height,this.uvs[6]=r,this.uvs[7]=n+t.height/e.height,r=t.x,n=t.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+t.width,this.vertices[3]=n,this.vertices[4]=r+t.width,this.vertices[5]=n+t.height,this.vertices[6]=r,this.vertices[7]=n+t.height,this},Quad.prototype.upload=function(){for(var e=0;e<4;e++)this.interleaved[4*e]=this.vertices[2*e],this.interleaved[4*e+1]=this.vertices[2*e+1],this.interleaved[4*e+2]=this.uvs[2*e],this.interleaved[4*e+3]=this.uvs[2*e+1];return this.vertexBuffer.upload(this.interleaved),this},Quad.prototype.destroy=function(){var e=this.gl;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)},Quad}();t.default=s},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function getSingleColor(e){return"number"==typeof e?(0,o.hex2string)(e):("string"==typeof e&&0===e.indexOf("0x")&&(e=e.replace("0x","#")),e)}function getColor(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=getSingleColor(e[t]);return e}return getSingleColor(e)}function areArraysEqual(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(1),o=r(2),a={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:i.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100},s=function(){function TextStyle(e){_classCallCheck(this,TextStyle),this.styleID=0,Object.assign(this,a,e)}return TextStyle.prototype.clone=function(){var e={};for(var t in a)e[t]=this[t];return new TextStyle(e)},TextStyle.prototype.reset=function(){Object.assign(this,a)},TextStyle.prototype.toFontString=function(){var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var r=t.length-1;r>=0;r--){var n=t[r].trim();/([\"\'])[^\'\"]+\1/.test(n)||(n='"'+n+'"'),t[r]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},n(TextStyle,[{key:"align",get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(e){var t=getColor(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(e){var t=getColor(e);this._fill!==t&&(this._fill=t,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(e){areArraysEqual(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(e){var t=getColor(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}}]),TextStyle}();t.default=s},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function TextMetrics(e,t,r,n,i,o,a,s,u){_classCallCheck(this,TextMetrics),this.text=e,this.style=t,this.width=r,this.height=n,this.lines=i,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=s,this.fontProperties=u}return TextMetrics.measureText=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:TextMetrics._canvas;r=r||t.wordWrap;var i=t.toFontString(),o=TextMetrics.measureFont(i),a=n.getContext("2d");a.font=i;for(var s=r?TextMetrics.wordWrap(e,t,n):e,u=s.split(/(?:\r\n|\r|\n)/),l=new Array(u.length),h=0,c=0;c<u.length;c++){var f=a.measureText(u[c]).width+(u[c].length-1)*t.letterSpacing;l[c]=f,h=Math.max(h,f)}var d=h+t.strokeThickness;t.dropShadow&&(d+=t.dropShadowDistance);var p=t.lineHeight||o.fontSize+t.strokeThickness,_=Math.max(p,o.fontSize+t.strokeThickness)+(u.length-1)*p;return t.dropShadow&&(_+=t.dropShadowDistance),new TextMetrics(e,t,d,_,u,l,p,h,o)},TextMetrics.wordWrap=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:TextMetrics._canvas,n=r.getContext("2d"),i="",o=e.split("\n"),a=t.wordWrapWidth,s={},u=0;u<o.length;u++){for(var l=a,h=o[u].split(" "),c=0;c<h.length;c++){var f=n.measureText(h[c]).width;if(t.breakWords&&f>a)for(var d=h[c].split(""),p=0;p<d.length;p++){var _=d[p],v=s[_];void 0===v&&(v=n.measureText(_).width,s[_]=v),v>l?(i+="\n"+_,l=a-v):(0===p&&(i+=" "),i+=_,l-=v)}else{var y=f+n.measureText(" ").width;0===c||y>l?(c>0&&(i+="\n"),i+=h[c],l=a-f):(l-=y,i+=" "+h[c])}}u<o.length-1&&(i+="\n")}return i},TextMetrics.measureFont=function(e){if(TextMetrics._fonts[e])return TextMetrics._fonts[e];var t={},r=TextMetrics._canvas,n=TextMetrics._context;n.font=e;var i=Math.ceil(n.measureText("|MÉq").width),o=Math.ceil(n.measureText("M").width),a=2*o;o=1.4*o|0,r.width=i,r.height=a,n.fillStyle="#f00",n.fillRect(0,0,i,a),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText("|MÉq",0,o);var s=n.getImageData(0,0,i,a).data,u=s.length,l=4*i,h=0,c=0,f=!1;for(h=0;h<o;++h){for(var d=0;d<l;d+=4)if(255!==s[c+d]){f=!0;break}if(f)break;c+=l}for(t.ascent=o-h,c=u-l,f=!1,h=a;h>o;--h){for(var p=0;p<l;p+=4)if(255!==s[c+p]){f=!0;break}if(f)break;c-=l}return t.descent=h-o,t.fontSize=t.ascent+t.descent,TextMetrics._fonts[e]=t,t},TextMetrics}();t.default=n;var i=document.createElement("canvas");i.width=i.height=10,n._canvas=i,n._context=i.getContext("2d"),n._fonts={}},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function GraphicsData(e,t,r,n,i,o,a,s){_classCallCheck(this,GraphicsData),this.lineWidth=e,this.nativeLines=a,this.lineColor=t,this.lineAlpha=r,this._lineTint=t,this.fillColor=n,this.fillAlpha=i,this._fillTint=n,this.fill=o,this.holes=[],this.shape=s,this.type=s.type}return GraphicsData.prototype.clone=function(){return new GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},GraphicsData.prototype.addHole=function(e){this.holes.push(e)},GraphicsData.prototype.destroy=function(){this.shape=null,this.holes=null},GraphicsData}();t.default=n},function(e,t,r){"use strict";function earcut(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=linkedList(e,0,i,r,!0),a=[];if(!o)return a;var s,u,l,h,c,f,d;if(n&&(o=eliminateHoles(e,t,o,r)),e.length>80*r){s=l=e[0],u=h=e[1];for(var p=r;p<i;p+=r)c=e[p],f=e[p+1],c<s&&(s=c),f<u&&(u=f),c>l&&(l=c),f>h&&(h=f);d=Math.max(l-s,h-u)}return earcutLinked(o,a,r,s,u,d),a}function linkedList(e,t,r,n,i){var o,a;if(i===signedArea(e,t,r,n)>0)for(o=t;o<r;o+=n)a=insertNode(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=insertNode(o,e[o],e[o+1],a);return a&&equals(a,a.next)&&(removeNode(a),a=a.next),a}function filterPoints(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!equals(n,n.next)&&0!==area(n.prev,n,n.next))n=n.next;else{if(removeNode(n),(n=t=n.prev)===n.next)return null;r=!0}}while(r||n!==t);return t}function earcutLinked(e,t,r,n,i,o,a){if(e){!a&&o&&indexCurve(e,n,i,o);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?isEarHashed(e,n,i,o):isEar(e))t.push(s.i/r),t.push(e.i/r),t.push(u.i/r),removeNode(e),e=u.next,l=u.next;else if((e=u)===l){a?1===a?(e=cureLocalIntersections(e,t,r),earcutLinked(e,t,r,n,i,o,2)):2===a&&splitEarcut(e,t,r,n,i,o):earcutLinked(filterPoints(e),t,r,n,i,o,1);break}}}function isEar(e){var t=e.prev,r=e,n=e.next;if(area(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(pointInTriangle(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&area(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function isEarHashed(e,t,r,n){var i=e.prev,o=e,a=e.next;if(area(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,h=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,c=zOrder(s,u,t,r,n),f=zOrder(l,h,t,r,n),d=e.nextZ;d&&d.z<=f;){if(d!==e.prev&&d!==e.next&&pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&area(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=e.prevZ;d&&d.z>=c;){if(d!==e.prev&&d!==e.next&&pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&area(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function cureLocalIntersections(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!equals(i,o)&&intersects(i,n,n.next,o)&&locallyInside(i,o)&&locallyInside(o,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(o.i/r),removeNode(n),removeNode(n.next),n=e=o),n=n.next}while(n!==e);return n}function splitEarcut(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&isValidDiagonal(a,s)){var u=splitPolygon(a,s);return a=filterPoints(a,a.next),u=filterPoints(u,u.next),earcutLinked(a,t,r,n,i,o),void earcutLinked(u,t,r,n,i,o)}s=s.next}a=a.next}while(a!==e)}function eliminateHoles(e,t,r,n){var i,o,a,s,u,l=[];for(i=0,o=t.length;i<o;i++)a=t[i]*n,s=i<o-1?t[i+1]*n:e.length,u=linkedList(e,a,s,n,!1),u===u.next&&(u.steiner=!0),l.push(getLeftmost(u));for(l.sort(compareX),i=0;i<l.length;i++)eliminateHole(l[i],r),r=filterPoints(r,r.next);return r}function compareX(e,t){return e.x-t.x}function eliminateHole(e,t){if(t=findHoleBridge(e,t)){var r=splitPolygon(t,e);filterPoints(r,r.next)}}function findHoleBridge(e,t){var r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===a)return r.prev;var u,l=r,h=r.x,c=r.y,f=1/0;for(n=r.next;n!==l;)i>=n.x&&n.x>=h&&pointInTriangle(o<c?i:a,o,h,c,o<c?a:i,o,n.x,n.y)&&((u=Math.abs(o-n.y)/(i-n.x))<f||u===f&&n.x>r.x)&&locallyInside(n,e)&&(r=n,f=u),n=n.next;return r}function indexCurve(e,t,r,n){var i=e;do{null===i.z&&(i.z=zOrder(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,sortLinked(i)}function sortLinked(e){var t,r,n,i,o,a,s,u,l=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<l&&(s++,n=n.nextZ);t++);for(u=l;s>0||u>0&&n;)0===s?(i=n,n=n.nextZ,u--):0!==u&&n?r.z<=n.z?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,u--):(i=r,r=r.nextZ,s--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,l*=2}while(a>1);return e}function zOrder(e,t,r,n,i){return e=32767*(e-r)/i,t=32767*(t-n)/i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function getLeftmost(e){var t=e,r=e;do{t.x<r.x&&(r=t),t=t.next}while(t!==e);return r}function pointInTriangle(e,t,r,n,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(n-s)-(r-a)*(t-s)>=0&&(r-a)*(o-s)-(i-a)*(n-s)>=0}function isValidDiagonal(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!intersectsPolygon(e,t)&&locallyInside(e,t)&&locallyInside(t,e)&&middleInside(e,t)}function area(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function equals(e,t){return e.x===t.x&&e.y===t.y}function intersects(e,t,r,n){return!!(equals(e,t)&&equals(r,n)||equals(e,n)&&equals(r,t))||area(e,t,r)>0!=area(e,t,n)>0&&area(r,n,e)>0!=area(r,n,t)>0}function intersectsPolygon(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&intersects(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function locallyInside(e,t){return area(e.prev,e,e.next)<0?area(e,t,e.next)>=0&&area(e,e.prev,t)>=0:area(e,t,e.prev)<0||area(e,e.next,t)<0}function middleInside(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}function splitPolygon(e,t){var r=new Node(e.i,e.x,e.y),n=new Node(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function insertNode(e,t,r,n){var i=new Node(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}e.exports=earcut,earcut.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(signedArea(e,0,o,r));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*r,h=s<u-1?t[s+1]*r:e.length;a-=Math.abs(signedArea(e,l,h,r))}var c=0;for(s=0;s<n.length;s+=3){var f=n[s]*r,d=n[s+1]*r,p=n[s+2]*r;c+=Math.abs((e[f]-e[p])*(e[d+1]-e[f+1])-(e[f]-e[d])*(e[p+1]-e[f+1]))}return 0===a&&0===c?0:Math.abs((c-a)/a)},earcut.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r}},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(109),o=r(23),a=_interopRequireDefault(o),s=r(60),u=r(3),l=_interopRequireDefault(u),h=r(1),c=function(){function Application(e,t,r,n,o){_classCallCheck(this,Application),"number"==typeof e&&(e=Object.assign({width:e,height:t||l.default.RENDER_OPTIONS.height,forceCanvas:!!n,sharedTicker:!!o},r)),this._options=e=Object.assign({sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,i.autoDetectRenderer)(e),this.stage=new a.default,this._ticker=null,this.ticker=e.sharedTicker?s.shared:new s.Ticker,this.start()}return Application.prototype.render=function(){this.renderer.render(this.stage)},Application.prototype.stop=function(){this._ticker.stop()},Application.prototype.start=function(){this._ticker.start()},Application.prototype.destroy=function(e){var t=this._ticker;this.ticker=null,t.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(e),this.renderer=null,this._options=null},n(Application,[{key:"ticker",set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,h.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),Application}();t.default=c},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function autoDetectRenderer(e,t,r,n){var o=e&&e.forceCanvas;return void 0!==n&&(o=n),!o&&i.isWebGLSupported()?new u.default(e,t,r):new a.default(e,t,r)}t.__esModule=!0,t.autoDetectRenderer=autoDetectRenderer;var n=r(2),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),o=r(24),a=_interopRequireDefault(o),s=r(34),u=_interopRequireDefault(s)},function(e,t,r){"use strict";t.__esModule=!0,t.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.BitmapText=t.TilingSpriteRenderer=t.TilingSprite=t.TextureTransform=t.AnimatedSprite=void 0;var n=r(248);Object.defineProperty(t,"AnimatedSprite",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}});var i=r(64);Object.defineProperty(t,"TextureTransform",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}});var o=r(249);Object.defineProperty(t,"TilingSprite",{enumerable:!0,get:function(){return _interopRequireDefault(o).default}});var a=r(250);Object.defineProperty(t,"TilingSpriteRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(a).default}});var s=r(251);Object.defineProperty(t,"BitmapText",{enumerable:!0,get:function(){return _interopRequireDefault(s).default}}),r(252),r(253),r(254)},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(0),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),a=r(113),s=_interopRequireDefault(a),u=r(114),l=_interopRequireDefault(u),h=r(115),c=_interopRequireDefault(h),f=function(e){function BlurXFilter(t,r,n,i){_classCallCheck(this,BlurXFilter),i=i||5;var a=(0,s.default)(i,!0),u=(0,l.default)(i),h=_possibleConstructorReturn(this,e.call(this,a,u));return h.resolution=n||o.settings.RESOLUTION,h._quality=0,h.quality=r||4,h.strength=t||8,h.firstRun=!0,h}return _inherits(BlurXFilter,e),BlurXFilter.prototype.apply=function(e,t,r,n){if(this.firstRun){var i=e.renderer.gl,o=(0,c.default)(i);this.vertexSrc=(0,s.default)(o,!0),this.fragmentSrc=(0,l.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.width*(r.size.width/t.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,r,n);else{for(var a=e.getRenderTarget(!0),u=t,h=a,f=0;f<this.passes-1;f++){e.applyFilter(this,u,h,!0);var d=h;h=u,u=d}e.applyFilter(this,u,r,n),e.returnRenderTarget(a)}},n(BlurXFilter,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),BlurXFilter}(o.Filter);t.default=f},function(e,t,r){"use strict";function generateVertBlurSource(e,t){var r=Math.ceil(e/2),i=n,o="",a=void 0;a=t?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<e;s++){var u=a.replace("%index%",s);u=u.replace("%sampleIndex%",s-(r-1)+".0"),o+=u,o+="\n"}return i=i.replace("%blur%",o),i=i.replace("%size%",e)}t.__esModule=!0,t.default=generateVertBlurSource;var n=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},function(e,t,r){"use strict";function generateFragBlurSource(e){for(var t=n[e],r=t.length,o=i,a="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",u=void 0,l=0;l<e;l++){var h=s.replace("%index%",l);u=l,l>=r&&(u=e-l-1),h=h.replace("%value%",t[u]),a+=h,a+="\n"}return o=o.replace("%blur%",a),o=o.replace("%size%",e)}t.__esModule=!0,t.default=generateFragBlurSource;var n={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},i=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},function(e,t,r){"use strict";function getMaxKernelSize(e){for(var t=e.getParameter(e.MAX_VARYING_VECTORS),r=15;r>t;)r-=2;return r}t.__esModule=!0,t.default=getMaxKernelSize},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(0),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),a=r(113),s=_interopRequireDefault(a),u=r(114),l=_interopRequireDefault(u),h=r(115),c=_interopRequireDefault(h),f=function(e){function BlurYFilter(t,r,n,i){_classCallCheck(this,BlurYFilter),i=i||5;var a=(0,s.default)(i,!1),u=(0,l.default)(i),h=_possibleConstructorReturn(this,e.call(this,a,u));return h.resolution=n||o.settings.RESOLUTION,h._quality=0,h.quality=r||4,h.strength=t||8,h.firstRun=!0,h}return _inherits(BlurYFilter,e),BlurYFilter.prototype.apply=function(e,t,r,n){if(this.firstRun){var i=e.renderer.gl,o=(0,c.default)(i);this.vertexSrc=(0,s.default)(o,!1),this.fragmentSrc=(0,l.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.height*(r.size.height/t.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,r,n);else{for(var a=e.getRenderTarget(!0),u=t,h=a,f=0;f<this.passes-1;f++){e.applyFilter(this,u,h,!0);var d=h;h=u,u=d}e.applyFilter(this,u,r,n),e.returnRenderTarget(a)}},n(BlurYFilter,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),BlurYFilter}(o.Filter);t.default=f},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(0),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),a=function(){function InteractionData(){_classCallCheck(this,InteractionData),this.global=new o.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return InteractionData.prototype.getLocalPosition=function(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)},InteractionData.prototype._copyEvent=function(e){e.isPrimary&&(this.isPrimary=!0),this.button=e.button,this.buttons=e.buttons,this.width=e.width,this.height=e.height,this.tiltX=e.tiltX,this.tiltY=e.tiltY,this.pointerType=e.pointerType,this.pressure=e.pressure,this.rotationAngle=e.rotationAngle,this.twist=e.twist||0,this.tangentialPressure=e.tangentialPressure||0},InteractionData.prototype._reset=function(){this.isPrimary=!1},n(InteractionData,[{key:"pointerId",get:function(){return this.identifier}}]),InteractionData}();t.default=a},function(e,t,r){"use strict";t.__esModule=!0,t.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},function(e,t,r){"use strict";function parse(e,t){e.bitmapFont=s.BitmapText.registerFont(e.data,t)}t.__esModule=!0,t.parse=parse,t.default=function(){return function(e,t){if(!e.data||e.type!==a.Resource.TYPE.XML)return void t();if(0===e.data.getElementsByTagName("page").length||0===e.data.getElementsByTagName("info").length||null===e.data.getElementsByTagName("info")[0].getAttribute("face"))return void t();var r=e.isDataUrl?"":i.dirname(e.url);e.isDataUrl&&("."===r&&(r=""),this.baseUrl&&r&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(r+="/"),r=r.replace(this.baseUrl,""))),r&&"/"!==r.charAt(r.length-1)&&(r+="/");var n=r+e.data.getElementsByTagName("page")[0].getAttribute("file");if(o.utils.TextureCache[n])parse(e,o.utils.TextureCache[n]),t();else{var s={crossOrigin:e.crossOrigin,loadType:a.Resource.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata,parentResource:e};this.add(e.name+"_image",n,s,function(r){parse(e,r.texture),t()})}}};var n=r(7),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),o=r(0),a=r(27),s=r(111)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _addMiniSignalBinding(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function(){function MiniSignalBinding(e,t,r){void 0===t&&(t=!1),_classCallCheck(this,MiniSignalBinding),this._fn=e,this._once=t,this._thisArg=r,this._next=this._prev=this._owner=null}return n(MiniSignalBinding,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),MiniSignalBinding}(),o=function(){function MiniSignal(){_classCallCheck(this,MiniSignal),this._head=this._tail=void 0}return n(MiniSignal,[{key:"handlers",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],t=this._head;if(e)return!!t;for(var r=[];t;)r.push(t),t=t._next;return r}},{key:"has",value:function(e){if(!(e instanceof i))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return e._owner===this}},{key:"dispatch",value:function(){var e=this._head;if(!e)return!1;for(;e;)e._once&&this.detach(e),e._fn.apply(e._thisArg,arguments),e=e._next;return!0}},{key:"add",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof e)throw new Error("MiniSignal#add(): First arg must be a Function.");return _addMiniSignalBinding(this,new i(e,!1,t))}},{key:"once",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof e)throw new Error("MiniSignal#once(): First arg must be a Function.");return _addMiniSignalBinding(this,new i(e,!0,t))}},{key:"detach",value:function(e){if(!(e instanceof i))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)}},{key:"detachAll",value:function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this}}]),MiniSignal}();o.MiniSignalBinding=i,t.default=o,e.exports=t.default},function(e,t,r){"use strict";e.exports=function(e,t){t=t||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[t.strictMode?"strict":"loose"].exec(e),i={},o=14;o--;)i[r.key[o]]=n[o]||"";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,function(e,t,n){t&&(i[r.q.name][t]=n)}),i}},function(e,t,r){"use strict";function _noop(){}function eachSeries(e,t,r,n){var i=0,o=e.length;!function next(a){if(a||i===o)return void(r&&r(a));n?setTimeout(function(){t(e[i++],next)},1):t(e[i++],next)}()}function onlyOnce(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function queue(e,t){function _insert(e,t,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(n.started=!0,null==e&&n.idle())return void setTimeout(function(){return n.drain()},1);var i={data:e,callback:"function"==typeof r?r:_noop};t?n._tasks.unshift(i):n._tasks.push(i),setTimeout(function(){return n.process()},1)}function _next(e){return function(){r-=1,e.callback.apply(e,arguments),null!=arguments[0]&&n.error(arguments[0],e.data),r<=n.concurrency-n.buffer&&n.unsaturated(),n.idle()&&n.drain(),n.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var r=0,n={_tasks:[],concurrency:t,saturated:_noop,unsaturated:_noop,buffer:t/4,empty:_noop,drain:_noop,error:_noop,started:!1,paused:!1,push:function(e,t){_insert(e,!1,t)},kill:function(){r=0,n.drain=_noop,n.started=!1,n._tasks=[]},unshift:function(e,t){_insert(e,!0,t)},process:function(){for(;!n.paused&&r<n.concurrency&&n._tasks.length;){var t=n._tasks.shift();0===n._tasks.length&&n.empty(),r+=1,r===n.concurrency&&n.saturated(),e(t.data,onlyOnce(_next(t)))}},length:function(){return n._tasks.length},running:function(){return r},idle:function(){return n._tasks.length+r===0},pause:function(){!0!==n.paused&&(n.paused=!0)},resume:function(){if(!1!==n.paused){n.paused=!1;for(var e=1;e<=n.concurrency;e++)n.process()}}};return n}t.__esModule=!0,t.eachSeries=eachSeries,t.queue=queue},function(e,t,r){"use strict";function encodeBinary(e){for(var t="",r=0;r<e.length;){for(var i=[0,0,0],o=[0,0,0,0],a=0;a<i.length;++a)r<e.length?i[a]=255&e.charCodeAt(r++):i[a]=0;o[0]=i[0]>>2,o[1]=(3&i[0])<<4|i[1]>>4,o[2]=(15&i[1])<<2|i[2]>>6,o[3]=63&i[2];switch(r-(e.length-1)){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var s=0;s<o.length;++s)t+=n.charAt(o[s])}return t}t.__esModule=!0,t.encodeBinary=encodeBinary;var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e,t,r){"use strict";function getResourcePath(e,t){return e.isDataUrl?e.data.meta.image:o.default.resolve(e.url.replace(t,""),e.data.meta.image)}t.__esModule=!0,t.default=function(){return function(e,t){var r=e.name+"_image";if(!e.data||e.type!==n.Resource.TYPE.JSON||!e.data.frames||this.resources[r])return void t();var i={crossOrigin:e.crossOrigin,loadType:n.Resource.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata,parentResource:e},o=getResourcePath(e,this.baseUrl);this.add(r,o,i,function(r){var n=new a.Spritesheet(r.texture.baseTexture,e.data,e.url);n.parse(function(){e.spritesheet=n,e.textures=n.textures,t()})})}},t.getResourcePath=getResourcePath;var n=r(27),i=r(94),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=r(0)},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(){return function(e,t){e.data&&e.type===n.Resource.TYPE.IMAGE&&(e.texture=o.default.fromLoader(e.data,e.url,e.name)),t()}};var n=r(27),i=r(15),o=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(28),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=function(e){function Plane(t,r,n){_classCallCheck(this,Plane);var o=_possibleConstructorReturn(this,e.call(this,t));return o._ready=!0,o.verticesX=r||10,o.verticesY=n||10,o.drawMode=i.default.DRAW_MODES.TRIANGLES,o.refresh(),o}return _inherits(Plane,e),Plane.prototype._refresh=function(){for(var e=this._texture,t=this.verticesX*this.verticesY,r=[],n=[],i=[],o=[],a=this.verticesX-1,s=this.verticesY-1,u=e.width/a,l=e.height/s,h=0;h<t;h++){var c=h%this.verticesX,f=h/this.verticesX|0;r.push(c*u,f*l),i.push(c/a,f/s)}for(var d=a*s,p=0;p<d;p++){var _=p%a,v=p/a|0,y=v*this.verticesX+_,g=v*this.verticesX+_+1,m=(v+1)*this.verticesX+_,b=(v+1)*this.verticesX+_+1;o.push(y,g,m),o.push(g,b,m)}this.vertices=new Float32Array(r),this.uvs=new Float32Array(i),this.colors=new Float32Array(n),this.indices=new Uint16Array(o),this.indexDirty=!0,this.multiplyUvs()},Plane.prototype._onTextureUpdate=function(){i.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},Plane}(i.default);t.default=o},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function CountLimiter(e){_classCallCheck(this,CountLimiter),this.maxItemsPerFrame=e,this.itemsLeft=0}return CountLimiter.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},CountLimiter.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},CountLimiter}();t.default=n},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatedSprite=t.State=t.Game=void 0;var n=r(129),i=_interopRequireDefault(n),o=r(136),a=_interopRequireDefault(o),s=r(140),u=_interopRequireDefault(s),l=r(144),h=_interopRequireDefault(l),c=r(147),f=_interopRequireDefault(c),d=r(148),p=_interopRequireDefault(d),_=r(171),v=_interopRequireDefault(_),y=r(179),g=void 0,m={},b={__states:{},active:{name:"",state:null,update:function(){}},add:function(e,t){this.__states[e]&&console.warn(e+" state has registered, please rename it"),this.__states[e]=t},start:function(e){g.stage.removeChildren(),g.ticker.remove(this.active.update,this.active.state);var t=this.__states[e];if(!t)throw new Error(e+" state is not exist");var r=new t,n=function(){r.__isLoaded&&r.update()};g.ticker.add(n),g.stage.addChild(r),this.active.update=n,this.active.state=r}},x=function(e){function Game(){var e;(0,f.default)(this,Game);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=(0,p.default)(this,(e=Game.__proto__||(0,h.default)(Game)).call.apply(e,[this].concat(r)));return g=i,i.state=b,i}return(0,v.default)(Game,e),Game}(y.Application),T=function(e){function State(){(0,f.default)(this,State);var e=(0,p.default)(this,(State.__proto__||(0,h.default)(State)).call(this));e.game=g,e.stage=g.renderer,e.state=b,e.assets=m,e.__isLoaded=!1,e.rerender=function(){e.removeChildren(),e.init(),e.preload(),e.create()},e.add=function(t,r){if(r=r||e,"string"==typeof t){var n=new y.Sprite(m[t].texture);return r.addChild(n),n}return r.addChild(t),t},e.remove=function(t,r){return r=r||e,r.removeChild(t),t},e.init();var t=!1,r=y.loader.add;return y.loader.add=function(e,n,i,o){t=!0,r.call(y.loader,e,n,i,o)},e.loader=y.loader,e.preload(),e.loader.load(function(t,r){e.__isLoaded=!0,m=(0,a.default)({},m,r),e.assets=m,e.create(t,r)}),t||(e.create(),e.__isLoaded=!0),e}return(0,v.default)(State,e),(0,u.default)(State,[{key:"init",value:function(){}},{key:"preload",value:function(){}},{key:"create",value:function(e,t){}},{key:"update",value:function(){}}]),State}(y.Container),w=function AnimatedSprite(e,t){(0,f.default)(this,AnimatedSprite);var r=new Spritesheet(e,t),n=[];return r.parse(function(e){(0,i.default)(e).forEach(function(e){return n.push(Texture.fromFrame(e))})}),new extras.AnimatedSprite(n)};t.Game=x,t.State=T,t.AnimatedSprite=w},function(e,t,r){e.exports={default:r(130),__esModule:!0}},function(e,t,r){r(131),e.exports=r(6).Object.keys},function(e,t,r){var n=r(29),i=r(16);r(70)("keys",function(){return function(e){return i(n(e))}})},function(e,t,r){var n=r(10),i=r(133),o=r(134);e.exports=function(e){return function(t,r,a){var s,u=n(t),l=i(u.length),h=o(a,l);if(e&&r!=r){for(;l>h;)if((s=u[h++])!=s)return!0}else for(;l>h;h++)if((e||h in u)&&u[h]===r)return e||h||0;return!e&&-1}}},function(e,t,r){var n=r(38),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t,r){var n=r(38),i=Math.max,o=Math.min;e.exports=function(e,t){return e=n(e),e<0?i(e+t,0):o(e,t)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){e.exports={default:r(137),__esModule:!0}},function(e,t,r){r(138),e.exports=r(6).Object.assign},function(e,t,r){var n=r(11);n(n.S+n.F,"Object",{assign:r(139)})},function(e,t,r){"use strict";var n=r(16),i=r(43),o=r(32),a=r(29),s=r(68),u=Object.assign;e.exports=!u||r(18)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function(e,t){for(var r=a(e),u=arguments.length,l=1,h=i.f,c=o.f;u>l;)for(var f,d=s(arguments[l++]),p=h?n(d).concat(h(d)):n(d),_=p.length,v=0;_>v;)c.call(d,f=p[v++])&&(r[f]=d[f]);return r}:u},function(e,t,r){"use strict";t.__esModule=!0;var n=r(141),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i.default)(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}()},function(e,t,r){e.exports={default:r(142),__esModule:!0}},function(e,t,r){r(143);var n=r(6).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){var n=r(11);n(n.S+n.F*!r(13),"Object",{defineProperty:r(12).f})},function(e,t,r){e.exports={default:r(145),__esModule:!0}},function(e,t,r){r(146),e.exports=r(6).Object.getPrototypeOf},function(e,t,r){var n=r(29),i=r(74);r(70)("getPrototypeOf",function(){return function(e){return i(n(e))}})},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(75),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,r){e.exports={default:r(150),__esModule:!0}},function(e,t,r){r(151),r(156),e.exports=r(48).f("iterator")},function(e,t,r){"use strict";var n=r(152)(!0);r(76)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){var n=r(38),i=r(37);e.exports=function(e){return function(t,r){var o,a,s=String(i(t)),u=n(r),l=s.length;return u<0||u>=l?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,r){"use strict";var n=r(46),i=r(31),o=r(47),a={};r(17)(a,r(19)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(a,{next:i(1,r)}),o(e,t+" Iterator")}},function(e,t,r){var n=r(12),i=r(21),o=r(16);e.exports=r(13)?Object.defineProperties:function(e,t){i(e);for(var r,a=o(t),s=a.length,u=0;s>u;)n.f(e,r=a[u++],t[r]);return e}},function(e,t,r){e.exports=r(8).document&&document.documentElement},function(e,t,r){r(157);for(var n=r(8),i=r(17),o=r(45),a=r(19)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var l=s[u],h=n[l],c=h&&h.prototype;c&&!c[a]&&i(c,a,l),o[l]=o.Array}},function(e,t,r){"use strict";var n=r(158),i=r(159),o=r(45),a=r(10);e.exports=r(76)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,r):"values"==t?i(0,e[r]):i(0,[r,e[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){e.exports={default:r(161),__esModule:!0}},function(e,t,r){r(162),r(168),r(169),r(170),e.exports=r(6).Symbol},function(e,t,r){"use strict";var n=r(8),i=r(9),o=r(13),a=r(11),s=r(77),u=r(163).KEY,l=r(18),h=r(40),c=r(47),f=r(30),d=r(19),p=r(48),_=r(49),v=r(164),y=r(165),g=r(166),m=r(21),b=r(10),x=r(42),T=r(31),w=r(46),E=r(167),C=r(79),R=r(12),S=r(16),P=C.f,O=R.f,M=E.f,D=n.Symbol,A=n.JSON,I=A&&A.stringify,L=d("_hidden"),k=d("toPrimitive"),F={}.propertyIsEnumerable,N=h("symbol-registry"),B=h("symbols"),j=h("op-symbols"),U=Object.prototype,q="function"==typeof D,G=n.QObject,X=!G||!G.prototype||!G.prototype.findChild,W=o&&l(function(){return 7!=w(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=P(U,t);n&&delete U[t],O(e,t,r),n&&e!==U&&O(U,t,n)}:O,H=function(e){var t=B[e]=w(D.prototype);return t._k=e,t},V=q&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},Y=function(e,t,r){return e===U&&Y(j,t,r),m(e),t=x(t,!0),m(r),i(B,t)?(r.enumerable?(i(e,L)&&e[L][t]&&(e[L][t]=!1),r=w(r,{enumerable:T(0,!1)})):(i(e,L)||O(e,L,T(1,{})),e[L][t]=!0),W(e,t,r)):O(e,t,r)},z=function(e,t){m(e);for(var r,n=y(t=b(t)),i=0,o=n.length;o>i;)Y(e,r=n[i++],t[r]);return e},K=function(e,t){return void 0===t?w(e):z(w(e),t)},Z=function(e){var t=F.call(this,e=x(e,!0));return!(this===U&&i(B,e)&&!i(j,e))&&(!(t||!i(this,e)||!i(B,e)||i(this,L)&&this[L][e])||t)},J=function(e,t){if(e=b(e),t=x(t,!0),e!==U||!i(B,t)||i(j,t)){var r=P(e,t);return!r||!i(B,t)||i(e,L)&&e[L][t]||(r.enumerable=!0),r}},Q=function(e){for(var t,r=M(b(e)),n=[],o=0;r.length>o;)i(B,t=r[o++])||t==L||t==u||n.push(t);return n},$=function(e){for(var t,r=e===U,n=M(r?j:b(e)),o=[],a=0;n.length>a;)!i(B,t=n[a++])||r&&!i(U,t)||o.push(B[t]);return o};q||(D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(r){this===U&&t.call(j,r),i(this,L)&&i(this[L],e)&&(this[L][e]=!1),W(this,e,T(1,r))};return o&&X&&W(U,e,{configurable:!0,set:t}),H(e)},s(D.prototype,"toString",function(){return this._k}),C.f=J,R.f=Y,r(78).f=E.f=Q,r(32).f=Z,r(43).f=$,o&&!r(44)&&s(U,"propertyIsEnumerable",Z,!0),p.f=function(e){return H(d(e))}),a(a.G+a.W+a.F*!q,{Symbol:D});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)d(ee[te++]);for(var ee=S(d.store),te=0;ee.length>te;)_(ee[te++]);a(a.S+a.F*!q,"Symbol",{for:function(e){return i(N,e+="")?N[e]:N[e]=D(e)},keyFor:function(e){if(V(e))return v(N,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){X=!0},useSimple:function(){X=!1}}),a(a.S+a.F*!q,"Object",{create:K,defineProperty:Y,defineProperties:z,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:$}),A&&a(a.S+a.F*(!q||l(function(){var e=D();return"[null]"!=I([e])||"{}"!=I({a:e})||"{}"!=I(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!V(e)){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);return t=n[1],"function"==typeof t&&(r=t),!r&&g(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!V(t))return t}),n[1]=t,I.apply(A,n)}}}),D.prototype[k]||r(17)(D.prototype,k,D.prototype.valueOf),c(D,"Symbol"),c(Math,"Math",!0),c(n.JSON,"JSON",!0)},function(e,t,r){var n=r(30)("meta"),i=r(22),o=r(9),a=r(12).f,s=0,u=Object.isExtensible||function(){return!0},l=!r(18)(function(){return u(Object.preventExtensions({}))}),h=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},c=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!u(e))return"F";if(!t)return"E";h(e)}return e[n].i},f=function(e,t){if(!o(e,n)){if(!u(e))return!0;if(!t)return!1;h(e)}return e[n].w},d=function(e){return l&&p.NEED&&u(e)&&!o(e,n)&&h(e),e},p=e.exports={KEY:n,NEED:!1,fastKey:c,getWeak:f,onFreeze:d}},function(e,t,r){var n=r(16),i=r(10);e.exports=function(e,t){for(var r,o=i(e),a=n(o),s=a.length,u=0;s>u;)if(o[r=a[u++]]===t)return r}},function(e,t,r){var n=r(16),i=r(43),o=r(32);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var a,s=r(e),u=o.f,l=0;s.length>l;)u.call(e,a=s[l++])&&t.push(a);return t}},function(e,t,r){var n=r(69);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(10),i=r(78).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(n(e))}},function(e,t){},function(e,t,r){r(49)("asyncIterator")},function(e,t,r){r(49)("observable")},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(172),i=_interopRequireDefault(n),o=r(176),a=_interopRequireDefault(o),s=r(75),u=_interopRequireDefault(s);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,u.default)(t)));e.prototype=(0,a.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},function(e,t,r){e.exports={default:r(173),__esModule:!0}},function(e,t,r){r(174),e.exports=r(6).Object.setPrototypeOf},function(e,t,r){var n=r(11);n(n.S,"Object",{setPrototypeOf:r(175).set})},function(e,t,r){var n=r(22),i=r(21),o=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r(71)(Function.call,r(79).f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:o}},function(e,t,r){e.exports={default:r(177),__esModule:!0}},function(e,t,r){r(178);var n=r(6).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){var n=r(11);n(n.S,"Object",{create:r(46)})},function(e,t,r){"use strict";(function(e){function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}t.__esModule=!0,t.loader=t.prepare=t.particles=t.mesh=t.loaders=t.interaction=t.filters=t.extras=t.extract=t.accessibility=void 0;var n=r(180);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var i=r(0);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var o=r(242),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=r(243),u=_interopRequireWildcard(s),l=r(245),h=_interopRequireWildcard(l),c=r(111),f=_interopRequireWildcard(c),d=r(255),p=_interopRequireWildcard(d),_=r(262),v=_interopRequireWildcard(_),y=r(266),g=_interopRequireWildcard(y),m=r(270),b=_interopRequireWildcard(m),x=r(275),T=_interopRequireWildcard(x),w=r(280),E=_interopRequireWildcard(w);i.utils.mixins.performMixins();var C=g.shared||null;t.accessibility=u,t.extract=h,t.extras=f,t.filters=p,t.interaction=v,t.loaders=g,t.mesh=b,t.particles=T,t.prepare=E,t.loader=C,"function"==typeof a.default&&(0,a.default)(t),e.PIXI=t}).call(t,r(50))},function(e,t,r){"use strict";r(181),r(183),r(184),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},function(e,t,r){"use strict";var n=r(182),i=function(e){return e&&e.__esModule?e:{default:e}}(n);Object.assign||(Object.assign=i.default)},function(e,t,r){"use strict";function toObject(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,a,s=toObject(e),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var l in r)i.call(r,l)&&(s[l]=r[l]);if(n){a=n(r);for(var h=0;h<a.length;h++)o.call(r,a[h])&&(s[a[h]]=r[a[h]])}}return s}},function(e,t,r){"use strict";(function(e){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!e.performance||!e.performance.now){var t=Date.now();e.performance||(e.performance={}),e.performance.now=function(){return Date.now()-t}}for(var r=Date.now(),n=["ms","moz","webkit","o"],i=0;i<n.length&&!e.requestAnimationFrame;++i){var o=n[i];e.requestAnimationFrame=e[o+"RequestAnimationFrame"],e.cancelAnimationFrame=e[o+"CancelAnimationFrame"]||e[o+"CancelRequestAnimationFrame"]}e.requestAnimationFrame||(e.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var t=Date.now(),n=16+r-t;return n<0&&(n=0),r=t,setTimeout(function(){r=Date.now(),e(performance.now())},n)}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){return clearTimeout(e)})}).call(t,r(50))},function(e,t,r){"use strict";Math.sign||(Math.sign=function(e){return e=Number(e),0===e||isNaN(e)?e:e>0?1:-1})},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(53),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r(1),a=function(){function Circle(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,Circle),this.x=e,this.y=t,this.radius=r,this.type=o.SHAPES.CIRC}return Circle.prototype.clone=function(){return new Circle(this.x,this.y,this.radius)},Circle.prototype.contains=function(e,t){if(this.radius<=0)return!1;var r=this.radius*this.radius,n=this.x-e,i=this.y-t;return n*=n,i*=i,n+i<=r},Circle.prototype.getBounds=function(){return new i.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},Circle}();t.default=a},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(53),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r(1),a=function(){function Ellipse(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;_classCallCheck(this,Ellipse),this.x=e,this.y=t,this.width=r,this.height=n,this.type=o.SHAPES.ELIP}return Ellipse.prototype.clone=function(){return new Ellipse(this.x,this.y,this.width,this.height)},Ellipse.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var r=(e-this.x)/this.width,n=(t-this.y)/this.height;return r*=r,n*=n,r+n<=1},Ellipse.prototype.getBounds=function(){return new i.default(this.x-this.width,this.y-this.height,this.width,this.height)},Ellipse}();t.default=a},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(51),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r(1),a=function(){function Polygon(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(_classCallCheck(this,Polygon),Array.isArray(t[0])&&(t=t[0]),t[0]instanceof i.default){for(var n=[],a=0,s=t.length;a<s;a++)n.push(t[a].x,t[a].y);t=n}this.closed=!0,this.points=t,this.type=o.SHAPES.POLY}return Polygon.prototype.clone=function(){return new Polygon(this.points.slice())},Polygon.prototype.close=function(){var e=this.points;e[0]===e[e.length-2]&&e[1]===e[e.length-1]||e.push(e[0],e[1])},Polygon.prototype.contains=function(e,t){for(var r=!1,n=this.points.length/2,i=0,o=n-1;i<n;o=i++){var a=this.points[2*i],s=this.points[2*i+1],u=this.points[2*o],l=this.points[2*o+1];s>t!=l>t&&e<(t-s)/(l-s)*(u-a)+a&&(r=!r)}return r},Polygon}();t.default=a},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(1),i=function(){function RoundedRectangle(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;_classCallCheck(this,RoundedRectangle),this.x=e,this.y=t,this.width=r,this.height=i,this.radius=o,this.type=n.SHAPES.RREC}return RoundedRectangle.prototype.clone=function(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},RoundedRectangle.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var r=e-(this.x+this.radius),n=t-(this.y+this.radius),i=this.radius*this.radius;if(r*r+n*n<=i)return!0;if((r=e-(this.x+this.width-this.radius))*r+n*n<=i)return!0;if(n=t-(this.y+this.height-this.radius),r*r+n*n<=i)return!0;if((r=e-(this.x+this.radius))*r+n*n<=i)return!0}return!1},RoundedRectangle}();t.default=i},function(e,t){var r=function(e,t){var r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);if(!r)throw new Error("This browser does not support webGL. Try using the canvas renderer");return r};e.exports=r},function(e,t){var r=new ArrayBuffer(0),n=function(e,t,n,i){this.gl=e,this.buffer=e.createBuffer(),this.type=t||e.ARRAY_BUFFER,this.drawType=i||e.STATIC_DRAW,this.data=r,n&&this.upload(n),this._updateID=0};n.prototype.upload=function(e,t,r){r||this.bind();var n=this.gl;e=e||this.data,t=t||0,this.data.byteLength>=e.byteLength?n.bufferSubData(this.type,t,e):n.bufferData(this.type,e,this.drawType),this.data=e},n.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},n.createVertexBuffer=function(e,t,r){return new n(e,e.ARRAY_BUFFER,t,r)},n.createIndexBuffer=function(e,t,r){return new n(e,e.ELEMENT_ARRAY_BUFFER,t,r)},n.create=function(e,t,r,i){return new n(e,t,r,i)},n.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=n},function(e,t,r){var n=r(83),i=function(e,t,r){this.gl=e,this.framebuffer=e.createFramebuffer(),this.stencil=null,this.texture=null,this.width=t||100,this.height=r||100};i.prototype.enableTexture=function(e){var t=this.gl;this.texture=e||new n(t),this.texture.bind(),this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0)},i.prototype.enableStencil=function(){if(!this.stencil){var e=this.gl;this.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height)}},i.prototype.clear=function(e,t,r,n){this.bind();var i=this.gl;i.clearColor(e,t,r,n),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)},i.prototype.bind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)},i.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},i.prototype.resize=function(e,t){var r=this.gl;this.width=e,this.height=t,this.texture&&this.texture.uploadData(null,e,t),this.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e,t))},i.prototype.destroy=function(){var e=this.gl;this.texture&&this.texture.destroy(),e.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},i.createRGBA=function(e,t,r,o){var a=n.fromData(e,null,t,r);a.enableNearestScaling(),a.enableWrapClamp();var s=new i(e,t,r);return s.enableTexture(a),s.unbind(),s},i.createFloat32=function(e,t,r,o){var a=new n.fromData(e,o,t,r);a.enableNearestScaling(),a.enableWrapClamp();var s=new i(e,t,r);return s.enableTexture(a),s.unbind(),s},e.exports=i},function(e,t,r){var n=r(84),i=r(85),o=r(87),a=r(89),s=r(90),u=function(e,t,r,u,l){this.gl=e,u&&(t=a(t,u),r=a(r,u)),this.program=n(e,t,r,l),this.attributes=i(e,this.program),this.uniformData=o(e,this.program),this.uniforms=s(e,this.uniformData)};u.prototype.bind=function(){this.gl.useProgram(this.program)},u.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},e.exports=u},function(e,t,r){function VertexArrayObject(e,t){if(this.nativeVaoExtension=null,VertexArrayObject.FORCE_NATIVE||(this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=t,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=e.getParameter(e.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(r),attribState:new Array(r)}}this.gl=e,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var n=r(82);VertexArrayObject.prototype.constructor=VertexArrayObject,e.exports=VertexArrayObject,VertexArrayObject.FORCE_NATIVE=!1,VertexArrayObject.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},VertexArrayObject.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},VertexArrayObject.prototype.activate=function(){for(var e=this.gl,t=null,r=0;r<this.attributes.length;r++){var i=this.attributes[r];t!==i.buffer&&(i.buffer.bind(),t=i.buffer),e.vertexAttribPointer(i.attribute.location,i.attribute.size,i.type||e.FLOAT,i.normalized||!1,i.stride||0,i.start||0)}return n(e,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},VertexArrayObject.prototype.addAttribute=function(e,t,r,n,i,o){return this.attributes.push({buffer:e,attribute:t,location:t.location,type:r||this.gl.FLOAT,normalized:n||!1,stride:i||0,start:o||0}),this.dirty=!0,this},VertexArrayObject.prototype.addIndex=function(e){return this.indexBuffer=e,this.dirty=!0,this},VertexArrayObject.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},VertexArrayObject.prototype.draw=function(e,t,r){var n=this.gl;return this.indexBuffer?n.drawElements(e,t||this.indexBuffer.data.length,n.UNSIGNED_SHORT,2*(r||0)):n.drawArrays(e,r,t||this.getSize()),this},VertexArrayObject.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},VertexArrayObject.prototype.getSize=function(){var e=this.attributes[0];return e.buffer.data.length/(e.stride/4||e.attribute.size)}},function(e,t,r){e.exports={compileProgram:r(84),defaultValue:r(88),extractAttributes:r(85),extractUniforms:r(87),generateUniformAccessObject:r(90),setPrecision:r(89),mapSize:r(86),mapType:r(54)}},function(e,t,r){"use strict";function maxRecommendedTextures(e){return i.default.tablet||i.default.phone?4:e}t.__esModule=!0,t.default=maxRecommendedTextures;var n=r(56),i=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";function canUploadSameBuffer(){return!(!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}t.__esModule=!0,t.default=canUploadSameBuffer},function(e,t,r){"use strict";function pluginTarget(e){e.__plugins={},e.registerPlugin=function(t,r){e.__plugins[t]=r},e.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var t in e.__plugins)this.plugins[t]=new e.__plugins[t](this)},e.prototype.destroyPlugins=function(){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;this.plugins=null}}t.__esModule=!0,t.default={mixin:function(e){pluginTarget(e)}}},function(e,t,r){"use strict";function mixin(e,t){if(e&&t)for(var r=Object.keys(t),n=0;n<r.length;++n){var i=r[n];Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}}function delayMixin(e,t){n.push(e,t)}function performMixins(){for(var e=0;e<n.length;e+=2)mixin(n[e],n[e+1]);n.length=0}t.__esModule=!0,t.mixin=mixin,t.delayMixin=delayMixin,t.performMixins=performMixins;var n=[]},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=e.length;if(!(t>=i||0===r)){r=t+r>i?i-t:r;var o=i-r;for(n=t;n<o;++n)e[n]=e[n+r];e.length=o}}},function(e,t,r){"use strict";function mapPremultipliedBlendModes(){for(var e=[],t=[],r=0;r<32;r++)e[r]=r,t[r]=r;e[n.BLEND_MODES.NORMAL_NPM]=n.BLEND_MODES.NORMAL,e[n.BLEND_MODES.ADD_NPM]=n.BLEND_MODES.ADD,e[n.BLEND_MODES.SCREEN_NPM]=n.BLEND_MODES.SCREEN,t[n.BLEND_MODES.NORMAL]=n.BLEND_MODES.NORMAL_NPM,t[n.BLEND_MODES.ADD]=n.BLEND_MODES.ADD_NPM,t[n.BLEND_MODES.SCREEN]=n.BLEND_MODES.SCREEN_NPM;var i=[];return i.push(t),i.push(e),i}t.__esModule=!0,t.default=mapPremultipliedBlendModes;var n=r(1)},function(e,t,r){"use strict";function determineCrossOrigin(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===e.indexOf("data:"))return"";t=t||window.location,o||(o=document.createElement("a")),o.href=e,e=i.default.parse(o.href);var r=!e.port&&""===t.port||e.port===t.port;return e.hostname===t.hostname&&r&&e.protocol===t.protocol?"":"anonymous"}t.__esModule=!0,t.default=determineCrossOrigin;var n=r(94),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=void 0},function(e,t,r){(function(e,n){var i;!function(o){function error(e){throw new RangeError(b[e])}function map(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function mapDomain(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(m,"."),n+map(e.split("."),t).join(".")}function ucs2decode(e){for(var t,r,n=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--)):n.push(t);return n}function ucs2encode(e){return map(e,function(e){var t="";return e>65535&&(e-=65536,t+=w(e>>>10&1023|55296),e=56320|1023&e),t+=w(e)}).join("")}function basicToDigit(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:l}function digitToBasic(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function adapt(e,t,r){var n=0;for(e=r?T(e/d):e>>1,e+=T(e/t);e>x*c>>1;n+=l)e=T(e/x);return T(n+(x+1)*e/(e+f))}function decode(e){var t,r,n,i,o,a,s,f,d,y,g=[],m=e.length,b=0,x=_,w=p;for(r=e.lastIndexOf(v),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&error("not-basic"),g.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<m;){for(o=b,a=1,s=l;i>=m&&error("invalid-input"),f=basicToDigit(e.charCodeAt(i++)),(f>=l||f>T((u-b)/a))&&error("overflow"),b+=f*a,d=s<=w?h:s>=w+c?c:s-w,!(f<d);s+=l)y=l-d,a>T(u/y)&&error("overflow"),a*=y;t=g.length+1,w=adapt(b-o,t,0==o),T(b/t)>u-x&&error("overflow"),x+=T(b/t),b%=t,g.splice(b++,0,x)}return ucs2encode(g)}function encode(e){var t,r,n,i,o,a,s,f,d,y,g,m,b,x,E,C=[];for(e=ucs2decode(e),m=e.length,t=_,r=0,o=p,a=0;a<m;++a)(g=e[a])<128&&C.push(w(g));for(n=i=C.length,i&&C.push(v);n<m;){for(s=u,a=0;a<m;++a)(g=e[a])>=t&&g<s&&(s=g);for(b=n+1,s-t>T((u-r)/b)&&error("overflow"),r+=(s-t)*b,t=s,a=0;a<m;++a)if(g=e[a],g<t&&++r>u&&error("overflow"),g==t){for(f=r,d=l;y=d<=o?h:d>=o+c?c:d-o,!(f<y);d+=l)E=f-y,x=l-y,C.push(w(digitToBasic(y+E%x,0))),f=T(E/x);C.push(w(digitToBasic(f,0))),o=adapt(r,b,n==i),r=0,++n}++r,++t}return C.join("")}function toUnicode(e){return mapDomain(e,function(e){return y.test(e)?decode(e.slice(4).toLowerCase()):e})}function toASCII(e){return mapDomain(e,function(e){return g.test(e)?"xn--"+encode(e):e})}var a=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof n&&n);var s,u=2147483647,l=36,h=1,c=26,f=38,d=700,p=72,_=128,v="-",y=/^xn--/,g=/[^\x20-\x7E]/,m=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=l-h,T=Math.floor,w=String.fromCharCode;s={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode},void 0!==(i=function(){return s}.call(t,r,t,e))&&(e.exports=i)}()}).call(t,r(203)(e),r(50))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";t.decode=t.parse=r(206),t.encode=t.stringify=r(207)},function(e,t,r){"use strict";function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,i){t=t||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var a=/\+/g;e=e.split(t);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var u=e.length;s>0&&u>s&&(u=s);for(var l=0;l<u;++l){var h,c,f,d,p=e[l].replace(a,"%20"),_=p.indexOf(r);_>=0?(h=p.substr(0,_),c=p.substr(_+1)):(h=p,c=""),f=decodeURIComponent(h),d=decodeURIComponent(c),hasOwnProperty(o,f)?n(o[f])?o[f].push(d):o[f]=[o[f],d]:o[f]=d}return o};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function map(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?map(o(e),function(o){var a=encodeURIComponent(n(o))+r;return i(e[o])?map(e[o],function(e){return a+encodeURIComponent(n(e))}).join(t):a+encodeURIComponent(n(e[o]))}).join(t):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(3),o=_interopRequireDefault(i),a=r(1),s=r(209),u=_interopRequireDefault(s),l=function(){function Ticker(){var e=this;_classCallCheck(this,Ticker),this._head=new u.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/o.default.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return Ticker.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},Ticker.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Ticker.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Ticker.prototype.add=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.UPDATE_PRIORITY.NORMAL;return this._addListener(new u.default(e,t,r))},Ticker.prototype.addOnce=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.UPDATE_PRIORITY.NORMAL;return this._addListener(new u.default(e,t,r,!0))},Ticker.prototype._addListener=function(e){var t=this._head.next,r=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}else e.connect(r);return this._startIfPossible(),this},Ticker.prototype.remove=function(e,t){for(var r=this._head.next;r;)r=r.match(e,t)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Ticker.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Ticker.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Ticker.prototype.destroy=function(){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null},Ticker.prototype.update=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),t=void 0;if(e>this.lastTime){t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*o.default.TARGET_FPMS*this.speed;for(var r=this._head,n=r.next;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=e},n(Ticker,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(Math.max(0,e)/1e3,o.default.TARGET_FPMS);this._maxElapsedMS=1/t}}]),Ticker}();t.default=l},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function TickerListener(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,TickerListener),this.fn=e,this.context=t,this.priority=r,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}return TickerListener.prototype.match=function(e,t){return t=t||null,this.fn===e&&this.context===t},TickerListener.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},TickerListener.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},TickerListener.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.previous;return this.next=e?null:t,this.previous=null,t},TickerListener}();t.default=n},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(24),i=_interopRequireDefault(n),o=r(1),a=r(4),s=r(62),u=_interopRequireDefault(s),l=new a.Matrix,h=function(){function CanvasSpriteRenderer(e){_classCallCheck(this,CanvasSpriteRenderer),this.renderer=e}return CanvasSpriteRenderer.prototype.render=function(e){var t=e._texture,r=this.renderer,n=t._frame.width,i=t._frame.height,s=e.transform.worldTransform,h=0,c=0;if(!(t.orig.width<=0||t.orig.height<=0)&&t.baseTexture.source&&(r.setBlendMode(e.blendMode),t.valid)){r.context.globalAlpha=e.worldAlpha;var f=t.baseTexture.scaleMode===o.SCALE_MODES.LINEAR;r.smoothProperty&&r.context[r.smoothProperty]!==f&&(r.context[r.smoothProperty]=f),t.trim?(h=t.trim.width/2+t.trim.x-e.anchor.x*t.orig.width,c=t.trim.height/2+t.trim.y-e.anchor.y*t.orig.height):(h=(.5-e.anchor.x)*t.orig.width,c=(.5-e.anchor.y)*t.orig.height),t.rotate&&(s.copy(l),s=l,a.GroupD8.matrixAppendRotationInv(s,t.rotate,h,c),h=0,c=0),h-=n/2,c-=i/2,r.roundPixels?(r.context.setTransform(s.a,s.b,s.c,s.d,s.tx*r.resolution|0,s.ty*r.resolution|0),h|=0,c|=0):r.context.setTransform(s.a,s.b,s.c,s.d,s.tx*r.resolution,s.ty*r.resolution);var d=t.baseTexture.resolution;16777215!==e.tint?(e.cachedTint===e.tint&&e.tintedTexture.tintId===e._texture._updateID||(e.cachedTint=e.tint,e.tintedTexture=u.default.getTintedTexture(e,e.tint)),r.context.drawImage(e.tintedTexture,0,0,n*d,i*d,h*r.resolution,c*r.resolution,n*r.resolution,i*r.resolution)):r.context.drawImage(t.baseTexture.source,t._frame.x*d,t._frame.y*d,n*d,i*d,h*r.resolution,c*r.resolution,n*r.resolution,i*r.resolution)}},CanvasSpriteRenderer.prototype.destroy=function(){this.renderer=null},CanvasSpriteRenderer}();t.default=h,i.default.registerPlugin("sprite",h)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(1),i=function(){function CanvasMaskManager(e){_classCallCheck(this,CanvasMaskManager),this.renderer=e}return CanvasMaskManager.prototype.pushMask=function(e){var t=this.renderer;t.context.save();var r=e.alpha,n=e.transform.worldTransform,i=t.resolution;t.context.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),e._texture||(this.renderGraphicsShape(e),t.context.clip()),e.worldAlpha=r},CanvasMaskManager.prototype.renderGraphicsShape=function(e){var t=this.renderer.context,r=e.graphicsData.length;if(0!==r){t.beginPath();for(var i=0;i<r;i++){var o=e.graphicsData[i],a=o.shape;if(o.type===n.SHAPES.POLY){var s=a.points;t.moveTo(s[0],s[1]);for(var u=1;u<s.length/2;u++)t.lineTo(s[2*u],s[2*u+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&t.closePath()}else if(o.type===n.SHAPES.RECT)t.rect(a.x,a.y,a.width,a.height),t.closePath();else if(o.type===n.SHAPES.CIRC)t.arc(a.x,a.y,a.radius,0,2*Math.PI),t.closePath();else if(o.type===n.SHAPES.ELIP){var l=2*a.width,h=2*a.height,c=a.x-l/2,f=a.y-h/2,d=l/2*.5522848,p=h/2*.5522848,_=c+l,v=f+h,y=c+l/2,g=f+h/2;t.moveTo(c,g),t.bezierCurveTo(c,g-p,y-d,f,y,f),t.bezierCurveTo(y+d,f,_,g-p,_,g),t.bezierCurveTo(_,g+p,y+d,v,y,v),t.bezierCurveTo(y-d,v,c,g+p,c,g),t.closePath()}else if(o.type===n.SHAPES.RREC){var m=a.x,b=a.y,x=a.width,T=a.height,w=a.radius,E=Math.min(x,T)/2|0;w=w>E?E:w,t.moveTo(m,b+w),t.lineTo(m,b+T-w),t.quadraticCurveTo(m,b+T,m+w,b+T),t.lineTo(m+x-w,b+T),t.quadraticCurveTo(m+x,b+T,m+x,b+T-w),t.lineTo(m+x,b+w),t.quadraticCurveTo(m+x,b,m+x-w,b),t.lineTo(m+w,b),t.quadraticCurveTo(m,b,m,b+w),t.closePath()}}}},CanvasMaskManager.prototype.popMask=function(e){e.context.restore()},CanvasMaskManager.prototype.destroy=function(){},CanvasMaskManager}();t.default=i},function(e,t,r){"use strict";function mapCanvasBlendModesToPixi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,o.default)()?(e[n.BLEND_MODES.NORMAL]="source-over",e[n.BLEND_MODES.ADD]="lighter",e[n.BLEND_MODES.MULTIPLY]="multiply",e[n.BLEND_MODES.SCREEN]="screen",e[n.BLEND_MODES.OVERLAY]="overlay",e[n.BLEND_MODES.DARKEN]="darken",e[n.BLEND_MODES.LIGHTEN]="lighten",e[n.BLEND_MODES.COLOR_DODGE]="color-dodge",e[n.BLEND_MODES.COLOR_BURN]="color-burn",e[n.BLEND_MODES.HARD_LIGHT]="hard-light",e[n.BLEND_MODES.SOFT_LIGHT]="soft-light",e[n.BLEND_MODES.DIFFERENCE]="difference",e[n.BLEND_MODES.EXCLUSION]="exclusion",e[n.BLEND_MODES.HUE]="hue",e[n.BLEND_MODES.SATURATION]="saturate",e[n.BLEND_MODES.COLOR]="color",e[n.BLEND_MODES.LUMINOSITY]="luminosity"):(e[n.BLEND_MODES.NORMAL]="source-over",e[n.BLEND_MODES.ADD]="lighter",e[n.BLEND_MODES.MULTIPLY]="source-over",e[n.BLEND_MODES.SCREEN]="source-over",e[n.BLEND_MODES.OVERLAY]="source-over",e[n.BLEND_MODES.DARKEN]="source-over",e[n.BLEND_MODES.LIGHTEN]="source-over",e[n.BLEND_MODES.COLOR_DODGE]="source-over",e[n.BLEND_MODES.COLOR_BURN]="source-over",e[n.BLEND_MODES.HARD_LIGHT]="source-over",e[n.BLEND_MODES.SOFT_LIGHT]="source-over",e[n.BLEND_MODES.DIFFERENCE]="source-over",e[n.BLEND_MODES.EXCLUSION]="source-over",e[n.BLEND_MODES.HUE]="source-over",e[n.BLEND_MODES.SATURATION]="source-over",e[n.BLEND_MODES.COLOR]="source-over",e[n.BLEND_MODES.LUMINOSITY]="source-over"),e[n.BLEND_MODES.NORMAL_NPM]=e[n.BLEND_MODES.NORMAL],e[n.BLEND_MODES.ADD_NPM]=e[n.BLEND_MODES.ADD],e[n.BLEND_MODES.SCREEN_NPM]=e[n.BLEND_MODES.SCREEN],e}t.__esModule=!0,t.default=mapCanvasBlendModesToPixi;var n=r(1),i=r(100),o=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(33),i=_interopRequireDefault(n),o=r(34),a=_interopRequireDefault(o),s=r(63),u=_interopRequireDefault(s),l=r(226),h=_interopRequireDefault(l),c=r(227),f=_interopRequireDefault(c),d=r(228),p=_interopRequireDefault(d),_=r(3),v=_interopRequireDefault(_),y=r(2),g=r(5),m=_interopRequireDefault(g),b=r(59),x=_interopRequireDefault(b),T=0,w=0,E=function(e){function SpriteRenderer(t){_classCallCheck(this,SpriteRenderer);var r=_possibleConstructorReturn(this,e.call(this,t));r.vertSize=5,r.vertByteSize=4*r.vertSize,r.size=v.default.SPRITE_BATCH_SIZE,r.buffers=[];for(var n=1;n<=x.default.nextPow2(r.size);n*=2)r.buffers.push(new p.default(4*n*r.vertByteSize));r.indices=(0,u.default)(r.size),r.shader=null,r.currentIndex=0,r.groups=[];for(var i=0;i<r.size;i++)r.groups[i]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return r.sprites=[],r.vertexBuffers=[],r.vaos=[],r.vaoMax=2,r.vertexCount=0,r.renderer.on("prerender",r.onPrerender,r),r}return _inherits(SpriteRenderer,e),SpriteRenderer.prototype.onContextChange=function(){var e=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),v.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,f.default)(this.MAX_TEXTURES,e)),this.shader=(0,h.default)(e,this.MAX_TEXTURES),this.indexBuffer=m.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.renderer.bindVao(null);for(var t=this.shader.attributes,r=0;r<this.vaoMax;r++){var n=this.vertexBuffers[r]=m.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),i=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(n,t.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(n,t.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(n,t.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);t.aTextureId&&i.addAttribute(n,t.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[r]=i}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},SpriteRenderer.prototype.onPrerender=function(){this.vertexCount=0},SpriteRenderer.prototype.render=function(e){this.currentIndex>=this.size&&this.flush(),e._texture._uvs&&(this.sprites[this.currentIndex++]=e)},SpriteRenderer.prototype.flush=function(){if(0!==this.currentIndex){var e=this.renderer.gl,t=this.MAX_TEXTURES,r=x.default.nextPow2(this.currentIndex),n=x.default.log2(r),i=this.buffers[n],o=this.sprites,a=this.groups,s=i.float32View,u=i.uint32View,l=this.boundTextures,h=this.renderer.boundTextures,c=this.renderer.textureGC.count,f=0,d=void 0,p=void 0,_=1,g=0,b=a[0],E=void 0,C=void 0,R=y.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];b.textureCount=0,b.start=0,b.blend=R,T++;var S=void 0;for(S=0;S<t;++S)l[S]=h[S],l[S]._virtalBoundId=S;for(S=0;S<this.currentIndex;++S){var P=o[S];d=P._texture.baseTexture;var O=y.premultiplyBlendMode[Number(d.premultipliedAlpha)][P.blendMode];if(R!==O&&(R=O,p=null,g=t,T++),p!==d&&(p=d,d._enabled!==T)){if(g===t&&(T++,b.size=S-b.start,g=0,b=a[_++],b.blend=R,b.textureCount=0,b.start=S),d.touched=c,-1===d._virtalBoundId)for(var M=0;M<t;++M){var D=(M+w)%t,A=l[D];if(A._enabled!==T){w++,A._virtalBoundId=-1,d._virtalBoundId=D,l[D]=d;break}}d._enabled=T,b.textureCount++,b.ids[g]=d._virtalBoundId,b.textures[g++]=d}if(E=P.vertexData,C=P._texture._uvs.uvsUint32,this.renderer.roundPixels){var I=this.renderer.resolution;s[f]=(E[0]*I|0)/I,s[f+1]=(E[1]*I|0)/I,s[f+5]=(E[2]*I|0)/I,s[f+6]=(E[3]*I|0)/I,s[f+10]=(E[4]*I|0)/I,s[f+11]=(E[5]*I|0)/I,s[f+15]=(E[6]*I|0)/I,s[f+16]=(E[7]*I|0)/I}else s[f]=E[0],s[f+1]=E[1],s[f+5]=E[2],s[f+6]=E[3],s[f+10]=E[4],s[f+11]=E[5],s[f+15]=E[6],s[f+16]=E[7];u[f+2]=C[0],u[f+7]=C[1],u[f+12]=C[2],u[f+17]=C[3];var L=Math.min(P.worldAlpha,1),k=L<1&&d.premultipliedAlpha?(0,y.premultiplyTint)(P._tintRGB,L):P._tintRGB+(255*L<<24);u[f+3]=u[f+8]=u[f+13]=u[f+18]=k,s[f+4]=s[f+9]=s[f+14]=s[f+19]=d._virtalBoundId,f+=20}if(b.size=S-b.start,v.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var F=this.shader.attributes,N=this.vertexBuffers[this.vertexCount]=m.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),B=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(N,F.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(N,F.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(N,F.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);F.aTextureId&&B.addAttribute(N,F.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=B}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!1),this.vertexCount++}for(S=0;S<t;++S)h[S]._virtalBoundId=-1;for(S=0;S<_;++S){for(var j=a[S],U=j.textureCount,q=0;q<U;q++)p=j.textures[q],h[j.ids[q]]!==p&&this.renderer.bindTexture(p,j.ids[q],!0),p._virtalBoundId=-1;this.renderer.state.setBlendMode(j.blend),e.drawElements(e.TRIANGLES,6*j.size,e.UNSIGNED_SHORT,6*j.start*2)}this.currentIndex=0}},SpriteRenderer.prototype.start=function(){this.renderer.bindShader(this.shader),v.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},SpriteRenderer.prototype.stop=function(){this.flush()},SpriteRenderer.prototype.destroy=function(){for(var t=0;t<this.vaoMax;t++)this.vertexBuffers[t]&&this.vertexBuffers[t].destroy(),this.vaos[t]&&this.vaos[t].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var r=0;r<this.buffers.length;++r)this.buffers[r].destroy()},SpriteRenderer}(i.default);t.default=E,a.default.registerPlugin("sprite",E)},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(25),i=_interopRequireDefault(n),o=r(101),a=_interopRequireDefault(o),s=function(e){function MaskManager(t){_classCallCheck(this,MaskManager);var r=_possibleConstructorReturn(this,e.call(this,t));return r.scissor=!1,r.scissorData=null,r.scissorRenderTarget=null,r.enableScissor=!0,r.alphaMaskPool=[],r.alphaMaskIndex=0,r}return _inherits(MaskManager,e),MaskManager.prototype.pushMask=function(e,t){if(t.texture)this.pushSpriteMask(e,t);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&t.isFastRect()){var r=t.worldTransform,n=Math.atan2(r.b,r.a);n=Math.round(n*(180/Math.PI)),n%90?this.pushStencilMask(t):this.pushScissorMask(e,t)}else this.pushStencilMask(t)},MaskManager.prototype.popMask=function(e,t){t.texture?this.popSpriteMask(e,t):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(e,t):this.popStencilMask(e,t)},MaskManager.prototype.pushSpriteMask=function(e,t){var r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new a.default(t)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=t,e.filterArea=t.getBounds(!0),this.renderer.filterManager.pushFilter(e,r),this.alphaMaskIndex++},MaskManager.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},MaskManager.prototype.pushStencilMask=function(e){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(e)},MaskManager.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},MaskManager.prototype.pushScissorMask=function(e,t){t.renderable=!0;var r=this.renderer._activeRenderTarget,n=t.getBounds();n.fit(r.size),t.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var i=this.renderer.resolution;this.renderer.gl.scissor(n.x*i,(r.root?r.size.height-n.y-n.height:n.y)*i,n.width*i,n.height*i),this.scissorRenderTarget=r,this.scissorData=t,this.scissor=!0},MaskManager.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var e=this.renderer.gl;e.disable(e.SCISSOR_TEST)},MaskManager}(i.default);t.default=s},function(e,t,r){"use strict";function extractUniformsFromSrc(e,t,r){var n=extractUniformsFromString(e),i=extractUniformsFromString(t);return Object.assign(n,i)}function extractUniformsFromString(e){for(var t=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),r={},n=void 0,i=e.replace(/\s+/g," ").split(/\s*;\s*/),a=0;a<i.length;a++){var s=i[a].trim();if(s.indexOf("uniform")>-1){var u=s.split(" "),l=u[1],h=u[2],c=1;h.indexOf("[")>-1&&(n=h.split(/\[|]/),h=n[0],c*=Number(n[1])),h.match(t)||(r[h]={value:o(l,c),name:h,type:l})}}return r}t.__esModule=!0,t.default=extractUniformsFromSrc;var n=r(5),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=i.default.shader.defaultValue},function(e,t){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(r===setTimeout)return setTimeout(e,0);if((r===defaultSetTimout||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function runClearTimeout(e){if(n===clearTimeout)return clearTimeout(e);if((n===defaultClearTimeout||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}function cleanUpNextTick(){s&&o&&(s=!1,o.length?a=o.concat(a):u=-1,a.length&&drainQueue())}function drainQueue(){if(!s){var e=runTimeout(cleanUpNextTick);s=!0;for(var t=a.length;t;){for(o=a,a=[];++u<t;)o&&o[u].run();u=-1,t=a.length}o=null,s=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var r,n,i=e.exports={};!function(){try{r="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){r=defaultSetTimout}try{n="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){n=defaultClearTimeout}}();var o,a=[],s=!1,u=-1;i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];a.push(new Item(e,t)),1!==a.length||s||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=noop,i.addListener=noop,i.once=noop,i.off=noop,i.removeListener=noop,i.removeAllListeners=noop,i.emit=noop,i.prependListener=noop,i.prependOnceListener=noop,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(25),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=function(e){function StencilManager(t){_classCallCheck(this,StencilManager);var r=_possibleConstructorReturn(this,e.call(this,t));return r.stencilMaskStack=null,r}return _inherits(StencilManager,e),StencilManager.prototype.setMaskStack=function(e){this.stencilMaskStack=e;var t=this.renderer.gl;0===e.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},StencilManager.prototype.pushStencil=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var t=this.renderer.gl,r=this.stencilMaskStack;0===r.length&&(t.enable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.stencilFunc(t.ALWAYS,1,1)),r.push(e),t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.INCR),this.renderer.plugins.graphics.render(e),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,r.length),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},StencilManager.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var e=this.renderer.gl,t=this.stencilMaskStack,r=t.pop();0===t.length?e.disable(e.STENCIL_TEST):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),this.renderer.plugins.graphics.render(r),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,t.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP))},StencilManager.prototype.destroy=function(){i.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},StencilManager}(i.default);t.default=o},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(25),i=_interopRequireDefault(n),o=r(35),a=_interopRequireDefault(o),s=r(103),u=_interopRequireDefault(s),l=r(4),h=r(26),c=_interopRequireDefault(h),f=r(219),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(f),p=r(59),_=_interopRequireDefault(p),v=function FilterState(){_classCallCheck(this,FilterState),this.renderTarget=null,this.sourceFrame=new l.Rectangle,this.destinationFrame=new l.Rectangle,this.filters=[],this.target=null,this.resolution=1},y=function(e){function FilterManager(t){_classCallCheck(this,FilterManager);var r=_possibleConstructorReturn(this,e.call(this,t));return r.gl=r.renderer.gl,r.quad=new u.default(r.gl,t.state.attribState),r.shaderCache={},r.pool={},r.filterData=null,r}return _inherits(FilterManager,e),FilterManager.prototype.pushFilter=function(e,t){var r=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var i=new v;i.sourceFrame=i.destinationFrame=this.renderer._activeRenderTarget.size,i.renderTarget=r._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[i]},this.filterData=n}var o=n.stack[++n.index];o||(o=n.stack[n.index]=new v);var a=t[0].resolution,s=0|t[0].padding,u=e.filterArea||e.getBounds(!0),l=o.sourceFrame,h=o.destinationFrame;l.x=(u.x*a|0)/a,l.y=(u.y*a|0)/a,l.width=(u.width*a|0)/a,l.height=(u.height*a|0)/a,n.stack[0].renderTarget.transform||t[0].autoFit&&l.fit(n.stack[0].destinationFrame),l.pad(s),h.width=l.width,h.height=l.height;var c=this.getPotRenderTarget(r.gl,l.width,l.height,a);o.target=e,o.filters=t,o.resolution=a,o.renderTarget=c,c.setFrame(h,l),r.bindRenderTarget(c),c.clear()},FilterManager.prototype.popFilter=function(){var e=this.filterData,t=e.stack[e.index-1],r=e.stack[e.index];this.quad.map(r.renderTarget.size,r.sourceFrame).upload();var n=r.filters;if(1===n.length)n[0].apply(this,r.renderTarget,t.renderTarget,!1,r),this.freePotRenderTarget(r.renderTarget);else{var i=r.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,r.resolution);o.setFrame(r.destinationFrame,r.sourceFrame),o.clear();var a=0;for(a=0;a<n.length-1;++a){n[a].apply(this,i,o,!0,r);var s=i;i=o,o=s}n[a].apply(this,i,t.renderTarget,!1,r),this.freePotRenderTarget(i),this.freePotRenderTarget(o)}0===--e.index&&(this.filterData=null)},FilterManager.prototype.applyFilter=function(e,t,r,n){var i=this.renderer,o=i.gl,a=e.glShaders[i.CONTEXT_UID];a||(e.glShaderKey?(a=this.shaderCache[e.glShaderKey])||(a=new c.default(this.gl,e.vertexSrc,e.fragmentSrc),e.glShaders[i.CONTEXT_UID]=this.shaderCache[e.glShaderKey]=a):a=e.glShaders[i.CONTEXT_UID]=new c.default(this.gl,e.vertexSrc,e.fragmentSrc),i.bindVao(null),this.quad.initVao(a)),i.bindVao(this.quad.vao),i.bindRenderTarget(r),n&&(o.disable(o.SCISSOR_TEST),i.clear(),o.enable(o.SCISSOR_TEST)),r===i.maskManager.scissorRenderTarget&&i.maskManager.pushScissorMask(null,i.maskManager.scissorData),i.bindShader(a);var s=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=s,this.syncUniforms(a,e),i.state.setBlendMode(e.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)},FilterManager.prototype.syncUniforms=function(e,t){var r=t.uniformData,n=t.uniforms,i=1,o=void 0;if(e.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var a=e.uniforms.filterArea;a[0]=o.renderTarget.size.width,a[1]=o.renderTarget.size.height,a[2]=o.sourceFrame.x,a[3]=o.sourceFrame.y,e.uniforms.filterArea=a}if(e.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var s=e.uniforms.filterClamp;s[0]=0,s[1]=0,s[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,s[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,e.uniforms.filterClamp=s}for(var u in r)if("sampler2D"===r[u].type&&0!==n[u]){if(n[u].baseTexture)e.uniforms[u]=this.renderer.bindTexture(n[u].baseTexture,i);else{e.uniforms[u]=i;var l=this.renderer.gl;this.renderer.boundTextures[i]=this.renderer.emptyTextures[i],l.activeTexture(l.TEXTURE0+i),n[u].texture.bind()}i++}else if("mat3"===r[u].type)void 0!==n[u].a?e.uniforms[u]=n[u].toArray(!0):e.uniforms[u]=n[u];else if("vec2"===r[u].type)if(void 0!==n[u].x){var h=e.uniforms[u]||new Float32Array(2);h[0]=n[u].x,h[1]=n[u].y,e.uniforms[u]=h}else e.uniforms[u]=n[u];else"float"===r[u].type?e.uniforms.data[u].value!==r[u]&&(e.uniforms[u]=n[u]):e.uniforms[u]=n[u]},FilterManager.prototype.getRenderTarget=function(e,t){var r=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,t||r.resolution);return n.setFrame(r.destinationFrame,r.sourceFrame),n},FilterManager.prototype.returnRenderTarget=function(e){this.freePotRenderTarget(e)},FilterManager.prototype.calculateScreenSpaceMatrix=function(e){var t=this.filterData.stack[this.filterData.index];return d.calculateScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size)},FilterManager.prototype.calculateNormalizedScreenSpaceMatrix=function(e){var t=this.filterData.stack[this.filterData.index];return d.calculateNormalizedScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size,t.destinationFrame)},FilterManager.prototype.calculateSpriteMatrix=function(e,t){var r=this.filterData.stack[this.filterData.index];return d.calculateSpriteMatrix(e,r.sourceFrame,r.renderTarget.size,t)},FilterManager.prototype.destroy=function(){this.shaderCache={},this.emptyPool()},FilterManager.prototype.getPotRenderTarget=function(e,t,r,n){t=_.default.nextPow2(t*n),r=_.default.nextPow2(r*n);var i=(65535&t)<<16|65535&r;this.pool[i]||(this.pool[i]=[]);var o=this.pool[i].pop();if(!o){var s=this.renderer.boundTextures[0];e.activeTexture(e.TEXTURE0),o=new a.default(e,t,r,null,1),e.bindTexture(e.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)}return o.resolution=n,o.defaultFrame.width=o.size.width=t/n,o.defaultFrame.height=o.size.height=r/n,o},FilterManager.prototype.emptyPool=function(){for(var e in this.pool){var t=this.pool[e];if(t)for(var r=0;r<t.length;r++)t[r].destroy(!0)}this.pool={}},FilterManager.prototype.freePotRenderTarget=function(e){var t=e.size.width*e.resolution,r=e.size.height*e.resolution,n=(65535&t)<<16|65535&r;this.pool[n].push(e)},FilterManager}(i.default);t.default=y},function(e,t,r){"use strict";function calculateScreenSpaceMatrix(e,t,r){var n=e.identity();return n.translate(t.x/r.width,t.y/r.height),n.scale(r.width,r.height),n}function calculateNormalizedScreenSpaceMatrix(e,t,r){var n=e.identity();n.translate(t.x/r.width,t.y/r.height);var i=r.width/t.width,o=r.height/t.height;return n.scale(i,o),n}function calculateSpriteMatrix(e,t,r,i){var o=i.worldTransform.copy(n.Matrix.TEMP_MATRIX),a=i._texture.baseTexture,s=e.identity(),u=r.height/r.width;s.translate(t.x/r.width,t.y/r.height),s.scale(1,u);var l=r.width/a.width,h=r.height/a.height;return o.tx/=a.width*l,o.ty/=a.width*l,o.invert(),s.prepend(o),s.scale(1,1/u),s.scale(l,h),s.translate(i.anchor.x,i.anchor.y),s}t.__esModule=!0,t.calculateScreenSpaceMatrix=calculateScreenSpaceMatrix,t.calculateNormalizedScreenSpaceMatrix=calculateNormalizedScreenSpaceMatrix,t.calculateSpriteMatrix=calculateSpriteMatrix;var n=r(4)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(5),i=r(1),o=r(35),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=r(2),u=function(){function TextureManager(e){_classCallCheck(this,TextureManager),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return TextureManager.prototype.bindTexture=function(){},TextureManager.prototype.getTexture=function(){},TextureManager.prototype.updateTexture=function(e,t){var r=this.gl,o=!!e._glRenderTargets;if(!e.hasLoaded)return null;var s=this.renderer.boundTextures;if(void 0===t){t=0;for(var u=0;u<s.length;++u)if(s[u]===e){t=u;break}}s[t]=e,r.activeTexture(r.TEXTURE0+t);var l=e._glTextures[this.renderer.CONTEXT_UID];if(l)o?e._glRenderTargets[this.renderer.CONTEXT_UID].resize(e.width,e.height):l.upload(e.source);else{if(o){var h=new a.default(this.gl,e.width,e.height,e.scaleMode,e.resolution);h.resize(e.width,e.height),e._glRenderTargets[this.renderer.CONTEXT_UID]=h,l=h.texture}else l=new n.GLTexture(this.gl,null,null,null,null),l.bind(t),l.premultiplyAlpha=!0,l.upload(e.source);e._glTextures[this.renderer.CONTEXT_UID]=l,e.on("update",this.updateTexture,this),e.on("dispose",this.destroyTexture,this),this._managedTextures.push(e),e.isPowerOfTwo?(e.mipmap&&l.enableMipmap(),e.wrapMode===i.WRAP_MODES.CLAMP?l.enableWrapClamp():e.wrapMode===i.WRAP_MODES.REPEAT?l.enableWrapRepeat():l.enableWrapMirrorRepeat()):l.enableWrapClamp(),e.scaleMode===i.SCALE_MODES.NEAREST?l.enableNearestScaling():l.enableLinearScaling()}return l},TextureManager.prototype.destroyTexture=function(e,t){if(e=e.baseTexture||e,e.hasLoaded&&e._glTextures[this.renderer.CONTEXT_UID]&&(this.renderer.unbindTexture(e),e._glTextures[this.renderer.CONTEXT_UID].destroy(),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.renderer.CONTEXT_UID],!t)){var r=this._managedTextures.indexOf(e);-1!==r&&(0,s.removeItems)(this._managedTextures,r,1)}},TextureManager.prototype.removeAll=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];t._glTextures[this.renderer.CONTEXT_UID]&&delete t._glTextures[this.renderer.CONTEXT_UID]}},TextureManager.prototype.destroy=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];this.destroyTexture(t,!0),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this)}this._managedTextures=null},TextureManager}();t.default=u},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(1),i=r(3),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(){function TextureGarbageCollector(e){_classCallCheck(this,TextureGarbageCollector),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=o.default.GC_MAX_IDLE,this.checkCountMax=o.default.GC_MAX_CHECK_COUNT,this.mode=o.default.GC_MODE}return TextureGarbageCollector.prototype.update=function(){this.count++,this.mode!==n.GC_MODES.MANUAL&&++this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())},TextureGarbageCollector.prototype.run=function(){for(var e=this.renderer.textureManager,t=e._managedTextures,r=!1,n=0;n<t.length;n++){var i=t[n];!i._glRenderTargets&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[n]=null,r=!0)}if(r){for(var o=0,a=0;a<t.length;a++)null!==t[a]&&(t[o++]=t[a]);t.length=o}},TextureGarbageCollector.prototype.unload=function(e){var t=this.renderer.textureManager;e._texture&&e._texture._glRenderTargets&&t.destroyTexture(e._texture,!0);for(var r=e.children.length-1;r>=0;r--)this.unload(e.children[r])},TextureGarbageCollector}();t.default=a},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(223),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=function(){function WebGLState(e){_classCallCheck(this,WebGLState),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,i.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return WebGLState.prototype.push=function(){var e=this.stack[this.stackIndex];e||(e=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var t=0;t<this.activeState.length;t++)e[t]=this.activeState[t]},WebGLState.prototype.pop=function(){var e=this.stack[--this.stackIndex];this.setState(e)},WebGLState.prototype.setState=function(e){this.setBlend(e[0]),this.setDepthTest(e[1]),this.setFrontFace(e[2]),this.setCullFace(e[3]),this.setBlendMode(e[4])},WebGLState.prototype.setBlend=function(e){e=e?1:0,this.activeState[0]!==e&&(this.activeState[0]=e,this.gl[e?"enable":"disable"](this.gl.BLEND))},WebGLState.prototype.setBlendMode=function(e){if(e!==this.activeState[4]){this.activeState[4]=e;var t=this.blendModes[e];2===t.length?this.gl.blendFunc(t[0],t[1]):this.gl.blendFuncSeparate(t[0],t[1],t[2],t[3])}},WebGLState.prototype.setDepthTest=function(e){e=e?1:0,this.activeState[1]!==e&&(this.activeState[1]=e,this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST))},WebGLState.prototype.setCullFace=function(e){e=e?1:0,this.activeState[3]!==e&&(this.activeState[3]=e,this.gl[e?"enable":"disable"](this.gl.CULL_FACE))},WebGLState.prototype.setFrontFace=function(e){e=e?1:0,this.activeState[2]!==e&&(this.activeState[2]=e,this.gl.frontFace(this.gl[e?"CW":"CCW"]))},WebGLState.prototype.resetAttributes=function(){for(var e=0;e<this.attribState.tempAttribState.length;e++)this.attribState.tempAttribState[e]=0;for(var t=0;t<this.attribState.attribState.length;t++)this.attribState.attribState[t]=0;for(var r=1;r<this.maxAttribs;r++)this.gl.disableVertexAttribArray(r)},WebGLState.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var e=0;e<this.activeState.length;++e)this.activeState[e]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},WebGLState}();t.default=o},function(e,t,r){"use strict";function mapWebGLBlendModesToPixi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[n.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.ADD]=[e.ONE,e.DST_ALPHA],t[n.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR],t[n.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.ADD_NPM]=[e.SRC_ALPHA,e.DST_ALPHA,e.ONE,e.DST_ALPHA],t[n.BLEND_MODES.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_COLOR],t}t.__esModule=!0,t.default=mapWebGLBlendModesToPixi;var n=r(1)},function(e,t,r){"use strict";function mapWebGLDrawModesToPixi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t[n.DRAW_MODES.POINTS]=e.POINTS,t[n.DRAW_MODES.LINES]=e.LINES,t[n.DRAW_MODES.LINE_LOOP]=e.LINE_LOOP,t[n.DRAW_MODES.LINE_STRIP]=e.LINE_STRIP,t[n.DRAW_MODES.TRIANGLES]=e.TRIANGLES,t[n.DRAW_MODES.TRIANGLE_STRIP]=e.TRIANGLE_STRIP,t[n.DRAW_MODES.TRIANGLE_FAN]=e.TRIANGLE_FAN,t}t.__esModule=!0,t.default=mapWebGLDrawModesToPixi;var n=r(1)},function(e,t,r){"use strict";function validateContext(e){e.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}t.__esModule=!0,t.default=validateContext},function(e,t,r){"use strict";function generateMultiTextureShader(e,t){var r=o;r=r.replace(/%count%/gi,t),r=r.replace(/%forloop%/gi,generateSampleSrc(t));for(var n=new i.default(e,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",r),a=[],s=0;s<t;s++)a[s]=s;return n.bind(),n.uniforms.uSamplers=a,n}function generateSampleSrc(e){var t="";t+="\n",t+="\n";for(var r=0;r<e;r++)r>0&&(t+="\nelse "),r<e-1&&(t+="if(textureId == "+r+".0)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",t+="\n}";return t+="\n",t+="\n"}t.__esModule=!0,t.default=generateMultiTextureShader;var n=r(26),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=(r(7),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},function(e,t,r){"use strict";function checkMaxIfStatmentsInShader(e,t){var r=!t;if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(r){var n=document.createElement("canvas");n.width=1,n.height=1,t=i.default.createContext(n)}for(var a=t.createShader(t.FRAGMENT_SHADER);;){var s=o.replace(/%forloop%/gi,generateIfTestSrc(e));if(t.shaderSource(a,s),t.compileShader(a),t.getShaderParameter(a,t.COMPILE_STATUS))break;e=e/2|0}return r&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").loseContext(),e}function generateIfTestSrc(e){for(var t="",r=0;r<e;++r)r>0&&(t+="\nelse "),r<e-1&&(t+="if(test == "+r+".0){}");return t}t.__esModule=!0,t.default=checkMaxIfStatmentsInShader;var n=r(5),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function Buffer(e){_classCallCheck(this,Buffer),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return Buffer.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},Buffer}();t.default=n},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(58),o=_interopRequireDefault(i),a=r(15),s=_interopRequireDefault(a),u=r(4),l=r(2),h=r(1),c=r(3),f=_interopRequireDefault(c),d=r(104),p=_interopRequireDefault(d),_=r(105),v=_interopRequireDefault(_),y=r(230),g=_interopRequireDefault(y),m={texture:!0,children:!1,baseTexture:!0},b=function(e){function Text(t,r,n){_classCallCheck(this,Text),n=n||document.createElement("canvas"),n.width=3,n.height=3;var i=s.default.fromCanvas(n,f.default.SCALE_MODE,"text");i.orig=new u.Rectangle,i.trim=new u.Rectangle;var o=_possibleConstructorReturn(this,e.call(this,i));return s.default.addToCache(o._texture,o._texture.baseTexture.textureCacheIds[0]),o.canvas=n,o.context=o.canvas.getContext("2d"),o.resolution=f.default.RESOLUTION,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=t,o.style=r,o.localStyleID=-1,o}return _inherits(Text,e),Text.prototype.updateText=function(e){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!e){this._font=this._style.toFontString();var r=this.context,n=v.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),i=n.width,o=n.height,a=n.lines,s=n.lineHeight,u=n.lineWidths,l=n.maxLineWidth,h=n.fontProperties;this.canvas.width=Math.ceil((i+2*t.padding)*this.resolution),this.canvas.height=Math.ceil((o+2*t.padding)*this.resolution),r.scale(this.resolution,this.resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.strokeStyle=t.stroke,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;var c=void 0,f=void 0;if(t.dropShadow){r.fillStyle=t.dropShadowColor,r.globalAlpha=t.dropShadowAlpha,r.shadowBlur=t.dropShadowBlur,t.dropShadowBlur>0&&(r.shadowColor=t.dropShadowColor);for(var d=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,p=Math.sin(t.dropShadowAngle)*t.dropShadowDistance,_=0;_<a.length;_++)c=t.strokeThickness/2,f=t.strokeThickness/2+_*s+h.ascent,"right"===t.align?c+=l-u[_]:"center"===t.align&&(c+=(l-u[_])/2),t.fill&&(this.drawLetterSpacing(a[_],c+d+t.padding,f+p+t.padding),t.stroke&&t.strokeThickness&&(r.strokeStyle=t.dropShadowColor,this.drawLetterSpacing(a[_],c+d+t.padding,f+p+t.padding,!0),r.strokeStyle=t.stroke))}r.shadowBlur=0,r.globalAlpha=1,r.fillStyle=this._generateFillStyle(t,a);for(var y=0;y<a.length;y++)c=t.strokeThickness/2,f=t.strokeThickness/2+y*s+h.ascent,"right"===t.align?c+=l-u[y]:"center"===t.align&&(c+=(l-u[y])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[y],c+t.padding,f+t.padding,!0),t.fill&&this.drawLetterSpacing(a[y],c+t.padding,f+t.padding);this.updateTexture()}},Text.prototype.drawLetterSpacing=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this._style,o=i.letterSpacing;if(0===o)return void(n?this.context.strokeText(e,t,r):this.context.fillText(e,t,r));for(var a=String.prototype.split.call(e,""),s=t,u=0,l="";u<e.length;)l=a[u++],n?this.context.strokeText(l,s,r):this.context.fillText(l,s,r),s+=this.context.measureText(l).width+o},Text.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var t=(0,g.default)(e);e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0)}var r=this._texture,n=this._style,i=n.trim?0:n.padding,o=r.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=e.width,o.realHeight=e.height,o.width=e.width/this.resolution,o.height=e.height/this.resolution,r.trim.width=r._frame.width=e.width/this.resolution,r.trim.height=r._frame.height=e.height/this.resolution,r.trim.x=-i,r.trim.y=-i,r.orig.width=r._frame.width-2*i,r.orig.height=r._frame.height-2*i,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},Text.prototype.renderWebGL=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype.renderWebGL.call(this,t)},Text.prototype._renderCanvas=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._renderCanvas.call(this,t)},Text.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},Text.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},Text.prototype._onStyleChange=function(){this.dirty=!0},Text.prototype._generateFillStyle=function(e,t){if(!Array.isArray(e.fill))return e.fill;if(navigator.isCocoonJS)return e.fill[0];var r=void 0,n=void 0,i=void 0,o=void 0,a=this.canvas.width/this.resolution,s=this.canvas.height/this.resolution,u=e.fill.slice(),l=e.fillGradientStops.slice();if(!l.length)for(var c=u.length+1,f=1;f<c;++f)l.push(f/c);if(u.unshift(e.fill[0]),l.unshift(0),u.push(e.fill[e.fill.length-1]),l.push(1),e.fillGradientType===h.TEXT_GRADIENT.LINEAR_VERTICAL){r=this.context.createLinearGradient(a/2,0,a/2,s),n=(u.length+1)*t.length,i=0;for(var d=0;d<t.length;d++){i+=1;for(var p=0;p<u.length;p++)o="number"==typeof l[p]?l[p]/t.length+d/t.length:i/n,r.addColorStop(o,u[p]),i++}}else{r=this.context.createLinearGradient(0,s/2,a,s/2),n=u.length+1,i=1;for(var _=0;_<u.length;_++)o="number"==typeof l[_]?l[_]:i/n,r.addColorStop(o,u[_]),i++}return r},Text.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},m,t),e.prototype.destroy.call(this,t),this.context=null,this.canvas=null,this._style=null},n(Text,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var t=(0,l.sign)(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var t=(0,l.sign)(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"style",get:function(){return this._style},set:function(e){e=e||{},e instanceof p.default?this._style=e:this._style=new p.default(e),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(e){e=String(""===e||null===e||void 0===e?" ":e),this._text!==e&&(this._text=e,this.dirty=!0)}}]),Text}(o.default);t.default=b},function(e,t,r){"use strict";function trimCanvas(e){var t=e.width,r=e.height,n=e.getContext("2d"),i=n.getImageData(0,0,t,r),o=i.data,a=o.length,s={top:null,left:null,right:null,bottom:null},u=void 0,l=void 0,h=void 0;for(u=0;u<a;u+=4)0!==o[u+3]&&(l=u/4%t,h=~~(u/4/t),null===s.top&&(s.top=h),null===s.left?s.left=l:l<s.left&&(s.left=l),null===s.right?s.right=l+1:s.right<l&&(s.right=l+1),null===s.bottom?s.bottom=h:s.bottom<h&&(s.bottom=h));return t=s.right-s.left,r=s.bottom-s.top+1,{height:r,width:t,data:n.getImageData(s.left,s.top,t,r)}}t.__esModule=!0,t.default=trimCanvas},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(23),i=_interopRequireDefault(n),o=r(61),a=_interopRequireDefault(o),s=r(15),u=_interopRequireDefault(s),l=r(106),h=_interopRequireDefault(l),c=r(58),f=_interopRequireDefault(c),d=r(4),p=r(2),_=r(1),v=r(55),y=_interopRequireDefault(v),g=r(232),m=_interopRequireDefault(g),b=r(24),x=_interopRequireDefault(b),T=void 0,w=new d.Matrix,E=new d.Point,C=new Float32Array(4),R=new Float32Array(4),S=function(e){function Graphics(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_classCallCheck(this,Graphics);var r=_possibleConstructorReturn(this,e.call(this));return r.fillAlpha=1,r.lineWidth=0,r.nativeLines=t,r.lineColor=0,r.graphicsData=[],r.tint=16777215,r._prevTint=16777215,r.blendMode=_.BLEND_MODES.NORMAL,r.currentPath=null,r._webGL={},r.isMask=!1,r.boundsPadding=0,r._localBounds=new y.default,r.dirty=0,r.fastRectDirty=-1,r.clearDirty=0,r.boundsDirty=-1,r.cachedSpriteDirty=!1,r._spriteRect=null,r._fastRect=!1,r}return _inherits(Graphics,e),Graphics.prototype.clone=function(){var e=new Graphics;e.renderable=this.renderable,e.fillAlpha=this.fillAlpha,e.lineWidth=this.lineWidth,e.lineColor=this.lineColor,e.tint=this.tint,e.blendMode=this.blendMode,e.isMask=this.isMask,e.boundsPadding=this.boundsPadding,e.dirty=0,e.cachedSpriteDirty=this.cachedSpriteDirty;for(var t=0;t<this.graphicsData.length;++t)e.graphicsData.push(this.graphicsData[t].clone());return e.currentPath=e.graphicsData[e.graphicsData.length-1],e.updateLocalBounds(),e},Graphics.prototype.lineStyle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=e,this.lineColor=t,this.lineAlpha=r,this.currentPath)if(this.currentPath.shape.points.length){var n=new d.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},Graphics.prototype.moveTo=function(e,t){var r=new d.Polygon([e,t]);return r.closed=!1,this.drawShape(r),this},Graphics.prototype.lineTo=function(e,t){return this.currentPath.shape.points.push(e,t),this.dirty++,this},Graphics.prototype.quadraticCurveTo=function(e,t,r,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i=this.currentPath.shape.points,o=0,a=0;0===i.length&&this.moveTo(0,0);for(var s=i[i.length-2],u=i[i.length-1],l=1;l<=20;++l){var h=l/20;o=s+(e-s)*h,a=u+(t-u)*h,i.push(o+(e+(r-e)*h-o)*h,a+(t+(n-t)*h-a)*h)}return this.dirty++,this},Graphics.prototype.bezierCurveTo=function(e,t,r,n,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,s=a[a.length-2],u=a[a.length-1];return a.length-=2,(0,m.default)(s,u,e,t,r,n,i,o,a),this.dirty++,this},Graphics.prototype.arcTo=function(e,t,r,n,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var o=this.currentPath.shape.points,a=o[o.length-2],s=o[o.length-1],u=s-t,l=a-e,h=n-t,c=r-e,f=Math.abs(u*c-l*h);if(f<1e-8||0===i)o[o.length-2]===e&&o[o.length-1]===t||o.push(e,t);else{var d=u*u+l*l,p=h*h+c*c,_=u*h+l*c,v=i*Math.sqrt(d)/f,y=i*Math.sqrt(p)/f,g=v*_/d,m=y*_/p,b=v*c+y*l,x=v*h+y*u,T=l*(y+g),w=u*(y+g),E=c*(v+m),C=h*(v+m),R=Math.atan2(w-x,T-b),S=Math.atan2(C-x,E-b);this.arc(b+e,x+t,i,R,S,l*h>c*u)}return this.dirty++,this},Graphics.prototype.arc=function(e,t,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(n===i)return this;!o&&i<=n?i+=2*Math.PI:o&&n<=i&&(n+=2*Math.PI);var a=i-n,s=40*Math.ceil(Math.abs(a)/(2*Math.PI));if(0===a)return this;var u=e+Math.cos(n)*r,l=t+Math.sin(n)*r,h=this.currentPath?this.currentPath.shape.points:null;h?h[h.length-2]===u&&h[h.length-1]===l||h.push(u,l):(this.moveTo(u,l),h=this.currentPath.shape.points);for(var c=a/(2*s),f=2*c,d=Math.cos(c),p=Math.sin(c),_=s-1,v=_%1/_,y=0;y<=_;++y){var g=y+v*y,m=c+n+f*g,b=Math.cos(m),x=-Math.sin(m);h.push((d*b+p*x)*r+e,(d*-x+p*b)*r+t)}return this.dirty++,this},Graphics.prototype.beginFill=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=e,this.fillAlpha=t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},Graphics.prototype.drawRect=function(e,t,r,n){return this.drawShape(new d.Rectangle(e,t,r,n)),this},Graphics.prototype.drawRoundedRect=function(e,t,r,n,i){return this.drawShape(new d.RoundedRectangle(e,t,r,n,i)),this},Graphics.prototype.drawCircle=function(e,t,r){return this.drawShape(new d.Circle(e,t,r)),this},Graphics.prototype.drawEllipse=function(e,t,r,n){return this.drawShape(new d.Ellipse(e,t,r,n)),this},Graphics.prototype.drawPolygon=function(e){var t=e,r=!0;if(t instanceof d.Polygon&&(r=t.closed,t=t.points),!Array.isArray(t)){t=new Array(arguments.length);for(var n=0;n<t.length;++n)t[n]=arguments[n]}var i=new d.Polygon(t);return i.closed=r,this.drawShape(i),this},Graphics.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},Graphics.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===_.SHAPES.RECT&&!this.graphicsData[0].lineWidth},Graphics.prototype._renderWebGL=function(e){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(e):(e.setObjectRenderer(e.plugins.graphics),e.plugins.graphics.render(this))},Graphics.prototype._renderSpriteRect=function(e){var t=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new f.default(new u.default(u.default.WHITE)));var r=this._spriteRect;if(16777215===this.tint)r.tint=this.graphicsData[0].fillColor;else{var n=C,i=R;(0,p.hex2rgb)(this.graphicsData[0].fillColor,n),(0,p.hex2rgb)(this.tint,i),n[0]*=i[0],n[1]*=i[1],n[2]*=i[2],r.tint=(0,p.rgb2hex)(n)}r.alpha=this.graphicsData[0].fillAlpha,r.worldAlpha=this.worldAlpha*r.alpha,r.blendMode=this.blendMode,r._texture._frame.width=t.width,r._texture._frame.height=t.height,r.transform.worldTransform=this.transform.worldTransform,r.anchor.set(-t.x/t.width,-t.y/t.height),r._onAnchorUpdate(),r._renderWebGL(e)},Graphics.prototype._renderCanvas=function(e){!0!==this.isMask&&e.plugins.graphics.render(this)},Graphics.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var e=this._localBounds;this._bounds.addFrame(this.transform,e.minX,e.minY,e.maxX,e.maxY)},Graphics.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,E);for(var t=this.graphicsData,r=0;r<t.length;++r){var n=t[r];if(n.fill&&(n.shape&&n.shape.contains(E.x,E.y))){if(n.holes)for(var i=0;i<n.holes.length;i++){var o=n.holes[i];if(o.contains(E.x,E.y))return!1}return!0}}return!1},Graphics.prototype.updateLocalBounds=function(){var e=1/0,t=-1/0,r=1/0,n=-1/0;if(this.graphicsData.length)for(var i=0,o=0,a=0,s=0,u=0,l=0;l<this.graphicsData.length;l++){var h=this.graphicsData[l],c=h.type,f=h.lineWidth;if(i=h.shape,c===_.SHAPES.RECT||c===_.SHAPES.RREC)o=i.x-f/2,a=i.y-f/2,s=i.width+f,u=i.height+f,e=o<e?o:e,t=o+s>t?o+s:t,r=a<r?a:r,n=a+u>n?a+u:n;else if(c===_.SHAPES.CIRC)o=i.x,a=i.y,s=i.radius+f/2,u=i.radius+f/2,e=o-s<e?o-s:e,t=o+s>t?o+s:t,r=a-u<r?a-u:r,n=a+u>n?a+u:n;else if(c===_.SHAPES.ELIP)o=i.x,a=i.y,s=i.width+f/2,u=i.height+f/2,e=o-s<e?o-s:e,t=o+s>t?o+s:t,r=a-u<r?a-u:r,n=a+u>n?a+u:n;else for(var d=i.points,p=0,v=0,y=0,g=0,m=0,b=0,x=0,T=0,w=0;w+2<d.length;w+=2)o=d[w],a=d[w+1],p=d[w+2],v=d[w+3],y=Math.abs(p-o),g=Math.abs(v-a),u=f,(s=Math.sqrt(y*y+g*g))<1e-9||(m=(u/s*g+y)/2,b=(u/s*y+g)/2,x=(p+o)/2,T=(v+a)/2,e=x-m<e?x-m:e,t=x+m>t?x+m:t,r=T-b<r?T-b:r,n=T+b>n?T+b:n)}else e=0,t=0,r=0,n=0;var E=this.boundsPadding;this._localBounds.minX=e-E,this._localBounds.maxX=t+E,this._localBounds.minY=r-E,this._localBounds.maxY=n+E},Graphics.prototype.drawShape=function(e){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var t=new h.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,e);return this.graphicsData.push(t),t.type===_.SHAPES.POLY&&(t.shape.closed=t.shape.closed||this.filling,this.currentPath=t),this.dirty++,t},Graphics.prototype.generateCanvasTexture=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.getLocalBounds(),n=a.default.create(r.width,r.height,e,t);T||(T=new x.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(w),w.invert(),w.tx-=r.x,w.ty-=r.y,T.render(this,n,!0,w);var i=u.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,e,"graphics");return i.baseTexture.resolution=t,i.baseTexture.update(),i},Graphics.prototype.closePath=function(){var e=this.currentPath;return e&&e.shape&&e.shape.close(),this},Graphics.prototype.addHole=function(){var e=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(e.shape),this.currentPath=null,this},Graphics.prototype.destroy=function(t){e.prototype.destroy.call(this,t);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();for(var n in this._webgl)for(var i=0;i<this._webgl[n].data.length;++i)this._webgl[n].data[i].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},Graphics}(i.default);t.default=S,S._SPRITE_TEXTURE=null},function(e,t,r){"use strict";function bezierCurveTo(e,t,r,n,i,o,a,s){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],l=0,h=0,c=0,f=0,d=0;u.push(e,t);for(var p=1,_=0;p<=20;++p)_=p/20,l=1-_,h=l*l,c=h*l,f=_*_,d=f*_,u.push(c*e+3*h*_*r+3*l*f*i+d*a,c*t+3*h*_*n+3*l*f*o+d*s);return u}t.__esModule=!0,t.default=bezierCurveTo},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(2),i=r(1),o=r(33),a=_interopRequireDefault(o),s=r(34),u=_interopRequireDefault(s),l=r(234),h=_interopRequireDefault(l),c=r(235),f=_interopRequireDefault(c),d=r(236),p=_interopRequireDefault(d),_=r(237),v=_interopRequireDefault(_),y=r(238),g=_interopRequireDefault(y),m=r(239),b=_interopRequireDefault(m),x=function(e){function GraphicsRenderer(t){_classCallCheck(this,GraphicsRenderer);var r=_possibleConstructorReturn(this,e.call(this,t));return r.graphicsDataPool=[],r.primitiveShader=null,r.gl=t.gl,r.CONTEXT_UID=0,r}return _inherits(GraphicsRenderer,e),GraphicsRenderer.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new f.default(this.gl)},GraphicsRenderer.prototype.destroy=function(){a.default.prototype.destroy.call(this);for(var e=0;e<this.graphicsDataPool.length;++e)this.graphicsDataPool[e].destroy();this.graphicsDataPool=null},GraphicsRenderer.prototype.render=function(e){var t=this.renderer,r=t.gl,i=void 0,o=e._webGL[this.CONTEXT_UID];o&&e.dirty===o.dirty||(this.updateGraphics(e),o=e._webGL[this.CONTEXT_UID]);var a=this.primitiveShader;t.bindShader(a),t.state.setBlendMode(e.blendMode);for(var s=0,u=o.data.length;s<u;s++){i=o.data[s];var l=i.shader;t.bindShader(l),l.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),l.uniforms.tint=(0,n.hex2rgb)(e.tint),l.uniforms.alpha=e.worldAlpha,t.bindVao(i.vao),i.nativeLines?r.drawArrays(r.LINES,0,i.points.length/6):i.vao.draw(r.TRIANGLE_STRIP,i.indices.length)}},GraphicsRenderer.prototype.updateGraphics=function(e){var t=this.renderer.gl,r=e._webGL[this.CONTEXT_UID];if(r||(r=e._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:t,clearDirty:-1,dirty:-1}),r.dirty=e.dirty,e.clearDirty!==r.clearDirty){r.clearDirty=e.clearDirty;for(var n=0;n<r.data.length;n++)this.graphicsDataPool.push(r.data[n]);r.data.length=0,r.lastIndex=0}for(var o=void 0,a=void 0,s=r.lastIndex;s<e.graphicsData.length;s++){var u=e.graphicsData[s];o=this.getWebGLData(r,0),u.nativeLines&&u.lineWidth&&(a=this.getWebGLData(r,0,!0),r.lastIndex++),u.type===i.SHAPES.POLY&&(0,p.default)(u,o,a),u.type===i.SHAPES.RECT?(0,v.default)(u,o,a):u.type===i.SHAPES.CIRC||u.type===i.SHAPES.ELIP?(0,b.default)(u,o,a):u.type===i.SHAPES.RREC&&(0,g.default)(u,o,a),r.lastIndex++}this.renderer.bindVao(null);for(var l=0;l<r.data.length;l++)o=r.data[l],o.dirty&&o.upload()},GraphicsRenderer.prototype.getWebGLData=function(e,t,r){var n=e.data[e.data.length-1];return(!n||n.nativeLines!==r||n.points.length>32e4)&&(n=this.graphicsDataPool.pop()||new h.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),n.nativeLines=r,n.reset(t),e.data.push(n)),n.dirty=!0,n},GraphicsRenderer}(a.default);t.default=x,u.default.registerPlugin("graphics",x)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(5),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=function(){function WebGLGraphicsData(e,t,r){_classCallCheck(this,WebGLGraphicsData),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=i.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=i.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=t,this.vao=new i.default.VertexArrayObject(e,r).addIndex(this.indexBuffer).addAttribute(this.buffer,t.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,t.attributes.aColor,e.FLOAT,!1,24,8)}return WebGLGraphicsData.prototype.reset=function(){this.points.length=0,this.indices.length=0},WebGLGraphicsData.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},WebGLGraphicsData.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},WebGLGraphicsData}();t.default=o},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(26),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=function(e){function PrimitiveShader(t){return _classCallCheck(this,PrimitiveShader),_possibleConstructorReturn(this,e.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return _inherits(PrimitiveShader,e),PrimitiveShader}(i.default);t.default=o},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function buildPoly(e,t,r){e.points=e.shape.points.slice();var n=e.points;if(e.fill&&n.length>=6){for(var a=[],u=e.holes,l=0;l<u.length;l++){var h=u[l];a.push(n.length/2),n=n.concat(h.points)}var c=t.points,f=t.indices,d=n.length/2,p=(0,o.hex2rgb)(e.fillColor),_=e.fillAlpha,v=p[0]*_,y=p[1]*_,g=p[2]*_,m=(0,s.default)(n,a,2);if(!m)return;for(var b=c.length/6,x=0;x<m.length;x+=3)f.push(m[x]+b),f.push(m[x]+b),f.push(m[x+1]+b),f.push(m[x+2]+b),f.push(m[x+2]+b);for(var T=0;T<d;T++)c.push(n[2*T],n[2*T+1],v,y,g,_)}e.lineWidth>0&&(0,i.default)(e,t,r)}t.__esModule=!0,t.default=buildPoly;var n=r(36),i=_interopRequireDefault(n),o=r(2),a=r(107),s=_interopRequireDefault(a)},function(e,t,r){"use strict";function buildRectangle(e,t,r){var n=e.shape,a=n.x,s=n.y,u=n.width,l=n.height;if(e.fill){var h=(0,o.hex2rgb)(e.fillColor),c=e.fillAlpha,f=h[0]*c,d=h[1]*c,p=h[2]*c,_=t.points,v=t.indices,y=_.length/6;_.push(a,s),_.push(f,d,p,c),_.push(a+u,s),_.push(f,d,p,c),_.push(a,s+l),_.push(f,d,p,c),_.push(a+u,s+l),_.push(f,d,p,c),v.push(y,y,y+1,y+2,y+3,y+3)}if(e.lineWidth){var g=e.points;e.points=[a,s,a+u,s,a+u,s+l,a,s+l,a,s],(0,i.default)(e,t,r),e.points=g}}t.__esModule=!0,t.default=buildRectangle;var n=r(36),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r(2)},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function buildRoundedRectangle(e,t,r){var n=e.shape,o=n.x,u=n.y,l=n.width,h=n.height,c=n.radius,f=[];if(f.push(o,u+c),quadraticBezierCurve(o,u+h-c,o,u+h,o+c,u+h,f),quadraticBezierCurve(o+l-c,u+h,o+l,u+h,o+l,u+h-c,f),quadraticBezierCurve(o+l,u+c,o+l,u,o+l-c,u,f),quadraticBezierCurve(o+c,u,o,u,o,u+c+1e-10,f),e.fill){for(var d=(0,s.hex2rgb)(e.fillColor),p=e.fillAlpha,_=d[0]*p,v=d[1]*p,y=d[2]*p,g=t.points,m=t.indices,b=g.length/6,x=(0,i.default)(f,null,2),T=0,w=x.length;T<w;T+=3)m.push(x[T]+b),m.push(x[T]+b),m.push(x[T+1]+b),m.push(x[T+2]+b),m.push(x[T+2]+b);for(var E=0,C=f.length;E<C;E++)g.push(f[E],f[++E],_,v,y,p)}if(e.lineWidth){var R=e.points;e.points=f,(0,a.default)(e,t,r),e.points=R}}function getPt(e,t,r){return e+(t-e)*r}function quadraticBezierCurve(e,t,r,n,i,o){for(var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],s=a,u=0,l=0,h=0,c=0,f=0,d=0,p=0,_=0;p<=20;++p)_=p/20,u=getPt(e,r,_),l=getPt(t,n,_),h=getPt(r,i,_),c=getPt(n,o,_),f=getPt(u,h,_),d=getPt(l,c,_),s.push(f,d);return s}t.__esModule=!0,t.default=buildRoundedRectangle;var n=r(107),i=_interopRequireDefault(n),o=r(36),a=_interopRequireDefault(o),s=r(2)},function(e,t,r){"use strict";function buildCircle(e,t,r){var n=e.shape,s=n.x,u=n.y,l=void 0,h=void 0;if(e.type===o.SHAPES.CIRC?(l=n.radius,h=n.radius):(l=n.width,h=n.height),0!==l&&0!==h){var c=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height)),f=2*Math.PI/c;if(e.fill){var d=(0,a.hex2rgb)(e.fillColor),p=e.fillAlpha,_=d[0]*p,v=d[1]*p,y=d[2]*p,g=t.points,m=t.indices,b=g.length/6;m.push(b);for(var x=0;x<c+1;x++)g.push(s,u,_,v,y,p),g.push(s+Math.sin(f*x)*l,u+Math.cos(f*x)*h,_,v,y,p),m.push(b++,b++);m.push(b-1)}if(e.lineWidth){var T=e.points;e.points=[];for(var w=0;w<c+1;w++)e.points.push(s+Math.sin(f*w)*l,u+Math.cos(f*w)*h);(0,i.default)(e,t,r),e.points=T}}}t.__esModule=!0,t.default=buildCircle;var n=r(36),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r(1),a=r(2)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(24),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r(1),a=function(){function CanvasGraphicsRenderer(e){_classCallCheck(this,CanvasGraphicsRenderer),this.renderer=e}return CanvasGraphicsRenderer.prototype.render=function(e){var t=this.renderer,r=t.context,n=e.worldAlpha,i=e.transform.worldTransform,a=t.resolution;this._prevTint!==this.tint&&(this.dirty=!0),r.setTransform(i.a*a,i.b*a,i.c*a,i.d*a,i.tx*a,i.ty*a),e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1),t.setBlendMode(e.blendMode);for(var s=0;s<e.graphicsData.length;s++){var u=e.graphicsData[s],l=u.shape,h=u._fillTint,c=u._lineTint;if(r.lineWidth=u.lineWidth,u.type===o.SHAPES.POLY){r.beginPath(),this.renderPolygon(l.points,l.closed,r);for(var f=0;f<u.holes.length;f++)this.renderPolygon(u.holes[f].points,!0,r);u.fill&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke())}else if(u.type===o.SHAPES.RECT)(u.fillColor||0===u.fillColor)&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fillRect(l.x,l.y,l.width,l.height)),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.strokeRect(l.x,l.y,l.width,l.height));else if(u.type===o.SHAPES.CIRC)r.beginPath(),r.arc(l.x,l.y,l.radius,0,2*Math.PI),r.closePath(),u.fill&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke());else if(u.type===o.SHAPES.ELIP){var d=2*l.width,p=2*l.height,_=l.x-d/2,v=l.y-p/2;r.beginPath();var y=d/2*.5522848,g=p/2*.5522848,m=_+d,b=v+p,x=_+d/2,T=v+p/2;r.moveTo(_,T),r.bezierCurveTo(_,T-g,x-y,v,x,v),r.bezierCurveTo(x+y,v,m,T-g,m,T),r.bezierCurveTo(m,T+g,x+y,b,x,b),r.bezierCurveTo(x-y,b,_,T+g,_,T),r.closePath(),u.fill&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke())}else if(u.type===o.SHAPES.RREC){var w=l.x,E=l.y,C=l.width,R=l.height,S=l.radius,P=Math.min(C,R)/2|0;S=S>P?P:S,r.beginPath(),r.moveTo(w,E+S),r.lineTo(w,E+R-S),r.quadraticCurveTo(w,E+R,w+S,E+R),r.lineTo(w+C-S,E+R),r.quadraticCurveTo(w+C,E+R,w+C,E+R-S),r.lineTo(w+C,E+S),r.quadraticCurveTo(w+C,E,w+C-S,E),r.lineTo(w+S,E),r.quadraticCurveTo(w,E,w,E+S),r.closePath(),(u.fillColor||0===u.fillColor)&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke())}}},CanvasGraphicsRenderer.prototype.updateGraphicsTint=function(e){e._prevTint=e.tint;for(var t=(e.tint>>16&255)/255,r=(e.tint>>8&255)/255,n=(255&e.tint)/255,i=0;i<e.graphicsData.length;++i){var o=e.graphicsData[i],a=0|o.fillColor,s=0|o.lineColor;o._fillTint=((a>>16&255)/255*t*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*n*255,o._lineTint=((s>>16&255)/255*t*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*n*255}},CanvasGraphicsRenderer.prototype.renderPolygon=function(e,t,r){r.moveTo(e[0],e[1]);for(var n=1;n<e.length/2;++n)r.lineTo(e[2*n],e[2*n+1]);t&&r.closePath()},CanvasGraphicsRenderer.prototype.destroy=function(){this.renderer=null},CanvasGraphicsRenderer}();t.default=a,i.default.registerPlugin("graphics",a)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(0),o=r(2),a=function(){function Spritesheet(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,Spritesheet),this.baseTexture=e,this.textures={},this.data=t,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return n(Spritesheet,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),Spritesheet.prototype._updateResolution=function(e){var t=this.data.meta.scale,r=(0,o.getResolutionOfUrl)(e,null);return null===r&&(r=void 0!==t?parseFloat(t):1),1!==r&&(this.baseTexture.resolution=r,this.baseTexture.update()),r},Spritesheet.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=Spritesheet.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},Spritesheet.prototype._processFrames=function(e){for(var t=e,r=Spritesheet.BATCH_SIZE;t-e<r&&t<this._frameKeys.length;){var n=this._frameKeys[t],o=this._frames[n].frame;if(o){var a=null,s=null,u=new i.Rectangle(0,0,this._frames[n].sourceSize.w/this.resolution,this._frames[n].sourceSize.h/this.resolution);a=this._frames[n].rotated?new i.Rectangle(o.x/this.resolution,o.y/this.resolution,o.h/this.resolution,o.w/this.resolution):new i.Rectangle(o.x/this.resolution,o.y/this.resolution,o.w/this.resolution,o.h/this.resolution),this._frames[n].trimmed&&(s=new i.Rectangle(this._frames[n].spriteSourceSize.x/this.resolution,this._frames[n].spriteSourceSize.y/this.resolution,o.w/this.resolution,o.h/this.resolution)),this.textures[n]=new i.Texture(this.baseTexture,a,u,s,this._frames[n].rotated?2:0),i.Texture.addToCache(this.textures[n],n)}t++}},Spritesheet.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},Spritesheet.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*Spritesheet.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*Spritesheet.BATCH_SIZE<e._frameKeys.length?e._nextBatch():e._parseComplete()},0)},Spritesheet.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&this.baseTexture.destroy(),this.baseTexture=null},Spritesheet}();t.default=a},function(e,t,r){"use strict";function warn(e){var t=(new Error).stack;void 0===t?console.warn("Deprecation Warning: ",e):(t=t.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e),console.warn(t),console.groupEnd()):(console.warn("Deprecation Warning: ",e),console.warn(t)))}function deprecation(e){var t=e.mesh,r=e.particles,n=e.extras,i=e.filters,o=e.prepare,a=e.loaders,s=e.interaction;Object.defineProperties(e,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return warn("You do not need to use a PIXI Stage any more, you can simply render any container."),e.Container}},DisplayObjectContainer:{get:function(){return warn("DisplayObjectContainer has been shortened to Container, please use Container from now on."),e.Container}},Strip:{get:function(){return warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),t.Mesh}},Rope:{get:function(){return warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),t.Rope}},ParticleContainer:{get:function(){return warn("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),r.ParticleContainer}},MovieClip:{get:function(){return warn("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),n.AnimatedSprite}},TilingSprite:{get:function(){return warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),n.TilingSprite}},BitmapText:{get:function(){return warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),n.BitmapText}},blendModes:{get:function(){return warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),e.BLEND_MODES}},scaleModes:{get:function(){return warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),e.SCALE_MODES}},BaseTextureCache:{get:function(){return warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),e.utils.BaseTextureCache}},TextureCache:{get:function(){return warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),e.utils.TextureCache}},math:{get:function(){return warn("The math namespace is deprecated, please access members already accessible on PIXI."),e}},AbstractFilter:{get:function(){return warn("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.Filter}},TransformManual:{get:function(){return warn("TransformManual has been renamed to TransformBase, please update your pixi-spine"),e.TransformBase}},TARGET_FPMS:{get:function(){return warn("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS},set:function(t){warn("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{get:function(){return warn("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION},set:function(t){warn("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION=t}},RESOLUTION:{get:function(){return warn("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION},set:function(t){warn("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{get:function(){return warn("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES},set:function(t){warn("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{get:function(){return warn("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE},set:function(t){warn("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{get:function(){return warn("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES},set:function(t){warn("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{get:function(){return warn("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX},set:function(t){warn("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{get:function(){return warn("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),e.settings.RENDER_OPTIONS}}});for(var u=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],l=0;l<u.length;l++)!function(t){var r=u[t];Object.defineProperty(e[r.parent],"DEFAULT",{get:function(){return warn("PIXI."+r.parent+".DEFAULT has been deprecated, please use PIXI.settings."+r.target),e.settings[r.target]},set:function(t){warn("PIXI."+r.parent+".DEFAULT has been deprecated, please use PIXI.settings."+r.target),e.settings[r.target]=t}})}(l);Object.defineProperties(e.settings,{PRECISION:{get:function(){return warn("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT},set:function(t){warn("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT=t}}}),n.AnimatedSprite&&Object.defineProperties(n,{MovieClip:{get:function(){return warn("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),n.AnimatedSprite}}}),e.DisplayObject.prototype.generateTexture=function(e,t,r){return warn("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),e.generateTexture(this,t,r)},e.Graphics.prototype.generateTexture=function(e,t){return warn("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(e,t)},e.RenderTexture.prototype.render=function(e,t,r,n){this.legacyRenderer.render(e,this,r,t,!n),warn("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},e.RenderTexture.prototype.getImage=function(e){return warn("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(e)},e.RenderTexture.prototype.getBase64=function(e){return warn("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(e)},e.RenderTexture.prototype.getCanvas=function(e){return warn("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(e)},e.RenderTexture.prototype.getPixels=function(e){return warn("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(e)},e.Sprite.prototype.setTexture=function(e){this.texture=e,warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},n.BitmapText&&(n.BitmapText.prototype.setText=function(e){this.text=e,warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),e.Text.prototype.setText=function(e){this.text=e,warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},e.Text.calculateFontProperties=function(t){return warn("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),e.TextMetrics.measureFont(t)},Object.defineProperties(e.Text,{fontPropertiesCache:{get:function(){return warn("Text.fontPropertiesCache is deprecated"),e.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return warn("Text.fontPropertiesCanvas is deprecated"),e.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return warn("Text.fontPropertiesContext is deprecated"),e.TextMetrics._context}}}),e.Text.prototype.setStyle=function(e){this.style=e,warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},e.Text.prototype.determineFontProperties=function(t){return warn("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),e.TextMetrics.measureFont(t)},e.Text.getFontStyle=function(t){return warn("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),t=t||{},t instanceof e.TextStyle||(t=new e.TextStyle(t)),t.toFontString()},Object.defineProperties(e.TextStyle.prototype,{font:{get:function(){warn("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var e="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+e+" "+this._fontFamily},set:function(e){warn("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),e.indexOf("italic")>1?this._fontStyle="italic":e.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",e.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var t=e.split(" "),r=-1;this._fontSize=26;for(var n=0;n<t.length;++n)if(t[n].match(/(px|pt|em|%)/)){r=n,this._fontSize=t[n];break}this._fontWeight="normal";for(var i=0;i<r;++i)if(t[i].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=t[i];break}if(r>-1&&r<t.length-1){this._fontFamily="";for(var o=r+1;o<t.length;++o)this._fontFamily+=t[o]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),e.Texture.prototype.setFrame=function(e){this.frame=e,warn("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},e.Texture.addTextureToCache=function(t,r){e.Texture.addToCache(t,r),warn("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},e.Texture.removeTextureFromCache=function(t){return warn("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),e.BaseTexture.removeFromCache(t),e.Texture.removeFromCache(t)},Object.defineProperties(i,{AbstractFilter:{get:function(){return warn("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.AbstractFilter}},SpriteMaskFilter:{get:function(){return warn("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),e.SpriteMaskFilter}}}),e.utils.uuid=function(){return warn("utils.uuid() is deprecated, please use utils.uid() from now on."),e.utils.uid()},e.utils.canUseNewCanvasBlendModes=function(){return warn("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),e.CanvasTinter.canUseMultiply};var h=!0;if(Object.defineProperty(e.utils,"_saidHello",{set:function(e){e&&(warn("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),h=e},get:function(){return h}}),o.BasePrepare&&(o.BasePrepare.prototype.register=function(e,t){return warn("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),e&&this.registerFindHook(e),t&&this.registerUploadHook(t),this}),o.canvas&&Object.defineProperty(o.canvas,"UPLOADS_PER_FRAME",{set:function(){warn("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return warn("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),o.webgl&&Object.defineProperty(o.webgl,"UPLOADS_PER_FRAME",{set:function(){warn("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return warn("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),a.Loader){var c=a.Resource,f=a.Loader;Object.defineProperties(c.prototype,{isJson:{get:function(){return warn("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===c.TYPE.JSON}},isXml:{get:function(){return warn("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===c.TYPE.XML}},isImage:{get:function(){return warn("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===c.TYPE.IMAGE}},isAudio:{get:function(){return warn("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===c.TYPE.AUDIO}},isVideo:{get:function(){return warn("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===c.TYPE.VIDEO}}}),Object.defineProperties(f.prototype,{before:{get:function(){return warn("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return warn("The after() method is deprecated, please use use()."),this.use}}})}s.interactiveTarget&&Object.defineProperty(s.interactiveTarget,"defaultCursor",{set:function(e){warn("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=e},get:function(){return warn("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),s.InteractionManager&&(Object.defineProperty(s.InteractionManager,"defaultCursorStyle",{set:function(e){warn("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=e},get:function(){return warn("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(s.InteractionManager,"currentCursorStyle",{set:function(e){warn("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=e},get:function(){return warn("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}t.__esModule=!0,t.default=deprecation},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(110);Object.defineProperty(t,"accessibleTarget",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}});var i=r(244);Object.defineProperty(t,"AccessibilityManager",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}})},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),o=r(56),a=_interopRequireDefault(o),s=r(110),u=_interopRequireDefault(s);i.utils.mixins.delayMixin(i.DisplayObject.prototype,u.default);var l=100,h=0,c=0,f=2,d=function(){function AccessibilityManager(e){_classCallCheck(this,AccessibilityManager),!a.default.tablet&&!a.default.phone||navigator.isCocoonJS||this.createTouchHook();var t=document.createElement("div");t.style.width=l+"px",t.style.height=l+"px",t.style.position="absolute",t.style.top=h+"px",t.style.left=c+"px",t.style.zIndex=f,this.div=t,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return AccessibilityManager.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2,t.style.backgroundColor="#FF0000",t.title="HOOK DIV",t.addEventListener("focus",function(){e.isMobileAccessabillity=!0,e.activate(),document.body.removeChild(t)}),document.body.appendChild(t)},AccessibilityManager.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},AccessibilityManager.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},AccessibilityManager.prototype.updateAccessibleObjects=function(e){if(e.visible){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);for(var t=e.children,r=t.length-1;r>=0;r--)this.updateAccessibleObjects(t[r])}},AccessibilityManager.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),t=e.width/this.renderer.width,r=e.height/this.renderer.height,n=this.div;n.style.left=e.left+"px",n.style.top=e.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var a=this.children[o];if(a.renderId!==this.renderId)a._accessibleActive=!1,i.utils.removeItems(this.children,o,1),this.div.removeChild(a._accessibleDiv),this.pool.push(a._accessibleDiv),a._accessibleDiv=null,o--,0===this.children.length&&this.deactivate();else{n=a._accessibleDiv;var s=a.hitArea,u=a.worldTransform;a.hitArea?(n.style.left=(u.tx+s.x*u.a)*t+"px",n.style.top=(u.ty+s.y*u.d)*r+"px",n.style.width=s.width*u.a*t+"px",n.style.height=s.height*u.d*r+"px"):(s=a.getBounds(),this.capHitArea(s),n.style.left=s.x*t+"px",n.style.top=s.y*r+"px",n.style.width=s.width*t+"px",n.style.height=s.height*r+"px")}}this.renderId++}},AccessibilityManager.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},AccessibilityManager.prototype.addChild=function(e){var t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=l+"px",t.style.height=l+"px",t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=f,t.style.borderStyle="none",t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleTitle||e.accessibleHint||(t.title="displayObject "+this.tabIndex),e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},AccessibilityManager.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"click",t.eventData)},AccessibilityManager.prototype._onFocus=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},AccessibilityManager.prototype._onFocusOut=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},AccessibilityManager.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},AccessibilityManager.prototype._onMouseMove=function(){this.deactivate()},AccessibilityManager.prototype.destroy=function(){this.div=null;for(var e=0;e<this.children.length;e++)this.children[e].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},AccessibilityManager}();t.default=d,i.WebGLRenderer.registerPlugin("accessibility",d),i.CanvasRenderer.registerPlugin("accessibility",d)},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(246);Object.defineProperty(t,"webgl",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}});var i=r(247);Object.defineProperty(t,"canvas",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}})},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),o=new i.Rectangle,a=function(){function WebGLExtract(e){_classCallCheck(this,WebGLExtract),this.renderer=e,e.extract=this}return WebGLExtract.prototype.image=function(e){var t=new Image;return t.src=this.base64(e),t},WebGLExtract.prototype.base64=function(e){return this.canvas(e).toDataURL()},WebGLExtract.prototype.canvas=function(e){var t=this.renderer,r=void 0,n=void 0,a=void 0,s=!1,u=void 0;e&&(u=e instanceof i.RenderTexture?e:this.renderer.generateTexture(e)),u?(r=u.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=r.resolution,a=u.frame,s=!1):(r=this.renderer.rootRenderTarget,n=r.resolution,s=!0,a=o,a.width=r.size.width,a.height=r.size.height);var l=a.width*n,h=a.height*n,c=new i.CanvasRenderTarget(l,h);if(r){t.bindRenderTarget(r);var f=new Uint8Array(4*l*h),d=t.gl;d.readPixels(a.x*n,a.y*n,l,h,d.RGBA,d.UNSIGNED_BYTE,f);var p=c.context.getImageData(0,0,l,h);p.data.set(f),c.context.putImageData(p,0,0),s&&(c.context.scale(1,-1),c.context.drawImage(c.canvas,0,-h))}return c.canvas},WebGLExtract.prototype.pixels=function(e){var t=this.renderer,r=void 0,n=void 0,a=void 0,s=void 0;e&&(s=e instanceof i.RenderTexture?e:this.renderer.generateTexture(e)),s?(r=s.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=r.resolution,a=s.frame):(r=this.renderer.rootRenderTarget,n=r.resolution,a=o,a.width=r.size.width,a.height=r.size.height);var u=a.width*n,l=a.height*n,h=new Uint8Array(4*u*l);if(r){t.bindRenderTarget(r);var c=t.gl;c.readPixels(a.x*n,a.y*n,u,l,c.RGBA,c.UNSIGNED_BYTE,h)}return h},WebGLExtract.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},WebGLExtract}();t.default=a,i.WebGLRenderer.registerPlugin("extract",a)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),o=new i.Rectangle,a=function(){function CanvasExtract(e){_classCallCheck(this,CanvasExtract),this.renderer=e,e.extract=this}return CanvasExtract.prototype.image=function(e){var t=new Image;return t.src=this.base64(e),t},CanvasExtract.prototype.base64=function(e){return this.canvas(e).toDataURL()},CanvasExtract.prototype.canvas=function(e){var t=this.renderer,r=void 0,n=void 0,a=void 0,s=void 0;e&&(s=e instanceof i.RenderTexture?e:t.generateTexture(e)),s?(r=s.baseTexture._canvasRenderTarget.context,n=s.baseTexture._canvasRenderTarget.resolution,a=s.frame):(r=t.rootContext,a=o,a.width=this.renderer.width,a.height=this.renderer.height);var u=a.width*n,l=a.height*n,h=new i.CanvasRenderTarget(u,l),c=r.getImageData(a.x*n,a.y*n,u,l);return h.context.putImageData(c,0,0),h.canvas},CanvasExtract.prototype.pixels=function(e){var t=this.renderer,r=void 0,n=void 0,a=void 0,s=void 0;return e&&(s=e instanceof i.RenderTexture?e:t.generateTexture(e)),s?(r=s.baseTexture._canvasRenderTarget.context,n=s.baseTexture._canvasRenderTarget.resolution,a=s.frame):(r=t.rootContext,a=o,a.width=t.width,a.height=t.height),r.getImageData(0,0,a.width*n,a.height*n).data},CanvasExtract.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},CanvasExtract}();t.default=a,i.CanvasRenderer.registerPlugin("extract",a)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(0),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),a=function(e){function AnimatedSprite(t,r){_classCallCheck(this,AnimatedSprite);var n=_possibleConstructorReturn(this,e.call(this,t[0]instanceof o.Texture?t[0]:t[0].texture));return n._textures=null,n._durations=null,n.textures=t,n._autoUpdate=!1!==r,n.animationSpeed=1,n.loop=!0,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n.playing=!1,n}return _inherits(AnimatedSprite,e),AnimatedSprite.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&o.ticker.shared.remove(this.update,this))},AnimatedSprite.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&o.ticker.shared.add(this.update,this,o.UPDATE_PRIORITY.HIGH))},AnimatedSprite.prototype.gotoAndStop=function(e){this.stop();var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()},AnimatedSprite.prototype.gotoAndPlay=function(e){var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture(),this.play()},AnimatedSprite.prototype.update=function(e){var t=this.animationSpeed*e,r=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=t/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r?this.onLoop():this.animationSpeed<0&&this.currentFrame>r&&this.onLoop()),this.updateTexture())},AnimatedSprite.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.onFrameChange&&this.onFrameChange(this.currentFrame)},AnimatedSprite.prototype.destroy=function(t){this.stop(),e.prototype.destroy.call(this,t)},AnimatedSprite.fromFrames=function(e){for(var t=[],r=0;r<e.length;++r)t.push(o.Texture.fromFrame(e[r]));return new AnimatedSprite(t)},AnimatedSprite.fromImages=function(e){for(var t=[],r=0;r<e.length;++r)t.push(o.Texture.fromImage(e[r]));return new AnimatedSprite(t)},n(AnimatedSprite,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(e){if(e[0]instanceof o.Texture)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}}]),AnimatedSprite}(o.Sprite);t.default=a},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(0),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),a=r(62),s=_interopRequireDefault(a),u=r(64),l=_interopRequireDefault(u),h=new o.Point,c=function(e){function TilingSprite(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;_classCallCheck(this,TilingSprite);var i=_possibleConstructorReturn(this,e.call(this,t));return i.tileTransform=new o.TransformStatic,i._width=r,i._height=n,i._canvasPattern=null,i.uvTransform=t.transform||new l.default(t),i.pluginName="tilingSprite",i.uvRespectAnchor=!1,i}return _inherits(TilingSprite,e),TilingSprite.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture)},TilingSprite.prototype._renderWebGL=function(e){var t=this._texture;t&&t.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},TilingSprite.prototype._renderCanvas=function(e){var t=this._texture;if(t.baseTexture.hasLoaded){var r=e.context,n=this.worldTransform,i=e.resolution,a=t.baseTexture,u=a.resolution,l=this.tilePosition.x/this.tileScale.x%t._frame.width*u,h=this.tilePosition.y/this.tileScale.y%t._frame.height*u;if(!this._canvasPattern){var c=new o.CanvasRenderTarget(t._frame.width,t._frame.height,u);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=s.default.getTintedTexture(this,this.tint)),c.context.drawImage(this.tintedTexture,0,0)):c.context.drawImage(a.source,-t._frame.x*u,-t._frame.y*u),this._canvasPattern=c.context.createPattern(c.canvas,"repeat")}r.globalAlpha=this.worldAlpha,r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),e.setBlendMode(this.blendMode),r.fillStyle=this._canvasPattern,r.scale(this.tileScale.x/u,this.tileScale.y/u);var f=this.anchor.x*-this._width,d=this.anchor.y*-this._height;this.uvRespectAnchor?(r.translate(l,h),r.fillRect(-l+f,-h+d,this._width/this.tileScale.x*u,this._height/this.tileScale.y*u)):(r.translate(l+f,h+d),r.fillRect(-l,-h,this._width/this.tileScale.x*u,this._height/this.tileScale.y*u))}},TilingSprite.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,r,n)},TilingSprite.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),t||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},TilingSprite.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,h);var t=this._width,r=this._height,n=-t*this.anchor._x;if(h.x>=n&&h.x<n+t){var i=-r*this.anchor._y;if(h.y>=i&&h.y<i+r)return!0}return!1},TilingSprite.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.tileTransform=null,this.uvTransform=null},TilingSprite.from=function(e,t,r){return new TilingSprite(o.Texture.from(e),t,r)},TilingSprite.fromFrame=function(e,t,r){var n=o.utils.TextureCache[e];if(!n)throw new Error('The frameId "'+e+'" does not exist in the texture cache '+this);return new TilingSprite(n,t,r)},TilingSprite.fromImage=function(e,t,r,n,i){return new TilingSprite(o.Texture.fromImage(e,n,i),t,r)},n(TilingSprite,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(e){this.uvTransform.clampMargin=e,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copy(e)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copy(e)}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}}]),TilingSprite}(o.Sprite);t.default=c},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),o=r(1),a=(r(7),new i.Matrix),s=function(e){function TilingSpriteRenderer(t){_classCallCheck(this,TilingSpriteRenderer);var r=_possibleConstructorReturn(this,e.call(this,t));return r.shader=null,r.simpleShader=null,r.quad=null,r}return _inherits(TilingSpriteRenderer,e),TilingSpriteRenderer.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new i.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n\n    gl_FragColor = sample * color ;\n}\n"),this.simpleShader=new i.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n    gl_FragColor = sample * color;\n}\n"),this.renderer.bindVao(null),this.quad=new i.Quad(e,this.renderer.state.attribState),this.quad.initVao(this.shader)},TilingSpriteRenderer.prototype.render=function(e){var t=this.renderer,r=this.quad;t.bindVao(r.vao);var n=r.vertices;n[0]=n[6]=e._width*-e.anchor.x,n[1]=n[3]=e._height*-e.anchor.y,n[2]=n[4]=e._width*(1-e.anchor.x),n[5]=n[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&(n=r.uvs,n[0]=n[6]=-e.anchor.x,n[1]=n[3]=-e.anchor.y,n[2]=n[4]=1-e.anchor.x,n[5]=n[7]=1-e.anchor.y),r.upload();var s=e._texture,u=s.baseTexture,l=e.tileTransform.localTransform,h=e.uvTransform,c=u.isPowerOfTwo&&s.frame.width===u.width&&s.frame.height===u.height;c&&(u._glTextures[t.CONTEXT_UID]?c=u.wrapMode!==o.WRAP_MODES.CLAMP:u.wrapMode===o.WRAP_MODES.CLAMP&&(u.wrapMode=o.WRAP_MODES.REPEAT));var f=c?this.simpleShader:this.shader;t.bindShader(f);var d=s.width,p=s.height,_=e._width,v=e._height;a.set(l.a*d/_,l.b*d/v,l.c*p/_,l.d*p/v,l.tx/_,l.ty/v),a.invert(),c?a.prepend(h.mapCoord):(f.uniforms.uMapCoord=h.mapCoord.toArray(!0),f.uniforms.uClampFrame=h.uClampFrame,f.uniforms.uClampOffset=h.uClampOffset),f.uniforms.uTransform=a.toArray(!0),f.uniforms.uColor=i.utils.premultiplyTintToRgba(e.tint,e.worldAlpha,f.uniforms.uColor,u.premultipliedAlpha),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=t.bindTexture(s),t.setBlendMode(i.utils.correctBlendMode(e.blendMode,u.premultipliedAlpha)),r.vao.draw(this.renderer.gl.TRIANGLES,6,0)},TilingSpriteRenderer}(i.ObjectRenderer);t.default=s,i.WebGLRenderer.registerPlugin("tilingSprite",s)},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(0),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),a=r(80),s=_interopRequireDefault(a),u=r(3),l=_interopRequireDefault(u),h=function(e){function BitmapText(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,BitmapText);var n=_possibleConstructorReturn(this,e.call(this));return n._textWidth=0,n._textHeight=0,n._glyphs=[],n._font={tint:void 0!==r.tint?r.tint:16777215,align:r.align||"left",name:null,size:0},n.font=r.font,n._text=t,n._maxWidth=0,n._maxLineHeight=0,n._anchor=new s.default(function(){n.dirty=!0},n,0,0),n.dirty=!1,n.updateText(),n}return _inherits(BitmapText,e),BitmapText.prototype.updateText=function(){for(var e=BitmapText.fonts[this._font.name],t=this._font.size/e.size,r=new o.Point,n=[],i=[],a=null,s=0,u=0,l=0,h=-1,c=0,f=0,d=0,p=0;p<this.text.length;p++){var _=this.text.charCodeAt(p);if(/(\s)/.test(this.text.charAt(p))&&(h=p,c=s),/(?:\r\n|\r|\n)/.test(this.text.charAt(p)))i.push(s),u=Math.max(u,s),l++,r.x=0,r.y+=e.lineHeight,a=null;else if(-1!==h&&this._maxWidth>0&&r.x*t>this._maxWidth)o.utils.removeItems(n,h-f,p-h),p=h,h=-1,++f,i.push(c),u=Math.max(u,c),l++,r.x=0,r.y+=e.lineHeight,a=null;else{var v=e.chars[_];v&&(a&&v.kerning[a]&&(r.x+=v.kerning[a]),n.push({texture:v.texture,line:l,charCode:_,position:new o.Point(r.x+v.xOffset,r.y+v.yOffset)}),s=r.x+(v.texture.width+v.xOffset),r.x+=v.xAdvance,d=Math.max(d,v.yOffset+v.texture.height),a=_)}}i.push(s),u=Math.max(u,s);for(var y=[],g=0;g<=l;g++){var m=0;"right"===this._font.align?m=u-i[g]:"center"===this._font.align&&(m=(u-i[g])/2),y.push(m)}for(var b=n.length,x=this.tint,T=0;T<b;T++){var w=this._glyphs[T];w?w.texture=n[T].texture:(w=new o.Sprite(n[T].texture),this._glyphs.push(w)),w.position.x=(n[T].position.x+y[n[T].line])*t,w.position.y=n[T].position.y*t,w.scale.x=w.scale.y=t,w.tint=x,w.parent||this.addChild(w)}for(var E=b;E<this._glyphs.length;++E)this.removeChild(this._glyphs[E]);if(this._textWidth=u*t,this._textHeight=(r.y+e.lineHeight)*t,0!==this.anchor.x||0!==this.anchor.y)for(var C=0;C<b;C++)this._glyphs[C].x-=this._textWidth*this.anchor.x,this._glyphs[C].y-=this._textHeight*this.anchor.y;this._maxLineHeight=d*t},BitmapText.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},BitmapText.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},BitmapText.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},BitmapText.registerFont=function(e,t){var r={},n=e.getElementsByTagName("info")[0],i=e.getElementsByTagName("common")[0],a=t.baseTexture.resolution||l.default.RESOLUTION;r.font=n.getAttribute("face"),r.size=parseInt(n.getAttribute("size"),10),r.lineHeight=parseInt(i.getAttribute("lineHeight"),10)/a,r.chars={};for(var s=e.getElementsByTagName("char"),u=0;u<s.length;u++){var h=s[u],c=parseInt(h.getAttribute("id"),10),f=new o.Rectangle(parseInt(h.getAttribute("x"),10)/a+t.frame.x/a,parseInt(h.getAttribute("y"),10)/a+t.frame.y/a,parseInt(h.getAttribute("width"),10)/a,parseInt(h.getAttribute("height"),10)/a);r.chars[c]={xOffset:parseInt(h.getAttribute("xoffset"),10)/a,yOffset:parseInt(h.getAttribute("yoffset"),10)/a,xAdvance:parseInt(h.getAttribute("xadvance"),10)/a,kerning:{},texture:new o.Texture(t.baseTexture,f)}}for(var d=e.getElementsByTagName("kerning"),p=0;p<d.length;p++){var _=d[p],v=parseInt(_.getAttribute("first"),10)/a,y=parseInt(_.getAttribute("second"),10)/a,g=parseInt(_.getAttribute("amount"),10)/a;r.chars[y]&&(r.chars[y].kerning[v]=g)}return BitmapText.fonts[r.font]=r,r},n(BitmapText,[{key:"tint",get:function(){return this._font.tint},set:function(e){this._font.tint="number"==typeof e&&e>=0?e:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(e){this._font.align=e||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(e){"number"==typeof e?this._anchor.set(e):this._anchor.copy(e)}},{key:"font",get:function(){return this._font},set:function(e){e&&("string"==typeof e?(e=e.split(" "),this._font.name=1===e.length?e[0]:e.slice(1).join(" "),this._font.size=e.length>=2?parseInt(e[0],10):BitmapText.fonts[this._font.name].size):(this._font.name=e.name,this._font.size="number"==typeof e.size?e.size:parseInt(e.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(e){e=e.toString()||" ",this._text!==e&&(this._text=e,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),BitmapText}(o.Container);t.default=h,h.fonts={}},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),o=r(15),a=_interopRequireDefault(o),s=r(20),u=_interopRequireDefault(s),l=r(2),h=i.DisplayObject,c=new i.Matrix;h.prototype._cacheAsBitmap=!1,h.prototype._cacheData=!1;var f=function CacheData(){_classCallCheck(this,CacheData),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(h.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){this._cacheAsBitmap=e;var t=void 0;e?(this._cacheData||(this._cacheData=new f),t=this._cacheData,t.originalRenderWebGL=this.renderWebGL,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this._calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=t.originalRenderWebGL,this.renderCanvas=t.originalRenderCanvas,this._calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}}),h.prototype._renderCachedWebGL=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(e))},h.prototype._initCachedDisplayObject=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.alpha;this.alpha=1,e.currentRenderer.flush();var r=this.getLocalBounds().clone();if(this._filters){var n=this._filters[0].padding;r.pad(n)}var o=e._activeRenderTarget,s=e.filterManager.filterStack,h=i.RenderTexture.create(0|r.width,0|r.height),f="cacheAsBitmap_"+(0,l.uid)();this._cacheData.textureCacheId=f,u.default.addToCache(h.baseTexture,f),a.default.addToCache(h,f);var d=c;d.tx=-r.x,d.ty=-r.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,e.render(this,h,!0,d,!0),e.bindRenderTarget(o),e.filterManager.filterStack=s,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var p=new i.Sprite(h);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-r.x/r.width,p.anchor.y=-r.y/r.height,p.alpha=t,p._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=p.containsPoint.bind(p)}},h.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(e))},h.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(),r=this.alpha;this.alpha=1;var n=e.context,o=i.RenderTexture.create(0|t.width,0|t.height),s="cacheAsBitmap_"+(0,l.uid)();this._cacheData.textureCacheId=s,u.default.addToCache(o.baseTexture,s),a.default.addToCache(o,s);var h=c;this.transform.localTransform.copy(h),h.invert(),h.tx-=t.x,h.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,o,!0,h,!1),e.context=n,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var f=new i.Sprite(o);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-t.x/t.width,f.anchor.y=-t.y/t.height,f._bounds=this._bounds,f.alpha=r,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=f,this.containsPoint=f.containsPoint.bind(f)}},h.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},h.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},h.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,u.default.removeFromCache(this._cacheData.textureCacheId),a.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},h.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)}},function(e,t,r){"use strict";var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n);i.DisplayObject.prototype.name=null,i.Container.prototype.getChildByName=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t].name===e)return this.children[t];return null}},function(e,t,r){"use strict";var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n);i.DisplayObject.prototype.getGlobalPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.Point,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e}},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(256);Object.defineProperty(t,"FXAAFilter",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}});var i=r(257);Object.defineProperty(t,"NoiseFilter",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}});var o=r(258);Object.defineProperty(t,"DisplacementFilter",{enumerable:!0,get:function(){return _interopRequireDefault(o).default}});var a=r(259);Object.defineProperty(t,"BlurFilter",{enumerable:!0,get:function(){return _interopRequireDefault(a).default}});var s=r(112);Object.defineProperty(t,"BlurXFilter",{enumerable:!0,get:function(){return _interopRequireDefault(s).default}});var u=r(116);Object.defineProperty(t,"BlurYFilter",{enumerable:!0,get:function(){return _interopRequireDefault(u).default}});var l=r(260);Object.defineProperty(t,"ColorMatrixFilter",{enumerable:!0,get:function(){return _interopRequireDefault(l).default}});var h=r(261);Object.defineProperty(t,"VoidFilter",{enumerable:!0,get:function(){return _interopRequireDefault(h).default}})},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),o=(r(7),function(e){function FXAAFilter(){return _classCallCheck(this,FXAAFilter),_possibleConstructorReturn(this,e.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return _inherits(FXAAFilter,e),FXAAFilter}(i.Filter));t.default=o},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(0),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),a=(r(7),function(e){function NoiseFilter(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();_classCallCheck(this,NoiseFilter);var n=_possibleConstructorReturn(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return n.noise=t,n.seed=r,n}return _inherits(NoiseFilter,e),n(NoiseFilter,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e}}]),NoiseFilter}(o.Filter));t.default=a},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(0),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),a=(r(7),function(e){function DisplacementFilter(t,r){_classCallCheck(this,DisplacementFilter);var n=new o.Matrix;t.renderable=!1;var i=_possibleConstructorReturn(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return i.maskSprite=t,i.maskMatrix=n,i.uniforms.mapSampler=t._texture,i.uniforms.filterMatrix=n,i.uniforms.scale={x:1,y:1},null!==r&&void 0!==r||(r=20),i.scale=new o.Point(r,r),i}return _inherits(DisplacementFilter,e),DisplacementFilter.prototype.apply=function(e,t,r){var n=1/r.destinationFrame.width*(r.size.width/t.size.width);this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*n,this.uniforms.scale.y=this.scale.y*n,e.applyFilter(this,t,r)},n(DisplacementFilter,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e}}]),DisplacementFilter}(o.Filter));t.default=a},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(0),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),a=r(112),s=_interopRequireDefault(a),u=r(116),l=_interopRequireDefault(u),h=function(e){function BlurFilter(t,r,n,i){_classCallCheck(this,BlurFilter);var a=_possibleConstructorReturn(this,e.call(this));return a.blurXFilter=new s.default(t,r,n,i),a.blurYFilter=new l.default(t,r,n,i),a.padding=0,a.resolution=n||o.settings.RESOLUTION,a.quality=r||4,a.blur=t||8,a}return _inherits(BlurFilter,e),BlurFilter.prototype.apply=function(e,t,r){var n=e.getRenderTarget(!0);this.blurXFilter.apply(e,t,n,!0),this.blurYFilter.apply(e,n,r,!1),e.returnRenderTarget(n)},n(BlurFilter,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}}]),BlurFilter}(o.Filter);t.default=h},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(0),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),a=(r(7),function(e){function ColorMatrixFilter(){_classCallCheck(this,ColorMatrixFilter);var t=_possibleConstructorReturn(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return t.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],t.alpha=1,t}return _inherits(ColorMatrixFilter,e),ColorMatrixFilter.prototype._loadMatrix=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e;t&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r},ColorMatrixFilter.prototype._multiply=function(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e},ColorMatrixFilter.prototype._colorMatrix=function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},ColorMatrixFilter.prototype.brightness=function(e,t){var r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)},ColorMatrixFilter.prototype.greyscale=function(e,t){var r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)},ColorMatrixFilter.prototype.blackAndWhite=function(e){var t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var r=Math.cos(e),n=Math.sin(e),i=Math.sqrt,o=1/3,a=i(o),s=r+(1-r)*o,u=o*(1-r)-a*n,l=o*(1-r)+a*n,h=o*(1-r)+a*n,c=r+o*(1-r),f=o*(1-r)-a*n,d=o*(1-r)-a*n,p=o*(1-r)+a*n,_=r+o*(1-r),v=[s,u,l,0,0,h,c,f,0,0,d,p,_,0,0,0,0,0,1,0];this._loadMatrix(v,t)},ColorMatrixFilter.prototype.contrast=function(e,t){var r=(e||0)+1,n=-128*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,t)},ColorMatrixFilter.prototype.saturate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],r=2*e/3+1,n=-.5*(r-1),i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,t)},ColorMatrixFilter.prototype.desaturate=function(){this.saturate(-1)},ColorMatrixFilter.prototype.negative=function(e){var t=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.sepia=function(e){var t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.technicolor=function(e){var t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.polaroid=function(e){var t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.toBGR=function(e){var t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.kodachrome=function(e){var t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.browni=function(e){var t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.vintage=function(e){var t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.colorTone=function(e,t,r,n,i){e=e||.2,t=t||.15,r=r||16770432,n=n||3375104;var o=(r>>16&255)/255,a=(r>>8&255)/255,s=(255&r)/255,u=(n>>16&255)/255,l=(n>>8&255)/255,h=(255&n)/255,c=[.3,.59,.11,0,0,o,a,s,e,0,u,l,h,t,0,o-u,a-l,s-h,0,0];this._loadMatrix(c,i)},ColorMatrixFilter.prototype.night=function(e,t){e=e||.1;var r=[-2*e,-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(r,t)},ColorMatrixFilter.prototype.predator=function(e,t){var r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t)},ColorMatrixFilter.prototype.lsd=function(e){var t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.reset=function(){var e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)},n(ColorMatrixFilter,[{key:"matrix",get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),ColorMatrixFilter}(o.Filter));t.default=a,a.prototype.grayscale=a.prototype.greyscale},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),o=(r(7),function(e){function VoidFilter(){_classCallCheck(this,VoidFilter);var t=_possibleConstructorReturn(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"));return t.glShaderKey="void",t}return _inherits(VoidFilter,e),VoidFilter}(i.Filter));t.default=o},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(117);Object.defineProperty(t,"InteractionData",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}});var i=r(263);Object.defineProperty(t,"InteractionManager",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}});var o=r(118);Object.defineProperty(t,"interactiveTarget",{enumerable:!0,get:function(){return _interopRequireDefault(o).default}})},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(0),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),a=r(117),s=_interopRequireDefault(a),u=r(264),l=_interopRequireDefault(u),h=r(265),c=_interopRequireDefault(h),f=r(14),d=_interopRequireDefault(f),p=r(118),_=_interopRequireDefault(p);o.utils.mixins.delayMixin(o.DisplayObject.prototype,_.default);var v="MOUSE",y={target:null,data:{global:null}},g=function(e){function InteractionManager(t,r){_classCallCheck(this,InteractionManager);var n=_possibleConstructorReturn(this,e.call(this));return r=r||{},n.renderer=t,n.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,n.interactionFrequency=r.interactionFrequency||10,n.mouse=new s.default,n.mouse.identifier=v,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[v]=n.mouse,n.interactionDataPool=[],n.eventData=new l.default,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.mouseOverRenderer=!1,n.supportsTouchEvents="ontouchstart"in window,n.supportsPointerEvents=!!window.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n._tempPoint=new o.Point,n.resolution=1,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return _inherits(InteractionManager,e),InteractionManager.prototype.hitTest=function(e,t){return y.target=null,y.data.global=e,t||(t=this.renderer._lastObjectRendered),this.processInteractive(y,t,null,!0),y.target},InteractionManager.prototype.setTargetElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=e,this.resolution=t,this.addEvents()},InteractionManager.prototype.addEvents=function(){this.interactionDOMElement&&(o.ticker.shared.add(this.update,this,o.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(o.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},InteractionManager.prototype.update=function(e){if(this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=null;for(var t in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var r=this.activeInteractionData[t];if(r.originalEvent&&"touch"!==r.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},InteractionManager.prototype.setCursorMode=function(e){if(e=e||"default",this.currentCursorMode!==e){this.currentCursorMode=e;var t=this.cursorStyles[e];if(t)switch(void 0===t?"undefined":n(t)){case"string":this.interactionDOMElement.style.cursor=t;break;case"function":t(e);break;case"object":Object.assign(this.interactionDOMElement.style,t)}else"string"!=typeof e||Object.prototype.hasOwnProperty.call(this.cursorStyles,e)||(this.interactionDOMElement.style.cursor=e)}},InteractionManager.prototype.dispatchEvent=function(e,t,r){r.stopped||(r.currentTarget=e,r.type=t,e.emit(t,r),e[t]&&e[t](r))},InteractionManager.prototype.mapPositionToPoint=function(e,t,r){var n=void 0;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var i=navigator.isCocoonJS?this.resolution:1/this.resolution;e.x=(t-n.left)*(this.interactionDOMElement.width/n.width)*i,e.y=(r-n.top)*(this.interactionDOMElement.height/n.height)*i},InteractionManager.prototype.processInteractive=function(e,t,r,n,i){if(!t||!t.visible)return!1;var o=e.data.global;i=t.interactive||i;var a=!1,s=i;if(t.hitArea?s=!1:n&&t._mask&&(t._mask.containsPoint(o)||(n=!1)),t.interactiveChildren&&t.children)for(var u=t.children,l=u.length-1;l>=0;l--){var h=u[l],c=this.processInteractive(e,h,r,n,s);if(c){if(!h.parent)continue;s=!1,c&&(e.target&&(n=!1),a=!0)}}return i&&(n&&!e.target&&(t.hitArea?(t.worldTransform.applyInverse(o,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(a=!0)):t.containsPoint&&t.containsPoint(o)&&(a=!0)),t.interactive&&(a&&!e.target&&(e.target=t),r&&r(e,t,!!a))),a},InteractionManager.prototype.onPointerDown=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&e.preventDefault();for(var r=t.length,n=0;n<r;n++){var i=t[n],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(a.data.originalEvent=e,this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===i.pointerType)this.emit("touchstart",a);else if("mouse"===i.pointerType||"pen"===i.pointerType){var s=2===i.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},InteractionManager.prototype.processPointerDown=function(e,t,r){var n=e.data,i=e.data.identifier;if(r)if(t.trackedPointers[i]||(t.trackedPointers[i]=new c.default(i)),this.dispatchEvent(t,"pointerdown",e),"touch"===n.pointerType)this.dispatchEvent(t,"touchstart",e);else if("mouse"===n.pointerType||"pen"===n.pointerType){var o=2===n.button;o?t.trackedPointers[i].rightDown=!0:t.trackedPointers[i].leftDown=!0,this.dispatchEvent(t,o?"rightdown":"mousedown",e)}},InteractionManager.prototype.onPointerComplete=function(e,t,r){for(var n=this.normalizeToPointerData(e),i=n.length,o=e.target!==this.interactionDOMElement?"outside":"",a=0;a<i;a++){var s=n[a],u=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,u);if(l.data.originalEvent=e,this.processInteractive(l,this.renderer._lastObjectRendered,r,t||!o),this.emit(t?"pointercancel":"pointerup"+o,l),"mouse"===s.pointerType||"pen"===s.pointerType){var h=2===s.button;this.emit(h?"rightup"+o:"mouseup"+o,l)}else"touch"===s.pointerType&&(this.emit(t?"touchcancel":"touchend"+o,l),this.releaseInteractionDataForPointerId(s.pointerId,u))}},InteractionManager.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},InteractionManager.prototype.processPointerCancel=function(e,t){var r=e.data,n=e.data.identifier;void 0!==t.trackedPointers[n]&&(delete t.trackedPointers[n],this.dispatchEvent(t,"pointercancel",e),"touch"===r.pointerType&&this.dispatchEvent(t,"touchcancel",e))},InteractionManager.prototype.onPointerUp=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},InteractionManager.prototype.processPointerUp=function(e,t,r){var n=e.data,i=e.data.identifier,o=t.trackedPointers[i],a="touch"===n.pointerType;if("mouse"===n.pointerType||"pen"===n.pointerType){var s=2===n.button,u=c.default.FLAGS,l=s?u.RIGHT_DOWN:u.LEFT_DOWN,h=void 0!==o&&o.flags&l;r?(this.dispatchEvent(t,s?"rightup":"mouseup",e),h&&this.dispatchEvent(t,s?"rightclick":"click",e)):h&&this.dispatchEvent(t,s?"rightupoutside":"mouseupoutside",e),o&&(s?o.rightDown=!1:o.leftDown=!1)}r?(this.dispatchEvent(t,"pointerup",e),a&&this.dispatchEvent(t,"touchend",e),o&&(this.dispatchEvent(t,"pointertap",e),a&&(this.dispatchEvent(t,"tap",e),o.over=!1))):o&&(this.dispatchEvent(t,"pointerupoutside",e),a&&this.dispatchEvent(t,"touchendoutside",e)),o&&o.none&&delete t.trackedPointers[i]},InteractionManager.prototype.onPointerMove=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);"mouse"===t[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var r=t.length,n=0;n<r;n++){var i=t[n],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=e;var s="touch"!==i.pointerType||this.moveWhenInside;this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerMove,s),this.emit("pointermove",a),"touch"===i.pointerType&&this.emit("touchmove",a),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",a)}"mouse"===t[0].pointerType&&this.setCursorMode(this.cursor)}},InteractionManager.prototype.processPointerMove=function(e,t,r){var n=e.data,i="touch"===n.pointerType,o="mouse"===n.pointerType||"pen"===n.pointerType;o&&this.processPointerOverOut(e,t,r),this.moveWhenInside&&!r||(this.dispatchEvent(t,"pointermove",e),i&&this.dispatchEvent(t,"touchmove",e),o&&this.dispatchEvent(t,"mousemove",e))},InteractionManager.prototype.onPointerOut=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e),r=t[0];"mouse"===r.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(r),i=this.configureInteractionEventForDOMEvent(this.eventData,r,n);i.data.originalEvent=r,this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",i),"mouse"===r.pointerType||"pen"===r.pointerType?this.emit("mouseout",i):this.releaseInteractionDataForPointerId(n.identifier)}},InteractionManager.prototype.processPointerOverOut=function(e,t,r){var n=e.data,i=e.data.identifier,o="mouse"===n.pointerType||"pen"===n.pointerType,a=t.trackedPointers[i];r&&!a&&(a=t.trackedPointers[i]=new c.default(i)),void 0!==a&&(r&&this.mouseOverRenderer?(a.over||(a.over=!0,this.dispatchEvent(t,"pointerover",e),o&&this.dispatchEvent(t,"mouseover",e)),o&&null===this.cursor&&(this.cursor=t.cursor)):a.over&&(a.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),o&&this.dispatchEvent(t,"mouseout",e),a.none&&delete t.trackedPointers[i]))},InteractionManager.prototype.onPointerOver=function(e){var t=this.normalizeToPointerData(e),r=t[0],n=this.getInteractionDataForPointerId(r),i=this.configureInteractionEventForDOMEvent(this.eventData,r,n);i.data.originalEvent=r,"mouse"===r.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",i),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mouseover",i)},InteractionManager.prototype.getInteractionDataForPointerId=function(e){var t=e.pointerId,r=void 0;return t===v||"mouse"===e.pointerType?r=this.mouse:this.activeInteractionData[t]?r=this.activeInteractionData[t]:(r=this.interactionDataPool.pop()||new s.default,r.identifier=t,this.activeInteractionData[t]=r),r._copyEvent(e),r},InteractionManager.prototype.releaseInteractionDataForPointerId=function(e){var t=this.activeInteractionData[e];t&&(delete this.activeInteractionData[e],t._reset(),this.interactionDataPool.push(t))},InteractionManager.prototype.configureInteractionEventForDOMEvent=function(e,t,r){return e.data=r,this.mapPositionToPoint(r.global,t.clientX,t.clientY),navigator.isCocoonJS&&"touch"===t.pointerType&&(r.global.x=r.global.x/this.resolution,r.global.y=r.global.y/this.resolution),"touch"===t.pointerType&&(t.globalX=r.global.x,t.globalY=r.global.y),r.originalEvent=t,e._reset(),e},InteractionManager.prototype.normalizeToPointerData=function(e){var t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var r=0,n=e.changedTouches.length;r<n;r++){var i=e.changedTouches[r];void 0===i.button&&(i.button=e.touches.length?1:0),void 0===i.buttons&&(i.buttons=e.touches.length?1:0),void 0===i.isPrimary&&(i.isPrimary=1===e.touches.length&&"touchstart"===e.type),void 0===i.width&&(i.width=i.radiusX||1),void 0===i.height&&(i.height=i.radiusY||1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="touch"),void 0===i.pointerId&&(i.pointerId=i.identifier||0),void 0===i.pressure&&(i.pressure=i.force||.5),i.twist=0,i.tangentialPressure=0,void 0===i.layerX&&(i.layerX=i.offsetX=i.clientX),void 0===i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,t.push(i)}else!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof window.PointerEvent?t.push(e):(void 0===e.isPrimary&&(e.isPrimary=!0),void 0===e.width&&(e.width=1),void 0===e.height&&(e.height=1),void 0===e.tiltX&&(e.tiltX=0),void 0===e.tiltY&&(e.tiltY=0),void 0===e.pointerType&&(e.pointerType="mouse"),void 0===e.pointerId&&(e.pointerId=v),void 0===e.pressure&&(e.pressure=.5),e.twist=0,e.tangentialPressure=0,e.isNormalized=!0,t.push(e));return t},InteractionManager.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},InteractionManager}(d.default);t.default=g,o.WebGLRenderer.registerPlugin("interaction",g),o.CanvasRenderer.registerPlugin("interaction",g)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function InteractionEvent(){_classCallCheck(this,InteractionEvent),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return InteractionEvent.prototype.stopPropagation=function(){this.stopped=!0},InteractionEvent.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},InteractionEvent}();t.default=n},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function(){function InteractionTrackingData(e){_classCallCheck(this,InteractionTrackingData),this._pointerId=e,this._flags=InteractionTrackingData.FLAGS.NONE}return InteractionTrackingData.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},n(InteractionTrackingData,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(e){this._flags=e}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(e){this._doSet(this.constructor.FLAGS.OVER,e)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,e)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.LEFT_DOWN,e)}}]),InteractionTrackingData}();t.default=i,i.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.shared=t.Resource=t.textureParser=t.getResourcePath=t.spritesheetParser=t.parseBitmapFontData=t.bitmapFontParser=t.Loader=void 0;var n=r(119);Object.defineProperty(t,"bitmapFontParser",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}}),Object.defineProperty(t,"parseBitmapFontData",{enumerable:!0,get:function(){return n.parse}});var i=r(124);Object.defineProperty(t,"spritesheetParser",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}}),Object.defineProperty(t,"getResourcePath",{enumerable:!0,get:function(){return i.getResourcePath}});var o=r(125);Object.defineProperty(t,"textureParser",{enumerable:!0,get:function(){return _interopRequireDefault(o).default}});var a=r(27);Object.defineProperty(t,"Resource",{enumerable:!0,get:function(){return a.Resource}});var s=r(108),u=_interopRequireDefault(s),l=r(268),h=_interopRequireDefault(l);t.Loader=h.default;var c=new h.default;c.destroy=function(){},t.shared=c;var f=u.default.prototype;f._loader=null,Object.defineProperty(f,"loader",{get:function(){if(!this._loader){var e=this._options.sharedLoader;this._loader=e?c:new h.default}return this._loader}}),f._parentDestroy=f.destroy,f.destroy=function(e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(e)}},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(120),o=_interopRequireDefault(i),a=r(121),s=_interopRequireDefault(a),u=r(122),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),h=r(65),c=_interopRequireDefault(h),f=/(#[\w-]+)?$/,d=function(){function Loader(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;_classCallCheck(this,Loader),this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,r){return e._loadResource(t,r)},this._queue=l.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new o.default,this.onError=new o.default,this.onLoad=new o.default,this.onStart=new o.default,this.onComplete=new o.default}return Loader.prototype.add=function(e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;++o)this.add(e[o]);return this}if("object"===(void 0===e?"undefined":n(e))&&(i=t||e.callback||e.onComplete,r=e,t=e.url,e=e.name||e.key||e.url),"string"!=typeof t&&(i=r,r=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(i=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new c.default(e,t,r),"function"==typeof i&&this.resources[e].onAfterMiddleware.once(i),this.loading){for(var a=r.parentResource,s=[],u=0;u<a.children.length;++u)a.children[u].isComplete||s.push(a.children[u]);var l=a.progressChunk*(s.length+1),h=l/(s.length+2);a.children.push(this.resources[e]),a.progressChunk=h;for(var f=0;f<s.length;++f)s[f].progressChunk=h;this.resources[e].progressChunk=h}return this._queue.push(this.resources[e]),this},Loader.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},Loader.prototype.use=function(e){return this._afterMiddleware.push(e),this},Loader.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},Loader.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;for(var t=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=t;return this.loading=!0,this.onStart.dispatch(this),this._queue.resume(),this},Loader.prototype._prepareUrl=function(e){var t=(0,s.default)(e,{strictMode:!0}),r=void 0;if(r=t.protocol||!t.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var n=f.exec(r)[0];r=r.substr(0,r.length-n.length),-1!==r.indexOf("?")?r+="&"+this.defaultQueryString:r+="?"+this.defaultQueryString,r+=n}return r},Loader.prototype._loadResource=function(e,t){var r=this;e._dequeue=t,l.eachSeries(this._beforeMiddleware,function(t,n){t.call(r,e,function(){n(e.isComplete?{}:null)})},function(){e.isComplete?r._onLoad(e):(e._onLoadBinding=e.onComplete.once(r._onLoad,r),e.load())},!0)},Loader.prototype._onComplete=function(){this.loading=!1,this.onComplete.dispatch(this,this.resources)},Loader.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),l.eachSeries(this._afterMiddleware,function(r,n){r.call(t,e,n)},function(){e.onAfterMiddleware.dispatch(e),t.progress+=e.progressChunk,t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&0===t._resourcesParsing.length&&(t.progress=100,t._onComplete())},!0)},Loader}();t.default=d},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(27),i=_interopRequireDefault(n),o=r(269),a=r(14),s=_interopRequireDefault(a),u=r(125),l=_interopRequireDefault(u),h=r(124),c=_interopRequireDefault(h),f=r(119),d=_interopRequireDefault(f),p=function(e){function Loader(t,r){_classCallCheck(this,Loader);var n=_possibleConstructorReturn(this,e.call(this,t,r));s.default.call(n);for(var i=0;i<Loader._pixiMiddleware.length;++i)n.use(Loader._pixiMiddleware[i]());return n.onStart.add(function(e){return n.emit("start",e)}),n.onProgress.add(function(e,t){return n.emit("progress",e,t)}),n.onError.add(function(e,t,r){return n.emit("error",e,t,r)}),n.onLoad.add(function(e,t){return n.emit("load",e,t)}),n.onComplete.add(function(e,t){return n.emit("complete",e,t)}),n}return _inherits(Loader,e),Loader.addPixiMiddleware=function(e){Loader._pixiMiddleware.push(e)},Loader.prototype.destroy=function(){this.removeAllListeners(),this.reset()},Loader}(i.default);t.default=p;for(var _ in s.default.prototype)p.prototype[_]=s.default.prototype[_];p._pixiMiddleware=[o.blobMiddlewareFactory,l.default,c.default,d.default];var v=i.default.Resource;v.setExtensionXhrType("fnt",v.XHR_RESPONSE_TYPE.DOCUMENT)},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function blobMiddlewareFactory(){return function(e,t){if(!e.data)return void t();if(e.xhr&&e.xhrType===o.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var r=function(){var r=u.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=r,e.type=o.default.TYPE.IMAGE,e.data.onload=function(){u.revokeObjectURL(r),e.data.onload=null,t()},{v:void 0}}();if("object"===(void 0===r?"undefined":n(r)))return r.v}}else{var i=e.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return e.data=new Image,e.data.src="data:"+i+";base64,"+s.default.encodeBinary(e.xhr.responseText),e.type=o.default.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,t()})}t()}}t.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.blobMiddlewareFactory=blobMiddlewareFactory;var i=r(65),o=_interopRequireDefault(i),a=r(123),s=_interopRequireDefault(a),u=window.URL||window.webkitURL},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(28);Object.defineProperty(t,"Mesh",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}});var i=r(271);Object.defineProperty(t,"MeshRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}});var o=r(272);Object.defineProperty(t,"CanvasMeshRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(o).default}});var a=r(126);Object.defineProperty(t,"Plane",{enumerable:!0,get:function(){return _interopRequireDefault(a).default}});var s=r(273);Object.defineProperty(t,"NineSlicePlane",{enumerable:!0,get:function(){return _interopRequireDefault(s).default}});var u=r(274);Object.defineProperty(t,"Rope",{enumerable:!0,get:function(){return _interopRequireDefault(u).default}})},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),o=r(5),a=_interopRequireDefault(o),s=r(28),u=_interopRequireDefault(s),l=(r(7),i.Matrix.IDENTITY),h=function(e){function MeshRenderer(t){_classCallCheck(this,MeshRenderer);var r=_possibleConstructorReturn(this,e.call(this,t));return r.shader=null,r}return _inherits(MeshRenderer,e),MeshRenderer.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new i.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},MeshRenderer.prototype.render=function(e){var t=this.renderer,r=t.gl,n=e._texture;if(n.valid){var o=e._glDatas[t.CONTEXT_UID];o||(t.bindVao(null),o={shader:this.shader,vertexBuffer:a.default.GLBuffer.createVertexBuffer(r,e.vertices,r.STREAM_DRAW),uvBuffer:a.default.GLBuffer.createVertexBuffer(r,e.uvs,r.STREAM_DRAW),indexBuffer:a.default.GLBuffer.createIndexBuffer(r,e.indices,r.STATIC_DRAW),vao:null,dirty:e.dirty,indexDirty:e.indexDirty},o.vao=new a.default.VertexArrayObject(r).addIndex(o.indexBuffer).addAttribute(o.vertexBuffer,o.shader.attributes.aVertexPosition,r.FLOAT,!1,8,0).addAttribute(o.uvBuffer,o.shader.attributes.aTextureCoord,r.FLOAT,!1,8,0),e._glDatas[t.CONTEXT_UID]=o),t.bindVao(o.vao),e.dirty!==o.dirty&&(o.dirty=e.dirty,o.uvBuffer.upload(e.uvs)),e.indexDirty!==o.indexDirty&&(o.indexDirty=e.indexDirty,o.indexBuffer.upload(e.indices)),o.vertexBuffer.upload(e.vertices),t.bindShader(o.shader),o.shader.uniforms.uSampler=t.bindTexture(n),t.state.setBlendMode(i.utils.correctBlendMode(e.blendMode,n.baseTexture.premultipliedAlpha)),o.shader.uniforms.uTransform&&(e.uploadUvTransform?o.shader.uniforms.uTransform=e._uvTransform.mapCoord.toArray(!0):o.shader.uniforms.uTransform=l.toArray(!0)),o.shader.uniforms.translationMatrix=e.worldTransform.toArray(!0),o.shader.uniforms.uColor=i.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,o.shader.uniforms.uColor,n.baseTexture.premultipliedAlpha);var s=e.drawMode===u.default.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES;o.vao.draw(s,e.indices.length,0)}},MeshRenderer}(i.ObjectRenderer);t.default=h,i.WebGLRenderer.registerPlugin("mesh",h)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),o=r(28),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function MeshSpriteRenderer(e){_classCallCheck(this,MeshSpriteRenderer),this.renderer=e}return MeshSpriteRenderer.prototype.render=function(e){var t=this.renderer,r=t.context,n=e.worldTransform,i=t.resolution;t.roundPixels?r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i|0,n.ty*i|0):r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),t.setBlendMode(e.blendMode),e.drawMode===a.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(e):this._renderTriangles(e)},MeshSpriteRenderer.prototype._renderTriangleMesh=function(e){for(var t=e.vertices.length/2,r=0;r<t-2;r++){var n=2*r;this._renderDrawTriangle(e,n,n+2,n+4)}},MeshSpriteRenderer.prototype._renderTriangles=function(e){for(var t=e.indices,r=t.length,n=0;n<r;n+=3){var i=2*t[n],o=2*t[n+1],a=2*t[n+2];this._renderDrawTriangle(e,i,o,a)}},MeshSpriteRenderer.prototype._renderDrawTriangle=function(e,t,r,n){var i=this.renderer.context,o=e.uvs,a=e.vertices,s=e._texture;if(s.valid){var u=s.baseTexture,l=u.source,h=u.width,c=u.height,f=void 0,d=void 0,p=void 0,_=void 0,v=void 0,y=void 0;if(e.uploadUvTransform){var g=e._uvTransform.mapCoord;f=(o[t]*g.a+o[t+1]*g.c+g.tx)*u.width,d=(o[r]*g.a+o[r+1]*g.c+g.tx)*u.width,p=(o[n]*g.a+o[n+1]*g.c+g.tx)*u.width,_=(o[t]*g.b+o[t+1]*g.d+g.ty)*u.height,v=(o[r]*g.b+o[r+1]*g.d+g.ty)*u.height,y=(o[n]*g.b+o[n+1]*g.d+g.ty)*u.height}else f=o[t]*u.width,d=o[r]*u.width,p=o[n]*u.width,_=o[t+1]*u.height,v=o[r+1]*u.height,y=o[n+1]*u.height;var m=a[t],b=a[r],x=a[n],T=a[t+1],w=a[r+1],E=a[n+1];if(e.canvasPadding>0){var C=e.canvasPadding/e.worldTransform.a,R=e.canvasPadding/e.worldTransform.d,S=(m+b+x)/3,P=(T+w+E)/3,O=m-S,M=T-P,D=Math.sqrt(O*O+M*M);m=S+O/D*(D+C),T=P+M/D*(D+R),O=b-S,M=w-P,D=Math.sqrt(O*O+M*M),b=S+O/D*(D+C),w=P+M/D*(D+R),O=x-S,M=E-P,D=Math.sqrt(O*O+M*M),x=S+O/D*(D+C),E=P+M/D*(D+R)}i.save(),i.beginPath(),i.moveTo(m,T),i.lineTo(b,w),i.lineTo(x,E),i.closePath(),i.clip();var A=f*v+_*p+d*y-v*p-_*d-f*y,I=m*v+_*x+b*y-v*x-_*b-m*y,L=f*b+m*p+d*x-b*p-m*d-f*x,k=f*v*x+_*b*p+m*d*y-m*v*p-_*d*x-f*b*y,F=T*v+_*E+w*y-v*E-_*w-T*y,N=f*w+T*p+d*E-w*p-T*d-f*E,B=f*v*E+_*w*p+T*d*y-T*v*p-_*d*E-f*w*y;i.transform(I/A,F/A,L/A,N/A,k/A,B/A),i.drawImage(l,0,0,h*u.resolution,c*u.resolution,0,0,h,c),i.restore()}},MeshSpriteRenderer.prototype.renderMeshFlat=function(e){var t=this.renderer.context,r=e.vertices,n=r.length/2;t.beginPath();for(var i=1;i<n-2;++i){var o=2*i,a=r[o],s=r[o+1],u=r[o+2],l=r[o+3],h=r[o+4],c=r[o+5];t.moveTo(a,s),t.lineTo(u,l),t.lineTo(h,c)}t.fillStyle="#FF0000",t.fill(),t.closePath()},MeshSpriteRenderer.prototype.destroy=function(){this.renderer=null},MeshSpriteRenderer}();t.default=s,i.CanvasRenderer.registerPlugin("mesh",s)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(126),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=10,s=function(e){function NineSlicePlane(t,r,n,i,o){_classCallCheck(this,NineSlicePlane);var s=_possibleConstructorReturn(this,e.call(this,t,4,4));return s._origWidth=t.orig.width,s._origHeight=t.orig.height,s._width=s._origWidth,s._height=s._origHeight,s.leftWidth=void 0!==r?r:a,s.rightWidth=void 0!==i?i:a,s.topHeight=void 0!==n?n:a,s.bottomHeight=void 0!==o?o:a,s.refresh(!0),s}return _inherits(NineSlicePlane,e),NineSlicePlane.prototype.updateHorizontalVertices=function(){var e=this.vertices;e[9]=e[11]=e[13]=e[15]=this._topHeight,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight,e[25]=e[27]=e[29]=e[31]=this._height},NineSlicePlane.prototype.updateVerticalVertices=function(){var e=this.vertices;e[2]=e[10]=e[18]=e[26]=this._leftWidth,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth,e[6]=e[14]=e[22]=e[30]=this._width},NineSlicePlane.prototype._renderCanvas=function(e){var t=e.context;t.globalAlpha=this.worldAlpha;var r=this.worldTransform,n=e.resolution;e.roundPixels?t.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n|0,r.ty*n|0):t.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n);var i=this._texture.baseTexture,o=i.source,a=i.width,s=i.height;this.drawSegment(t,o,a,s,0,1,10,11),this.drawSegment(t,o,a,s,2,3,12,13),this.drawSegment(t,o,a,s,4,5,14,15),this.drawSegment(t,o,a,s,8,9,18,19),this.drawSegment(t,o,a,s,10,11,20,21),this.drawSegment(t,o,a,s,12,13,22,23),this.drawSegment(t,o,a,s,16,17,26,27),this.drawSegment(t,o,a,s,18,19,28,29),this.drawSegment(t,o,a,s,20,21,30,31)},NineSlicePlane.prototype.drawSegment=function(e,t,r,n,i,o,a,s){var u=this.uvs,l=this.vertices,h=(u[a]-u[i])*r,c=(u[s]-u[o])*n,f=l[a]-l[i],d=l[s]-l[o];h<1&&(h=1),c<1&&(c=1),f<1&&(f=1),d<1&&(d=1),e.drawImage(t,u[i]*r,u[o]*n,h,c,l[i],l[o],f,d)},NineSlicePlane.prototype._refresh=function(){e.prototype._refresh.call(this);var t=this.uvs,r=this._texture;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var n=1/this._origWidth,i=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=n*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-n*this._rightWidth,t[9]=t[11]=t[13]=t[15]=i*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty=!0,this.multiplyUvs()},n(NineSlicePlane,[{key:"width",get:function(){return this._width},set:function(e){this._width=e,this._refresh()}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()}}]),NineSlicePlane}(o.default);t.default=s},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(28),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=function(e){function Rope(t,r){_classCallCheck(this,Rope);var n=_possibleConstructorReturn(this,e.call(this,t));return n.points=r,n.vertices=new Float32Array(4*r.length),n.uvs=new Float32Array(4*r.length),n.colors=new Float32Array(2*r.length),n.indices=new Uint16Array(2*r.length),n.autoUpdate=!0,n.refresh(),n}return _inherits(Rope,e),Rope.prototype._refresh=function(){var e=this.points;if(!(e.length<1)&&this._texture._uvs){this.vertices.length/4!==e.length&&(this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length));var t=this.uvs,r=this.indices,n=this.colors;t[0]=0,t[1]=0,t[2]=0,t[3]=1,n[0]=1,n[1]=1,r[0]=0,r[1]=1;for(var i=e.length,o=1;o<i;o++){var a=4*o,s=o/(i-1);t[a]=s,t[a+1]=0,t[a+2]=s,t[a+3]=1,a=2*o,n[a]=1,n[a+1]=1,a=2*o,r[a]=a,r[a+1]=a+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},Rope.prototype.refreshVertices=function(){var e=this.points;if(!(e.length<1))for(var t=e[0],r=void 0,n=0,i=0,o=this.vertices,a=e.length,s=0;s<a;s++){var u=e[s],l=4*s;r=s<e.length-1?e[s+1]:u,i=-(r.x-t.x),n=r.y-t.y;var h=10*(1-s/(a-1));h>1&&(h=1);var c=Math.sqrt(n*n+i*i),f=this._texture.height/2;n/=c,i/=c,n*=f,i*=f,o[l]=u.x+n,o[l+1]=u.y+i,o[l+2]=u.x-n,o[l+3]=u.y-i,t=u}},Rope.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},Rope}(i.default);t.default=o},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(276);Object.defineProperty(t,"ParticleContainer",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}});var i=r(277);Object.defineProperty(t,"ParticleRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}})},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(0),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),a=r(2),s=function(e){function ParticleContainer(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,r=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384;_classCallCheck(this,ParticleContainer);var i=_possibleConstructorReturn(this,e.call(this));return n>16384&&(n=16384),n>t&&(n=t),i._properties=[!1,!0,!1,!1,!1],i._maxSize=t,i._batchSize=n,i._glBuffers={},i._bufferToUpdate=0,i.interactiveChildren=!1,i.blendMode=o.BLEND_MODES.NORMAL,i.roundPixels=!0,i.baseTexture=null,i.setProperties(r),i._tint=0,i.tintRgb=new Float32Array(4),i.tint=16777215,i}return _inherits(ParticleContainer,e),ParticleContainer.prototype.setProperties=function(e){e&&(this._properties[0]="scale"in e?!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="alpha"in e?!!e.alpha:this._properties[4])},ParticleContainer.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},ParticleContainer.prototype.renderWebGL=function(e){var t=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return t.onChildrenChange(0)})),e.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},ParticleContainer.prototype.onChildrenChange=function(e){var t=Math.floor(e/this._batchSize);t<this._bufferToUpdate&&(this._bufferToUpdate=t)},ParticleContainer.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var t=e.context,r=this.worldTransform,n=!0,i=0,o=0,a=0,s=0,u=e.blendModes[this.blendMode];u!==t.globalCompositeOperation&&(t.globalCompositeOperation=u),t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var h=this.children[l];if(h.visible){var c=h._texture.frame;if(t.globalAlpha=this.worldAlpha*h.alpha,h.rotation%(2*Math.PI)==0)n&&(t.setTransform(r.a,r.b,r.c,r.d,r.tx*e.resolution,r.ty*e.resolution),n=!1),i=h.anchor.x*(-c.width*h.scale.x)+h.position.x+.5,o=h.anchor.y*(-c.height*h.scale.y)+h.position.y+.5,a=c.width*h.scale.x,s=c.height*h.scale.y;else{n||(n=!0),h.displayObjectUpdateTransform();var f=h.worldTransform;e.roundPixels?t.setTransform(f.a,f.b,f.c,f.d,f.tx*e.resolution|0,f.ty*e.resolution|0):t.setTransform(f.a,f.b,f.c,f.d,f.tx*e.resolution,f.ty*e.resolution),i=h.anchor.x*-c.width+.5,o=h.anchor.y*-c.height+.5,a=c.width,s=c.height}var d=h._texture.baseTexture.resolution;t.drawImage(h._texture.baseTexture.source,c.x*d,c.y*d,c.width*d,c.height*d,i*e.resolution,o*e.resolution,a*e.resolution,s*e.resolution)}}}},ParticleContainer.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._buffers)for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._properties=null,this._buffers=null},n(ParticleContainer,[{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,(0,a.hex2rgb)(e,this.tintRgb)}}]),ParticleContainer}(o.Container);t.default=s},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),o=r(278),a=_interopRequireDefault(o),s=r(279),u=_interopRequireDefault(s),l=function(e){function ParticleRenderer(t){_classCallCheck(this,ParticleRenderer);var r=_possibleConstructorReturn(this,e.call(this,t));return r.shader=null,r.indexBuffer=null,r.properties=null,r.tempMatrix=new i.Matrix,r.CONTEXT_UID=0,r}return _inherits(ParticleRenderer,e),ParticleRenderer.prototype.onContextChange=function(){var e=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new a.default(e),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},ParticleRenderer.prototype.start=function(){this.renderer.bindShader(this.shader)},ParticleRenderer.prototype.render=function(e){var t=e.children,r=e._maxSize,n=e._batchSize,o=this.renderer,a=t.length;if(0!==a){a>r&&(a=r);var s=e._glBuffers[o.CONTEXT_UID];s||(s=e._glBuffers[o.CONTEXT_UID]=this.generateBuffers(e));var u=t[0]._texture.baseTexture;this.renderer.setBlendMode(i.utils.correctBlendMode(e.blendMode,u.premultipliedAlpha));var l=o.gl,h=e.worldTransform.copy(this.tempMatrix);h.prepend(o._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=h.toArray(!0),this.shader.uniforms.uColor=i.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,u.premultipliedAlpha),this.shader.uniforms.uSampler=o.bindTexture(u);for(var c=0,f=0;c<a;c+=n,f+=1){var d=a-c;d>n&&(d=n);var p=s[f];p.uploadDynamic(t,c,d),e._bufferToUpdate===f&&(p.uploadStatic(t,c,d),e._bufferToUpdate=f+1),o.bindVao(p.vao),p.vao.draw(l.TRIANGLES,6*d)}}},ParticleRenderer.prototype.generateBuffers=function(e){for(var t=this.renderer.gl,r=[],n=e._maxSize,i=e._batchSize,o=e._properties,a=0;a<n;a+=i)r.push(new u.default(t,this.properties,o,i));return r},ParticleRenderer.prototype.uploadVertices=function(e,t,r,n,i,o){for(var a=0,s=0,u=0,l=0,h=0;h<r;++h){var c=e[t+h],f=c._texture,d=c.scale.x,p=c.scale.y,_=f.trim,v=f.orig;_?(s=_.x-c.anchor.x*v.width,a=s+_.width,l=_.y-c.anchor.y*v.height,u=l+_.height):(a=v.width*(1-c.anchor.x),s=v.width*-c.anchor.x,u=v.height*(1-c.anchor.y),l=v.height*-c.anchor.y),n[o]=s*d,n[o+1]=l*p,n[o+i]=a*d,n[o+i+1]=l*p,n[o+2*i]=a*d,n[o+2*i+1]=u*p,n[o+3*i]=s*d,n[o+3*i+1]=u*p,o+=4*i}},ParticleRenderer.prototype.uploadPosition=function(e,t,r,n,i,o){for(var a=0;a<r;a++){var s=e[t+a].position;n[o]=s.x,n[o+1]=s.y,n[o+i]=s.x,n[o+i+1]=s.y,n[o+2*i]=s.x,n[o+2*i+1]=s.y,n[o+3*i]=s.x,n[o+3*i+1]=s.y,o+=4*i}},ParticleRenderer.prototype.uploadRotation=function(e,t,r,n,i,o){for(var a=0;a<r;a++){var s=e[t+a].rotation;n[o]=s,n[o+i]=s,n[o+2*i]=s,n[o+3*i]=s,o+=4*i}},ParticleRenderer.prototype.uploadUvs=function(e,t,r,n,i,o){for(var a=0;a<r;++a){var s=e[t+a]._texture._uvs;s?(n[o]=s.x0,n[o+1]=s.y0,n[o+i]=s.x1,n[o+i+1]=s.y1,n[o+2*i]=s.x2,n[o+2*i+1]=s.y2,n[o+3*i]=s.x3,n[o+3*i+1]=s.y3,o+=4*i):(n[o]=0,n[o+1]=0,n[o+i]=0,n[o+i+1]=0,n[o+2*i]=0,n[o+2*i+1]=0,n[o+3*i]=0,n[o+3*i+1]=0,o+=4*i)}},ParticleRenderer.prototype.uploadAlpha=function(e,t,r,n,i,o){for(var a=0;a<r;a++){var s=e[t+a].alpha;n[o]=s,n[o+i]=s,n[o+2*i]=s,n[o+3*i]=s,o+=4*i}},ParticleRenderer.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),e.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},ParticleRenderer}(i.ObjectRenderer);t.default=l,i.WebGLRenderer.registerPlugin("particle",l)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(26),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=function(e){function ParticleShader(t){return _classCallCheck(this,ParticleShader),_possibleConstructorReturn(this,e.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform vec4 uColor;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uColor;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n")))}return _inherits(ParticleShader,e),ParticleShader}(i.default);t.default=o},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=r(5),i=_interopRequireDefault(n),o=r(63),a=_interopRequireDefault(o),s=function(){function ParticleBuffer(e,t,r,n){_classCallCheck(this,ParticleBuffer),this.gl=e,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;++i){var o=t[i];o={attribute:o.attribute,size:o.size,uploadFunction:o.uploadFunction,offset:o.offset},r[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}return ParticleBuffer.prototype.initBuffers=function(){var e=this.gl,t=0;this.indices=(0,a.default)(this.size),this.indexBuffer=i.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){var n=this.dynamicProperties[r];n.offset=t,t+=n.size,this.dynamicStride+=n.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=i.default.GLBuffer.createVertexBuffer(e,this.dynamicData,e.STREAM_DRAW);var o=0;this.staticStride=0;for(var s=0;s<this.staticProperties.length;++s){var u=this.staticProperties[s];u.offset=o,o+=u.size,this.staticStride+=u.size}this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=i.default.GLBuffer.createVertexBuffer(e,this.staticData,e.STATIC_DRAW),this.vao=new i.default.VertexArrayObject(e).addIndex(this.indexBuffer);for(var l=0;l<this.dynamicProperties.length;++l){var h=this.dynamicProperties[l];this.vao.addAttribute(this.dynamicBuffer,h.attribute,e.FLOAT,!1,4*this.dynamicStride,4*h.offset)}for(var c=0;c<this.staticProperties.length;++c){var f=this.staticProperties[c];this.vao.addAttribute(this.staticBuffer,f.attribute,e.FLOAT,!1,4*this.staticStride,4*f.offset)}},ParticleBuffer.prototype.uploadDynamic=function(e,t,r){for(var n=0;n<this.dynamicProperties.length;n++){var i=this.dynamicProperties[n];i.uploadFunction(e,t,r,this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer.upload()},ParticleBuffer.prototype.uploadStatic=function(e,t,r){for(var n=0;n<this.staticProperties.length;n++){var i=this.staticProperties[n];i.uploadFunction(e,t,r,this.staticData,this.staticStride,i.offset)}this.staticBuffer.upload()},ParticleBuffer.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},ParticleBuffer}();t.default=s},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(281);Object.defineProperty(t,"webgl",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}});var i=r(282);Object.defineProperty(t,"canvas",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}});var o=r(66);Object.defineProperty(t,"BasePrepare",{enumerable:!0,get:function(){return _interopRequireDefault(o).default}});var a=r(127);Object.defineProperty(t,"CountLimiter",{enumerable:!0,get:function(){return _interopRequireDefault(a).default}});var s=r(283);Object.defineProperty(t,"TimeLimiter",{enumerable:!0,get:function(){return _interopRequireDefault(s).default}})},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function uploadBaseTextures(e,t){return t instanceof i.BaseTexture&&(t._glTextures[e.CONTEXT_UID]||e.textureManager.updateTexture(t),!0)}function uploadGraphics(e,t){return t instanceof i.Graphics&&((t.dirty||t.clearDirty||!t._webGL[e.plugins.graphics.CONTEXT_UID])&&e.plugins.graphics.updateGraphics(t),!0)}function findGraphics(e,t){return e instanceof i.Graphics&&(t.push(e),!0)}t.__esModule=!0;var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),o=r(66),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(e){function WebGLPrepare(t){_classCallCheck(this,WebGLPrepare);var r=_possibleConstructorReturn(this,e.call(this,t));return r.uploadHookHelper=r.renderer,r.registerFindHook(findGraphics),r.registerUploadHook(uploadBaseTextures),r.registerUploadHook(uploadGraphics),r}return _inherits(WebGLPrepare,e),WebGLPrepare}(a.default);t.default=s,i.WebGLRenderer.registerPlugin("prepare",s)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function uploadBaseTextures(e,t){if(t instanceof i.BaseTexture){var r=t.source,n=0===r.width?e.canvas.width:Math.min(e.canvas.width,r.width),o=0===r.height?e.canvas.height:Math.min(e.canvas.height,r.height);return e.ctx.drawImage(r,0,0,n,o,0,0,e.canvas.width,e.canvas.height),!0}return!1}t.__esModule=!0;var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),o=r(66),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=16,u=function(e){function CanvasPrepare(t){_classCallCheck(this,CanvasPrepare);var r=_possibleConstructorReturn(this,e.call(this,t));return r.uploadHookHelper=r,r.canvas=document.createElement("canvas"),r.canvas.width=s,r.canvas.height=s,r.ctx=r.canvas.getContext("2d"),r.registerUploadHook(uploadBaseTextures),r}return _inherits(CanvasPrepare,e),CanvasPrepare.prototype.destroy=function(){e.prototype.destroy.call(this),this.ctx=null,this.canvas=null},CanvasPrepare}(a.default);t.default=u,i.CanvasRenderer.registerPlugin("prepare",u)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function TimeLimiter(e){_classCallCheck(this,TimeLimiter),this.maxMilliseconds=e,this.frameStart=0}return TimeLimiter.prototype.beginFrame=function(){this.frameStart=Date.now()},TimeLimiter.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},TimeLimiter}();t.default=n}])});